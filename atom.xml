<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>原力小站</title>
  
  <subtitle>扎导的原版正联出了吗？</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://Bithub00.com/"/>
  <updated>2020-06-08T02:55:56.080Z</updated>
  <id>http://Bithub00.com/</id>
  
  <author>
    <name>Mr.shuan</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Ubuntu操作</title>
    <link href="http://Bithub00.com/2020/06/08/ubuntu%E6%93%8D%E4%BD%9C/"/>
    <id>http://Bithub00.com/2020/06/08/ubuntu操作/</id>
    <published>2020-06-08T02:31:17.355Z</published>
    <updated>2020-06-08T02:55:56.080Z</updated>
    
    <content type="html"><![CDATA[<p>用本文记录Ubuntu操作时遇到的一些问题和解决方法，自己试过成功的<br><a id="more"></a></p><ul><li><p>修改Ubuntu的apt-get源为国内镜像源 <a href="https://blog.csdn.net/zgljl2012/article/details/79065174" target="_blank" rel="noopener">CSDN</a></p></li><li><p>Ubuntu16.04安装python3.5同时保留python2.7 <a href="https://askubuntu.com/questions/1142982/install-python-3-alongside-python-2-7-on-ubuntu-18-04" target="_blank" rel="noopener">askubuntu</a></p></li><li><p>修改Ubuntu的pip源为阿里源 <a href="https://blog.csdn.net/w5688414/article/details/104439181" target="_blank" rel="noopener">CSDN</a></p></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;用本文记录Ubuntu操作时遇到的一些问题和解决方法，自己试过成功的&lt;br&gt;
    
    </summary>
    
    
      <category term="Linux" scheme="http://Bithub00.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Pycharm from xx import出错</title>
    <link href="http://Bithub00.com/2020/03/10/from%20import%E9%94%99%E8%AF%AF/"/>
    <id>http://Bithub00.com/2020/03/10/from import错误/</id>
    <published>2020-03-10T02:55:52.529Z</published>
    <updated>2020-03-10T03:14:51.117Z</updated>
    
    <content type="html"><![CDATA[<h3 id="错误描述"><a href="#错误描述" class="headerlink" title="错误描述"></a>错误描述</h3><p>使用Pycharm的时候，使用from引入自己模块报错：<br><a id="more"></a><br><img src="https://s2.ax1x.com/2020/03/10/8CvYlj.png" alt=""></p><h3 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h3><p>pycharm不会将当前文件目录自动加入sourse_path，右键源代码目录make_directory as–&gt;sources root将当前工作的文件夹加入就行了</p><h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><p><img src="https://s2.ax1x.com/2020/03/10/8Cvt6s.png" alt=""></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;错误描述&quot;&gt;&lt;a href=&quot;#错误描述&quot; class=&quot;headerlink&quot; title=&quot;错误描述&quot;&gt;&lt;/a&gt;错误描述&lt;/h3&gt;&lt;p&gt;使用Pycharm的时候，使用from引入自己模块报错：&lt;br&gt;
    
    </summary>
    
    
      <category term="python" scheme="http://Bithub00.com/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>计量经济学课程笔记</title>
    <link href="http://Bithub00.com/2019/11/18/%E8%AE%A1%E9%87%8F%E7%BB%8F%E6%B5%8E%E5%AD%A6/"/>
    <id>http://Bithub00.com/2019/11/18/计量经济学/</id>
    <published>2019-11-18T09:17:46.871Z</published>
    <updated>2019-11-18T12:54:25.298Z</updated>
    
    <content type="html"><![CDATA[<p>本篇博客记录计量经济学课程学习过程中的笔记<br><a id="more"></a></p><h2 id="OLS估计"><a href="#OLS估计" class="headerlink" title="OLS估计"></a>OLS估计</h2><h3 id="模型假设"><a href="#模型假设" class="headerlink" title="模型假设"></a>模型假设</h3><ul><li>SLR.1 被解释变量y与解释变量x之间的关系满足</li></ul><script type="math/tex; mode=display">y=\beta_0+\beta_1x+u</script><ul><li>SLR.2 $(x_1,y_1),…,(x_n,y_n)是(x,y)的一组随机样本$</li><li>SLR.3 $x_1,…,x_n$不完全相同</li><li>SLR.4 随机误差满足$E(u|x)=0$</li><li>SLR.5 同方差假设</li></ul><script type="math/tex; mode=display">Var(u|x)=\sigma^2</script><h3 id="参数估计"><a href="#参数估计" class="headerlink" title="参数估计"></a>参数估计</h3><p>假设样本$(x_1,y_1)…(x_n,y_n)$近似分布在一条直线两侧，模型为</p><script type="math/tex; mode=display">y_i=\beta_0+\beta_1x_i+u_i</script><p>直观上看最佳的拟合应该使数据点都尽量靠近所拟合的直线，转化为数学表达式就是对于每个样本点的实际观测值与拟合值之间的差$\hat{u_i}=y_i-\hat{y_i}$应尽可能小，其中$\hat{y_i}=\hat{\beta_0}+\hat{\beta_1}x_i$为拟合值。<br>为了避免符号导致求和时进行相互抵消，使用残差平方和来表示实际观测值与拟合值之间的差：</p><script type="math/tex; mode=display">S(\hat{\beta_0},\hat{\beta_1})=\sum_{i=1}^{n}\hat{u_i}^2=\sum_{i=1}^{n}(y_i-\hat{\beta_0}-\hat{\beta_1}x_i)^2</script><p>则最小二乘法的目的就是最小化这个残差平方和来估计参数$\hat{\beta_0}$和$\hat{\beta_1}$。记$S(\hat{\beta_0},\hat{\beta_1})=\sum(y_i-\hat{\beta_0}-\hat{\beta_1}x_i)^2$，则目标变成求解这个二元函数的最小值点，由微积分中求函数最值的办法进行求导：</p><script type="math/tex; mode=display">\begin{cases}\frac{\partial S(\hat{\beta_0},\hat{\beta_1})}{\partial\hat{\beta_0}} = 0 \\\\\frac{\partial S(\hat{\beta_0},\hat{\beta_1})}{\partial\hat{\beta_1}} = 0 \end{cases}</script><p>得到如下方程组：</p><script type="math/tex; mode=display">\begin{cases}\sum_{i=1}^n(y_i-\hat{\beta_0}-\hat{\beta_1}x_i)=0 \\\\\sum_{i=1}^n(y_i-\hat{\beta_0}-\hat{\beta_1}x_i)x_i=0\end{cases}</script><p>由第一个式子得到：</p><script type="math/tex; mode=display">\hat{\beta_0}=\bar{y}-\hat{\beta_1\bar{x}}</script><p>将它代入第二个式子，得到：</p><script type="math/tex; mode=display">\hat{\beta_1}=\frac{\sum x_iy_i-n\bar{x}\bar{y}}{\sum x_i^2-n(\bar{x})^2}=\frac{\sum(x_i-\bar{x})(y_i-\bar{y})}{\sum(x_i-\bar{x})^2}=\frac{S_{xy}}{S_x^2}</script><p>这样我们就得到了两个未知参数的回归估计。</p><h3 id="拟合结果"><a href="#拟合结果" class="headerlink" title="拟合结果"></a>拟合结果</h3><p>对于简单线性模型:</p><script type="math/tex; mode=display">y_i=\beta_0+\beta_1x_i+u_i</script><p>通过最小二乘法得到了一个拟合模型：</p><script type="math/tex; mode=display">\hat{y_i}=\hat{\beta_0}+\hat{\beta_1}x_i</script><p>自然而然地，我们想知道这个模型的拟合效果如何，解释变量在多大程度上解释了被解释变量？<br>总的平方和：</p><script type="math/tex; mode=display">TSS=\sum_{i=1}^n(y_i-\bar{y})^2</script><p>解释平方和：</p><script type="math/tex; mode=display">ESS=\sum_{i=1}^n(\hat{y_i}-\bar{y})^2</script><p>残差平方和：</p><script type="math/tex; mode=display">RSS=\sum_{i=1}^n(y_i-\hat{y})^2</script><p>三者的关系为：</p><script type="math/tex; mode=display">\begin{aligned}TSS=\sum_{i=1}^n(y_i-\bar{y})^2  &=\sum_{i=1}^n(y_i-\hat{yi}+\hat{yi}-\bar{y})^2 \\&= RSS+ESS+2\sum_{i=1}^n\hat{u_i}(\hat{yi}-\bar{y}) \\&= RSS+ESS\end{aligned}</script><p>判定系数定义为：</p><script type="math/tex; mode=display">R^2=\frac{ESS}{TSS}=1-\frac{RSS}{TSS}</script><p>可以表明解释变量多大程度上解释了被解释变量。</p><h3 id="期望与方差"><a href="#期望与方差" class="headerlink" title="期望与方差"></a>期望与方差</h3><h4 id="OLS估计的期望："><a href="#OLS估计的期望：" class="headerlink" title="OLS估计的期望："></a>OLS估计的期望：</h4><p>记离差$d_i=x_i-\bar{x}$，$TSS_x=\sum_{i=1}^n(x_i-\bar{x})^2$，有</p><script type="math/tex; mode=display">\sum^n_{i=1}d_i=0，\sum^n_{i=1}d_ix_i=\sum^n_{i=1}d_i^2=TSS_x</script><p>于是有</p><script type="math/tex; mode=display">\hat{\beta_1}=\frac{\sum(x_i-\bar{x})(y_i-\bar{y})}{\sum(x_i-\bar{x})^2}=\frac{1}{TSS_x}\sum^n_{i=1}d_iy_i</script><p>代入$y_i=\beta_0+\beta_1x_i+u_i$，得：</p><script type="math/tex; mode=display">\hat{\beta_1}=\beta_1+\frac{1}{TSS_x}\sum_{i=1}^nd_iu_i</script><p>所以</p><script type="math/tex; mode=display">E(\hat{\beta_1}|x_1,...,x_n)=\beta_1+\frac{1}{TSS_x}\sum_{i=1}^nd_iE(u_i)=\beta_1</script><p>即OLS估计是无偏的，$\hat{\beta_0}$的证明同理</p><h4 id="OLS估计的方差："><a href="#OLS估计的方差：" class="headerlink" title="OLS估计的方差："></a>OLS估计的方差：</h4><p>前面已经得到$\hat{\beta_1}=\beta_1+\frac{1}{TSS_x}\sum_{i=1}^nd_iu_i$，则</p><script type="math/tex; mode=display">Var(\hat{\beta_1}|x_1,...,x_n)=\frac{1}{TSS_x^2}\sum^n_{i=1}d_i^2Var(u_i)=\frac{\sigma^2}{TSS_x}</script><p>同理</p><script type="math/tex; mode=display">Var(\hat{\beta_0}|x_1,...,x_n)=\frac{\sum^n_{i=1}x_i^2}{n\sum^n_{i=1}(x_i-\bar{x})^2}\sigma^2</script><p>则OLS估计方差依赖于三个因素：</p><ul><li>随机误差的方差</li><li>自变量的方差</li><li>样本量</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;本篇博客记录计量经济学课程学习过程中的笔记&lt;br&gt;
    
    </summary>
    
    
      <category term="数学" scheme="http://Bithub00.com/tags/%E6%95%B0%E5%AD%A6/"/>
    
  </entry>
  
  <entry>
    <title>Laplace先验与L1正则</title>
    <link href="http://Bithub00.com/2019/11/18/Laplace%E4%B8%8EL1%E6%AD%A3%E5%88%99/"/>
    <id>http://Bithub00.com/2019/11/18/Laplace与L1正则/</id>
    <published>2019-11-18T02:38:55.731Z</published>
    <updated>2019-11-18T03:31:08.144Z</updated>
    
    <content type="html"><![CDATA[<p>本篇博客探讨一下为什么说L1正则等同于Laplace先验<br><a id="more"></a></p><h3 id="Laplace分布"><a href="#Laplace分布" class="headerlink" title="Laplace分布"></a>Laplace分布</h3><p>首先介绍什么是Laplace分布，它的概率密度函数如下：</p><script type="math/tex; mode=display">f(x|\mu,b)=\frac{1}{2b}e^{-\frac{|x-\mu|}{b}}</script><p>分布的图像如下：</p><p><img src="https://s2.ax1x.com/2019/11/18/MynJXR.jpg" alt=""><br>由图可以看出，Laplace分布集中在$\mu$附件，b越小数据分布越集中</p><h3 id="Laplace先验导出L1正则"><a href="#Laplace先验导出L1正则" class="headerlink" title="Laplace先验导出L1正则"></a>Laplace先验导出L1正则</h3><p>导出之前，需要用到最大似然的知识：  </p><p>首先我们假设现在需要从一些样本点$(x_1,y_1)···(x_N,y_N)$中来估计参数 $\beta$，假设输出$y$与输入$x$之间线性相关，并且受噪声$\epsilon$影响:</p><script type="math/tex; mode=display">y_n=\beta x_n+\epsilon</script><p>这里的$\epsilon$服从均值为0，方差为$\sigma^2$的高斯分布，这个式子还可以写成：</p><script type="math/tex; mode=display">\begin{aligned}f(X)&=\sum_i(x_i\beta_i)+\epsilon \\&=X\theta^T+\epsilon\end{aligned}</script><p>其中$X=(x_1,x_2…x_n)$，对数据集$(X_i,Y_i)$，用$X_i$得到$Y_i$的概率是$Y_i\backsim N(f(X_i),\sigma^2)$：</p><script type="math/tex; mode=display">P(Y_i|X_i,\theta)=\frac{1}{\sigma\sqrt{2\pi}}e^{-\frac{\lVert f(X_i)-Y_i\rVert^2}{2\sigma^2}}</script><p>假设数据集中每对数据$(X_i,Y_i)$都是独立的，那么对于数据集来说由X得到Y的概率是：</p><script type="math/tex; mode=display">P(Y|X,\theta)=\prod_i\frac{1}{\sigma\sqrt{2\pi}}e^{-\frac{\lVert f(X_i)-Y_i\rVert^2}{2\sigma^2}}</script><p>显然，我们的目标是使这个概率值最大，最大时的参数$\theta$就是我们需要的参数：</p><script type="math/tex; mode=display">\begin{aligned}\theta^* &= argmax_\theta(\prod_i\frac{1}{\sigma\sqrt{2\pi}}e^{-\frac{\lVert f(X_i)-Y_i\rVert^2}{2\sigma^2}}) \\&= argmax_\theta(-\frac{1}{2\sigma^2}\sum_i\lVert f(X_i)-Y_i\rVert^2 + \sum_iln(\sigma \sqrt{2\pi})) \\&= argmin_\theta(\sum_i \lVert f(X_i)-Y_i\rVert^2)\end{aligned}</script><p>可以看到，这就是最小二乘法。在最大似然估计中，假设了$\theta$是均匀分布的，$p(\theta)=常数$，同这篇博客<a href="http://www.bithub00.com/2019/10/21/%E9%AB%98%E6%96%AF%E5%85%88%E9%AA%8C%E4%B8%8EL2%E6%AD%A3%E5%88%99/" target="_blank" rel="noopener">高斯先验分布与L2正则</a>一样，我们要最大化如下的后验估计：</p><script type="math/tex; mode=display">\begin{aligned}\theta^* &= argmax_\theta(\prod_i P(Y_i|X_i,\theta)\prod_i P(\theta_i)) \\&= argmin_\theta(\sum_i \lVert f(X_i)-Y_i\rVert^2+\sum_i ln(P(\theta_i)))\end{aligned}</script><p>将第一节中的Laplace分布代入$P(\theta_i)$，我们得到：</p><script type="math/tex; mode=display">\theta^*=argmin_\theta(\sum_i \Vert f(X_i)-Y_i\rVert^2+\lambda\sum_i|\theta_i|)</script><p>这就是L1正则。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;本篇博客探讨一下为什么说L1正则等同于Laplace先验&lt;br&gt;
    
    </summary>
    
    
      <category term="数学" scheme="http://Bithub00.com/tags/%E6%95%B0%E5%AD%A6/"/>
    
  </entry>
  
  <entry>
    <title>毕业设计</title>
    <link href="http://Bithub00.com/2019/11/04/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/"/>
    <id>http://Bithub00.com/2019/11/04/毕业设计/</id>
    <published>2019-11-04T06:51:55.936Z</published>
    <updated>2019-11-04T07:27:57.125Z</updated>
    
    <content type="html"><![CDATA[<p>以本文记录自己毕业设计中的学习过程。<br><a id="more"></a></p><h2 id="NRLMF与GRNMF"><a href="#NRLMF与GRNMF" class="headerlink" title="NRLMF与GRNMF"></a>NRLMF与GRNMF</h2><p>首先是老师让我看的两篇论文</p><ul><li>GRNMF：<a href="https://academic.oup.com/bioinformatics/article/34/2/239/4101940" target="_blank" rel="noopener">a graph regularized nonnegative matrix factorization method for identifying microRNA-disease associations</a></li><li>NRLMF：<a href="https://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1004760" target="_blank" rel="noopener">Neighborhood Regularized Logistic Matrix Factorization for Drug-Target Interaction Prediction</a>  </li></ul><p>以下是自己的一点笔记：</p><script type="math/tex; mode=display">\min_{W,H}\lVert Y-WH^T \rVert^2_F</script><p>两篇论文共同点：都利用了样本点的邻域信息，GRNMF为miRNA-disease，NRLMF为drug-target，而两篇论文都选取了前k个相似的样本而不是全部相似样本，目的是为了避免引入噪声。使用[0,1]区间连续取值的相似度而不是0/1的二值变量，相似度越大的两个样本它们各自的特征向量应该越相似。</p><h3 id="GRNMF"><a href="#GRNMF" class="headerlink" title="GRNMF"></a>GRNMF</h3><p>模型所使用的数据集没有提供现成的相似度，因此论文的一个创新点在于计算miRNA和disease的相似度矩阵，其中disease使用的是根据现有的有向无环图结构类型的数据进行计算，而miRNA是通过引入gene作为中介来计算，使用的是基因网络数据HumanNet。</p><p>在得到目标式进行优化之前，GRNMF的另一个创新之处在于对输入的数据矩阵Y先利用刚刚得到的相似度来进行更新，想法同NRLMF一样，也是认为没有观测值的miRNA或disease会造成精度的损失。这里同样是根据相似性去取一个k近邻，但与NRLMF不同之处在于不是更新特征向量，而是对输入矩阵逐行（miRNA）、逐列（disease）进行更新分别得到矩阵$Y_m$和$Y_d$。</p><script type="math/tex; mode=display">Y_m(m_q) = \frac{1}{Q_m}\textstyle\sum_{i=1}^Kw_iY(m_i)</script><p>对不存在观测值即$Y_{ij}$=0的数据用$\frac{Y_m + Y_d}{2}$来进行更新。接下来就是构建目标式，同时引入邻域信息。</p><h4 id="GRNMF中的邻域"><a href="#GRNMF中的邻域" class="headerlink" title="GRNMF中的邻域"></a>GRNMF中的邻域</h4><script type="math/tex; mode=display">\lambda_m\sum_{i,p=1}^n\lVert w_i-w_p \rVert^2S_{ip}^{m*}</script><script type="math/tex; mode=display">S_{ij}^{m*}=X_{ij}^mS_{ij}^m</script><script type="math/tex; mode=display">X_{ij} =\begin{cases}1, i\in N(m_j) \And j\in N(M_i) \And m_i,m_j\in C \\\\0, i\notin N(m_j) \And j\notin N(M_i) \And m_i,m_j\notin C \\\\\frac 1 2, otherwise\end{cases}</script><p>GRNMF中利用了两种领域信息，第一种由ClusterOne算法产生，算法的结果有分成多少簇，哪些miRNA在同一簇内；第二种由k近邻产生，衡量是否近邻的相似度由论文提出的方法进行计算，miRNA和target分别用不同的方法计算。</p><h3 id="NRLMF"><a href="#NRLMF" class="headerlink" title="NRLMF"></a>NRLMF</h3><p>论文的目标是建模计算某个药物会对某个目标产生作用的概率值，概率的计算使用的是矩阵分解后得到的特征向量，药品和目标分别对应u和v</p><script type="math/tex; mode=display">p_{ij} = \frac{exp(u_iv_j^T)}{1 + exp(u_iv_j^T)}</script><p>论文的一个创新之处在于，对于已经得到实验验证的样本，模型中会赋予更高的权重。对于样本出现的概率使用的是似然函数进行估计，同时对特征矩阵U和V假设高斯先验分布，均值为0，方差为$\sigma^2​$。可以证明这等同于引入L2正则。优化的目标式就等同于最大化取对数后的似然函数。</p><p>(6)式推导：</p><script type="math/tex; mode=display">\begin{aligned}p(U,V|Y,\sigma^2_d,\sigma^2_t) &\propto  p(Y|U,V)p(U|\sigma^2_d)p(V|\sigma^2_t) \\logp(U,V|Y,\sigma^2_d,\sigma^2_t) &= log(\prod^m_{i=1}\prod^n_{j=1}p_{ij}^{cy_{ij}}(1-p_{ij})^{(1-y_{ij})}\prod_{i=1}^m\frac{1} {\sqrt{2\pi} \sigma_d}e^{-\frac{u_i^2}{2\sigma_d^2}}\prod_{j=1}^n\frac{1} {\sqrt{2\pi} \sigma_t}e^{-\frac{v_j^2}{2\sigma_t^2}} \\&=\sum_{i=1}^m\sum_{j=1}^n[cy_{ij}logp_{ij}+(1-y_{ij})log(1-p_{ij})]+\sum_{i=1}^m[log(\frac{1}{\sqrt{2\pi}\sigma_d})-\frac{u_i^2}{2\sigma_d^2}]\\+\sum_{j=1}^n[log(\frac{1}{\sqrt{2\pi}\sigma_t})&-\frac{v_j^2}{2\sigma_t^2}] \\&=\sum_{i=1}^m\sum_{j=1}^ncy_{ij}[u_iv_j^T-log(1+e^{u_iv_j^T})]+(y_{ij}-1)log(1+e^{u_iv_j^T})-\frac{1}{2\sigma_d^2}\sum_{i=1}^m\lVert u_i \rVert^2 \\-\frac{1}{2\sigma_t^2}\sum_{j=1}^n\lVert v_j \rVert^2&+\sum_{i=1}^mlog(\frac{1}{\sqrt{2\pi}\sigma_d}+\sum_{j=1}^nlog(\frac{1}{\sqrt{2\pi}\sigma_t}) \\&=\sum_{i=1}^m\sum_{j=1}^n[cy_{ij}u_iv_j^T-(cy_{ij}-y_{ij}+1)log(1+e^{u_iv_j^T})]-\frac{1}{2\sigma_d^2}\sum_{i=1}^m\lVert u_i \rVert^2 \\-\frac{1}{2\sigma_t^2}\sum_{j=1}^n\lVert v_j \rVert^2 &+ C\end{aligned}</script><h4 id="NRLMF中的邻域"><a href="#NRLMF中的邻域" class="headerlink" title="NRLMF中的邻域"></a>NRLMF中的邻域</h4><script type="math/tex; mode=display">\frac \alpha 2\sum_{i=1}^m\sum_{\mu=1}^na_{i\mu}\lVert u_i-u_\mu\rVert^2_F</script><script type="math/tex; mode=display">a_{i\mu} = \begin{cases}s_{i\mu}^d, if d_{\mu} \in N(d_i)\\\\0, otherwise\end{cases} \\</script><p>目标式同GRNMF基本一致，同样是通过引入类似$a_{i\mu}$来引入邻域信息，不同在于NRLMF没有利用其他算法产生的簇作为额外的邻域信息，只是利用了数据集中提供的drug和target的相似度，构建k近邻来作为邻域信息。</p><p>然而NRLMF在另外一个地方又使用了邻域的信息，因为在drug-target的数据集中存在某个药物没有任何治疗目标的情况，也就是说某一行全为0，论文中认为这种情况下进行矩阵分解所得到的特征向量会有很大误差，因此通过药物和药物之间的相似度，来利用其它存在观测值的药物的特征向量取一个k近邻来代替，以提高精度。</p><script type="math/tex; mode=display">\tilde{u} = \begin{cases}u_i, &\text{if } d_i \in D^+ \\\\\frac{1}{\textstyle\sum_{\mu \in N^+(d_i)S_{i\mu}^d}}\textstyle\sum_{\mu \in N^+(d_i)}s_{i\mu}^du_{\mu}, &\text{if } d_i \in D^-\end{cases}</script><h4 id="证明高斯先验分布与L2正则的等价性"><a href="#证明高斯先验分布与L2正则的等价性" class="headerlink" title="证明高斯先验分布与L2正则的等价性"></a>证明高斯先验分布与L2正则的等价性</h4><p>首先我们假设现在需要从一些样本点$(x_1,y_1)···(x_N,y_N)$中来估计参数 $\beta$，假设输出$y$与输入$x$之间线性相关，并且受噪声$\epsilon$影响:</p><script type="math/tex; mode=display">y_n=\beta x_n+\epsilon</script><p>这里的$\epsilon$服从均值为0，方差为$\sigma^2$的高斯分布，问题转换为如下的似然估计式子：</p><script type="math/tex; mode=display">\prod_{n=1}^N N(y_n|\beta x_n, \sigma^2)</script><p>接下来我们引入高斯先验分布$N(\beta|0, \frac{1}{\lambda})$，这里的$\lambda​$是一个正数值，把这个先验分布与上面的似然估计相结合，我们得到：</p><script type="math/tex; mode=display">\prod_{n=1}^N N(y_n|\beta x_n, \sigma^2)N(\beta|0, \frac{1}{\lambda})</script><p>对这个式子取对数，并且对常数进行化简，因为它们不影响优化的结果，我们得到：</p><script type="math/tex; mode=display">\sum_{n=1}^N-\frac{1}{\sigma^2}(y_n-\beta x_n)^2-\lambda \beta^2+const</script><p>根据最大似然的原则，我们需要最大化上面这个式子，这时就可以看出来为什么说高斯先验分布与L2正则等价了。</p><p>接下来是引入拉普拉斯约束来对特征向量进行优化，论文的另一个创新之处在于在约束中加入了邻域的信息，如上一节所讲。之后便是对目标函数进行优化得到迭代式以进行特征向量的更新。</p><h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><ul><li>NRLMF(13)式的求导结果</li></ul><h3 id="可优化的地方"><a href="#可优化的地方" class="headerlink" title="可优化的地方"></a>可优化的地方</h3><h4 id="GRNMF-1"><a href="#GRNMF-1" class="headerlink" title="GRNMF"></a>GRNMF</h4><ul><li>利用邻域信息时，GRNMF只是用了一种聚类方法ClusterOne进行聚类，如果用多种聚类方法，多个结果中都被聚在同一类中认为可信度更高会不会更好？</li></ul><h4 id="NRLMF-1"><a href="#NRLMF-1" class="headerlink" title="NRLMF"></a>NRLMF</h4><ul><li>如果像GRNMF一样不仅利用相似度得到邻域信息，还用其它聚类算法的聚类结果作为邻域信息会不会更好？</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;以本文记录自己毕业设计中的学习过程。&lt;br&gt;
    
    </summary>
    
    
      <category term="推荐系统" scheme="http://Bithub00.com/tags/%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title>矩阵求导和迹</title>
    <link href="http://Bithub00.com/2019/10/21/%E7%9F%A9%E9%98%B5%E6%B1%82%E5%AF%BC%E5%92%8C%E8%BF%B9/"/>
    <id>http://Bithub00.com/2019/10/21/矩阵求导和迹/</id>
    <published>2019-10-21T12:22:04.624Z</published>
    <updated>2019-10-21T12:33:10.957Z</updated>
    
    <content type="html"><![CDATA[<p>看到的一篇很好的介绍矩阵求导和迹的<a href="https://www.zybuluo.com/wjcper2008/note/662700" target="_blank" rel="noopener">文章</a>，mark下来</p><a id="more"></a><p><img src="https://s2.ax1x.com/2019/10/21/K112z8.png" alt=""></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;看到的一篇很好的介绍矩阵求导和迹的&lt;a href=&quot;https://www.zybuluo.com/wjcper2008/note/662700&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;文章&lt;/a&gt;，mark下来&lt;/p&gt;
    
    </summary>
    
    
      <category term="数学" scheme="http://Bithub00.com/tags/%E6%95%B0%E5%AD%A6/"/>
    
  </entry>
  
  <entry>
    <title>高斯先验分布与L2正则</title>
    <link href="http://Bithub00.com/2019/10/21/%E9%AB%98%E6%96%AF%E5%85%88%E9%AA%8C%E4%B8%8EL2%E6%AD%A3%E5%88%99/"/>
    <id>http://Bithub00.com/2019/10/21/高斯先验与L2正则/</id>
    <published>2019-10-21T08:48:26.354Z</published>
    <updated>2019-10-21T12:22:33.264Z</updated>
    
    <content type="html"><![CDATA[<p>本篇博客探讨一下为什么说L2正则等同于高斯先验分布<br><a id="more"></a></p><p>首先我们假设现在需要从一些样本点$(x_1,y_1)···(x_N,y_N)$中来估计参数 $\beta$，假设输出$y$与输入$x$之间线性相关，并且受噪声$\epsilon$影响:</p><script type="math/tex; mode=display">y_n=\beta x_n+\epsilon</script><p>这里的$\epsilon$服从均值为0，方差为$\sigma^2$的高斯分布，问题转换为如下的似然估计式子：</p><script type="math/tex; mode=display">\prod_{n=1}^N N(y_n|\beta x_n, \sigma^2)</script><p>接下来我们引入高斯先验分布$N(\beta|0, \frac{1}{\lambda})$，这里的$\lambda$是一个正数值，把这个先验分布与上面的似然估计相结合，我们得到：</p><script type="math/tex; mode=display">\prod_{n=1}^N N(y_n|\beta x_n, \sigma^2)N(\beta|0, \frac{1}{\lambda})</script><p>对这个式子取对数，并且对常数进行化简，因为它们不影响优化的结果，我们得到：</p><script type="math/tex; mode=display">\sum_{n=1}^N-\frac{1}{\sigma^2}(y_n-\beta x_n)^2-\lambda \beta^2+const</script><p>根据最大似然的原则，我们需要最大化上面这个式子，这时就可以看出来为什么说高斯先验分布与L2正则等价了。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;本篇博客探讨一下为什么说L2正则等同于高斯先验分布&lt;br&gt;
    
    </summary>
    
    
      <category term="数学" scheme="http://Bithub00.com/tags/%E6%95%B0%E5%AD%A6/"/>
    
  </entry>
  
  <entry>
    <title>K-means总结</title>
    <link href="http://Bithub00.com/2019/09/23/kmeans%E6%80%BB%E7%BB%93/"/>
    <id>http://Bithub00.com/2019/09/23/kmeans总结/</id>
    <published>2019-09-23T06:15:16.807Z</published>
    <updated>2019-09-23T11:36:29.364Z</updated>
    
    <content type="html"><![CDATA[<h1 id="k-means"><a href="#k-means" class="headerlink" title="k-means"></a>k-means</h1><h2 id="1-kmeans简介"><a href="#1-kmeans简介" class="headerlink" title="1.kmeans简介"></a>1.kmeans简介</h2><h3 id="1-1聚类算法（clustering-Algorithms）介绍"><a href="#1-1聚类算法（clustering-Algorithms）介绍" class="headerlink" title="1.1聚类算法（clustering Algorithms）介绍"></a>1.1聚类算法（clustering Algorithms）介绍</h3><p>聚类是一种无监督学习—对大量未知标注的数据集，按数据的内在相似性将数据集划分为多个类别，使类别内的数据相似度较大而类别间的数据相似度较小。<br><a id="more"></a></p><p>聚类算法可以分为原型聚类（k均值算法（k-means）、学习向量量化、（Learning Vector Quantization -LVQ）、高斯混合聚类（Mixture-of-Gaussian），密度聚类（DBSCAN），层次聚类（AGNES）等。</p><h2 id="2-kmeans原理详解"><a href="#2-kmeans原理详解" class="headerlink" title="2.kmeans原理详解"></a>2.kmeans原理详解</h2><p>k-means是一种常见的聚类算法，也叫k均值或k平均。通过迭代的方式，每次迭代都将数据集中的各个点划分到距离它最近的簇内，这里的距离即数据点到簇中心的距离。</p><p>kmean步骤：</p><ol><li>随机初始化k个簇中心坐标</li><li>计算数据集内所有点到k个簇中心的距离，并将数据点划分近最近的簇</li><li>更新簇中心坐标为当前簇内节点的坐标平均值</li><li>重复2、3步骤直到簇中心坐标不再改变（收敛了）</li></ol><p><strong>优缺点及改进算法</strong></p><p>优点：效率高、适用于大规模数据集</p><div class="table-container"><table><thead><tr><th>缺点</th><th>改进</th><th>描述</th></tr></thead><tbody><tr><td>k值的确定</td><td>ISODATA</td><td>当属于某个簇的样本数过少时把这个簇去除，<br>当属于某个簇的样本数过多、分散程度较大时把这个簇分为两个子簇</td></tr><tr><td>对奇异点敏感</td><td>k-median</td><td>中位数代替平均值作为簇中心</td></tr><tr><td>只能找到球状群</td><td>GMM</td><td>以高斯分布考虑簇内数据点的分布</td></tr><tr><td>分群结果不稳定</td><td>k-means++</td><td>初始的聚类中心之间的相互距离要尽可能的远</td></tr></tbody></table></div><h2 id="算法十问"><a href="#算法十问" class="headerlink" title="算法十问"></a>算法十问</h2><p><strong>k值的选取</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">k-means算法要求事先知道数据集能分为几群，主要有两种方法定义k。</span><br><span class="line"></span><br><span class="line">elbow method通过绘制k和损失函数的关系图，选拐点处的k值。</span><br><span class="line"></span><br><span class="line">经验选取人工据经验先定几个k，多次随机初始化中心选经验上最适合的。</span><br><span class="line"></span><br><span class="line">通常都是以经验选取，因为实际操作中拐点不明显，且elbow method效率不高。</span><br></pre></td></tr></table></figure><p><strong>K-means算法中初始点的选择对最终结果的影响</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">k-means选择的初始点不同获得的最终分类结果也可能不同，随机选择的中心会导致K-means陷入局部最优解。</span><br></pre></td></tr></table></figure><p><strong>为什么在计算k-means之前要将数据点在各维度上归一化</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">因为数据点各维度的量级不同。</span><br><span class="line">举个栗子，最近正好做完基于RFM模型的会员分群，每个会员分别有R（最近一次购买距今的时长）、F（来店消费的频率）和M（购买金额）。如果这是一家奢侈品商店，你会发现M的量级（可能几万元）远大于F（可能平均10次以下），如果不归一化就算k-means，相当于F这个特征完全无效。如果我希望能把常客与其他顾客区别开来，不归一化就做不到。</span><br></pre></td></tr></table></figure><p><strong>k-means不适用哪些数据</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. 数据特征极强相关的数据集，因为会很难收敛（损失函数是非凸函数），一般要用kernal k-means，将数据点映射到更高维度再分群。</span><br><span class="line">2. 数据集可分出来的簇密度不一，或有很多离群值（outliers），这时候考虑使用密度聚类。</span><br></pre></td></tr></table></figure><p><strong>k-means 中常用的距离度量</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">K-means中比较常用的距离度量是欧几里得距离和余弦相似度。</span><br></pre></td></tr></table></figure><p><strong>K-means是否会一直陷入选择质心的循环停不下来（为什么迭代次数后会收敛）？</strong></p><p>从k-means的第三步我们可以看出，每回迭代都会用簇内点的<strong>平均值</strong>去更新簇中心，所以最终簇内的平方误差和（SSE, sum of squared error）一定最小。 平方误差和的公式如下：</p><script type="math/tex; mode=display">L(X) = \sum_{i=1}^{k}{\sum_{j\in C_i}{(x_{ij}-\bar{x_i})^2}}</script><p><strong>聚类和分类区别</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. 产生的结果相同（将数据进行分类）</span><br><span class="line">2. 聚类事先没有给出标签（无监督学习）</span><br></pre></td></tr></table></figure><p><strong>如何对k-means聚类效果进行评估</strong></p><p>回到聚类的定义，我们希望得到簇内数据相似度尽可能地大，而簇间相似度尽可能地小。常见的评估方式：</p><div class="table-container"><table><thead><tr><th style="text-align:left">名称</th><th style="text-align:center">公式</th><th style="text-align:left">含义</th><th style="text-align:left">如何比较</th></tr></thead><tbody><tr><td style="text-align:left">sum of squares within clusters(SSW)</td><td style="text-align:center">$\sum_{i=1}^{K}{ \parallel x_i-c_{l_i} \parallel ^2}$</td><td style="text-align:left">所有簇内差异之和</td><td style="text-align:left">越小越好</td></tr><tr><td style="text-align:left">sum of squares between clusters(SSB)</td><td style="text-align:center">$\sum_{i=1}^{K}{n_i \parallel c_i-\bar{x} \parallel ^2}$</td><td style="text-align:left">簇心与簇内均值差异的加权和</td><td style="text-align:left">越大越好</td></tr><tr><td style="text-align:left">Calinski-Harabasz</td><td style="text-align:center">$\frac{\frac{SSB}{K-1}}{\frac{SSW}{N-K}}$</td><td style="text-align:left">簇间距离和簇内距离之比（除数是惩罚项，因为SSW下降地比较快）</td><td style="text-align:left">越大越好</td></tr><tr><td style="text-align:left">Ball&amp;Hall</td><td style="text-align:center">$\frac{SSW}{K}$</td><td style="text-align:left">几乎同SSW</td><td style="text-align:left">越小越好</td></tr><tr><td style="text-align:left">Dunn’s index</td><td style="text-align:center">$\frac{\min_{i=1}^M{\min_{j=i+1}^M{d(c_i, c_j)}}}{\max_{k=1}^M{diam(c_k)}}$ <br>$where d(c_i, c_j)=$ $\min_{x \in c_i, x’ \in c_j}{\parallel x-x’ \parallel}^2$ <br> $diam(c_k)=$ $\max_{x, x’ \in c_k}{\parallel x-x’ \parallel}^2$</td><td style="text-align:left">本质上也是簇间距离和簇内距离之比</td><td style="text-align:left">越大越好</td></tr></tbody></table></div><p>另一个常见的方法是画图，将不同簇的数据点用不同颜色表示。这么做的好处是最直观，缺点是无法处理高维的数据，它最多能展示三维的数据集。<br>如果维数不多也可以做一定的降维处理（PCA）后再画图，但会损失一定的信息量。 </p><p>聚类算法几乎没有统一的评估指标，可能还需要根据聚类目标想评估方式，如对会员作分群以后，我想检查分得的群体之间是否确实有差异，这时候可以用MANOVA计算，当p值小于0.01说明分群合理。</p><p><strong>K-means中空聚类的处理</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如果所有的点在指派步骤都未分配到某个簇，就会得到空簇。如果这种情况发生，则需要某种策略来选择一个替补质心，否则的话，平方误差将会偏大。一种方法是选择一个距离当前任何质心最远的点。这将消除当前对总平方误差影响最大的点。另一种方法是从具有最大SEE的簇中选择一个替补的质心。这将分裂簇并降低聚类的总SEE。如果有多个空簇，则该过程重复多次。另外编程实现时，要注意空簇可能导致的程序bug。</span><br></pre></td></tr></table></figure><h2 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h2><ol><li>Mann A K, Kaur N. Review paper on clustering techniques[J]. Global Journal of Computer Science and Technology, 2013.</li><li><a href="https://blog.csdn.net/hua111hua/article/details/86556322" target="_blank" rel="noopener">https://blog.csdn.net/hua111hua/article/details/86556322</a></li><li>REZAEI M. Clustering validation[J].</li></ol>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;k-means&quot;&gt;&lt;a href=&quot;#k-means&quot; class=&quot;headerlink&quot; title=&quot;k-means&quot;&gt;&lt;/a&gt;k-means&lt;/h1&gt;&lt;h2 id=&quot;1-kmeans简介&quot;&gt;&lt;a href=&quot;#1-kmeans简介&quot; class=&quot;headerlink&quot; title=&quot;1.kmeans简介&quot;&gt;&lt;/a&gt;1.kmeans简介&lt;/h2&gt;&lt;h3 id=&quot;1-1聚类算法（clustering-Algorithms）介绍&quot;&gt;&lt;a href=&quot;#1-1聚类算法（clustering-Algorithms）介绍&quot; class=&quot;headerlink&quot; title=&quot;1.1聚类算法（clustering Algorithms）介绍&quot;&gt;&lt;/a&gt;1.1聚类算法（clustering Algorithms）介绍&lt;/h3&gt;&lt;p&gt;聚类是一种无监督学习—对大量未知标注的数据集，按数据的内在相似性将数据集划分为多个类别，使类别内的数据相似度较大而类别间的数据相似度较小。&lt;br&gt;
    
    </summary>
    
    
      <category term="机器学习" scheme="http://Bithub00.com/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>协同过滤</title>
    <link href="http://Bithub00.com/2019/09/23/%E5%8D%8F%E5%90%8C%E8%BF%87%E6%BB%A4%E6%80%BB%E7%BB%93/"/>
    <id>http://Bithub00.com/2019/09/23/协同过滤总结/</id>
    <published>2019-09-23T02:52:32.259Z</published>
    <updated>2019-09-23T11:39:50.126Z</updated>
    
    <content type="html"><![CDATA[<h1 id="协同过滤-collaborative-filtering"><a href="#协同过滤-collaborative-filtering" class="headerlink" title="协同过滤(collaborative filtering)"></a>协同过滤(collaborative filtering)</h1><h2 id="直观解释"><a href="#直观解释" class="headerlink" title="直观解释"></a>直观解释</h2><p>协同过滤是推荐算法中最常用的算法之一，它根据user与item的交互，发现item之间的相关性，或者发现user之间的相关性，进行推荐。比如你有位朋友看电影的爱好跟你类似，然后最近新上了《调音师》，他觉得不错，就会推荐给你，这是最简单的基于user的协同过滤算法（user-based collaboratIve filtering），还有一种是基于item的协同过滤算法（item-based collaborative filtering），比如你非常喜欢电影《当幸福来敲门的时候》，那么观影系统可能会推荐一些类似的励志片给你，比如《风雨哈佛路》等。如下主要分析user-based，item-based同理。<br><a id="more"></a></p><h2 id="导图"><a href="#导图" class="headerlink" title="导图"></a>导图</h2><p><img src="https://s2.ax1x.com/2019/09/23/uPnzM4.png" alt="uPnzM4.png"></p><h2 id="核心公式"><a href="#核心公式" class="headerlink" title="核心公式"></a>核心公式</h2><ul><li><p>符号定义<br>$r_{u,i}$：user $u$ 对 item $i$ 的评分<br>$\bar{r}_{u}$：user $u$ 的平均评分<br>$P_{a,b}$：用户$a,b$都有评价的items集合</p></li><li><p>核心公式</p></li></ul><ol><li>item-based CF 邻域方法预测公式</li></ol><script type="math/tex; mode=display">\operatorname{Pred}(u, i)=\overline{r}_{u}+\frac{\sum_{j \in S_{i}}\left(\operatorname{sim}(i, j) \times r_{u, j}\right)}{\sum_{j \in S_{i}} \operatorname{sim}(i, j)}</script><ol><li>偏差优化目标</li></ol><script type="math/tex; mode=display">\min _{b} \sum_{(u, i) \in K}\left(r_{(u, i)}-\mu-b_{u}-b_{i}\right)^{2}</script><p>其中$(u，i) \in K$表示所有的评分，$\mu$总评分均值，$b_u$为user $u$的偏差，$b_i$为item $i$ 的偏差。</p><ol><li><ul><li>加入正则项后的Funk SVD 优化公式</li></ul></li></ol><script type="math/tex; mode=display">\min _{u v} \sum_{(u, i) \in k n o w n}\left(r_{u,i}-u_{u} v_{i}\right)+\lambda\left(|u|^{2}+|v|^{2}\right)</script><p>其中$u_u$为user $u$的偏好，即为user特征矩阵$U$的第$u$行，$v_i$为item $i$的特征，即为特征矩阵$V$的第$i$列</p><h2 id="注意要点"><a href="#注意要点" class="headerlink" title="注意要点"></a>注意要点</h2><ul><li><p>相似度与距离之间的关系<br>  距离越大，相似度越小；距离越小，相似度越高。即在求解最大相似度的时候可以转为求解最小距离。</p></li><li><p>在协同过滤中，常用的相似度函数有哪些，简要说明</p><ul><li>杰卡德相似度（Jaccard similarity）<br>公式：</li></ul><script type="math/tex; mode=display">sim_{jaccard}(u_{1}, u_{2})=\frac{ \text {items} \text { bought by } u_{1}\  and\  u_{2}}{ \text { items  bought by  } u_{1}\  or\  u_{2}}</script><p>适用于二元情况，即定性情况，比如买或者没买，喜欢或者不喜欢，在数据稀疏的情况，可以转为二元应用。</p><ul><li><p>余弦相似度<br>公式：</p><script type="math/tex; mode=display">\operatorname{sim}(u_{1}, u_{2})=\frac{r_{u_{1}} \cdot r_{u_{2}}}{\left|r_{u_{1}}\right|_{2}|r_{u_{2}}|_{2}}=\frac{\sum_{i \in P_{u_1,u_2}} r_{u_{1}, i} r_{u_{2}, i}}{\sqrt{\sum_{i \in P_{u_1}} r_{u_{1},i}^{2}} \sqrt{\sum_{i \in P_{u_2}}r_{u_{2},i}^{2}}}</script><p>考虑不同用户的评价范围不一样，比如乐天派一般评分范围一般会高于悲观的人，会将评分进行去中心化再进行计算，即</p></li><li>修正余弦相似度，公式变为</li></ul><script type="math/tex; mode=display">\operatorname{sim}(u_{1}, u_{2})=\frac{r_{u_{1}} \cdot r_{u_{2}}}{\left|r_{u_{1}}\right|_{2}|r_{u_{2}}|_{2}}=\frac{\sum_{i \in P_{u_1,u_2}} (r_{u_{1}, i}-{\bar{r}_{u_{1}}}) (r_{u_{2}, i}-\bar{r}_{u_2})}{\sqrt{\sum_{i \in P_{u_1}} (r_{u_{1},i}-\bar{r}_{u_{1}})^{2}} \sqrt{\sum_{i \in P_{u_2}}(r_{u_{2},i}-\bar{r}_{u_{2}})^{2}}}</script><p>适用于定量情况，比如评分场景，要求数据具有一定的稠密度。注意如果计算一个评价很少电影的用户与一个评价很多电影的用户会导致相似度为0.</p><ul><li><p>皮尔森相关系数<br>公式：</p><script type="math/tex; mode=display">\operatorname{sim}(u_1, u_2)=\frac{\sum_{i \in P_{u_1.u_2}}\left(r_{u_1, i}-\overline{r}_{u_1}\right)\left(r_{u_2, i}-\overline{r}_{u_2}\right)}{\sqrt{\sum_{i \in P_{u_1.u_2}}\left(r_{u_1, i}-\overline{r}_{u_1}\right)^{2}} \sqrt{\sum_{i \in P_{u_1.u_2}}\left(r_{u_2, i}-\overline{r}_{u_2}\right)^{2}}}</script><p>皮尔森系数跟修正的余弦相似度几乎一致，两者的区别在于分母上，皮尔逊系数的分母采用的评分集是两个用户的共同评分集（就是两个用户都对这个物品有评价），而修正的余弦系数则采用两个用户各自的评分集。</p></li><li><p>$L_{p}-norms$<br>公式：</p><script type="math/tex; mode=display">sim(u_1,u_2) =\frac{1}{ \sqrt[p]{| r_{u_1}-r_{u_2} |^p}+1}</script><p>$p$取不同的值对应不同的距离公式，空间距离公式存在的不足这边也存在。对数值比较敏感。</p></li></ul></li><li><p>有了相似度测量后，那么基于邻域的推荐思路是怎样的呢？<br>过滤掉被评论较少的items以及较少评价的users，然后计算完users之间的相似度后，寻找跟目标user偏好既有大量相同的items，又存在不同的items的近邻几个users(可采用K-top、阈值法、聚类等方式)，然后进行推荐。步骤如下：<br>(1) 选择：选出最相似几个用户，将这些用户所喜欢的物品提取出来并过滤掉目标用户已经喜欢的物品<br>(2) 评估：对余下的物品进行评分与相似度加权<br>(3) 排序：根据加权之后的值进行排序<br>(4) 推荐：由排序结果对目标用户进行推荐</p></li><li><p>协同过滤算法具有特征学习的特点，试解释原理以及如何学习</p></li></ul><ol><li>特征学习：把users做为行，items作为列，即得评分矩阵$R_{m,n}=[r_{i,j}]$，通过矩阵分解的方式进行特征学习，即将评分矩阵分解为$R=U_{m,d}V_{d,n}$，其中$U_{m,d}$为用户特征矩阵，$V_{d,n}$表示items特征矩阵，其中$d$表示对items进行$d$个主题划分。举个简单例子，比如看电影的评分矩阵划分后，$U$中每一列表示电影的一种主题成分，比如搞笑、动作等，$V$中每一行表示一个用户的偏好，比如喜欢搞笑的程度，喜欢动作的程度，值越大说明越喜欢。这样，相当于，把电影进行了主题划分，把人物偏好也进行主题划分，主题是评分矩阵潜在特征。</li><li>学习方式:SVD<br>分解式为</li></ol><script type="math/tex; mode=display">R_{m,n}=U_{m,m}\Sigma_{m,n}V_{n,n}^T</script><p>  其中$U$为user特征矩阵，$\Sigma$为权重矩阵体现对应特征提供的信息量，$V$为item特征矩阵。同时可通过SVD进行降维处理，如下  </p><p><img src="https://s2.ax1x.com/2019/09/23/uPuki6.png" alt="uPuki6.png"><br>奇异值分解的方式，便于处理要目标user（直接添加到用户特征矩阵的尾部即可），然而要求评分矩阵元素不能为空，因此需要事先进行填充处理，同时由于user和item的数量都比较多，矩阵分解的方式计算量大，且矩阵为静态的需要随时更新，因此实际中比较少用。   </p><ol><li>Funk SVD， Funk SVD 是去掉SVD的$\Sigma$成分，优化如下目标函数，可通过梯度下降法，得到的$U,V$矩阵</li></ol><script type="math/tex; mode=display">J=\min _{u v} \sum_{(u, i) \in k n o w n}\left(r_{u,i}-u_{u} v_{i}\right)+\lambda\left(|u|^{2}+|v|^{2}\right)</script><p>Funk SVD 只要利用全部有评价的信息，不需要就空置进行处理，同时可以采用梯度下降法，优化较为方便，较为常用。</p><p>有了user特征信息和item特征信息，就可用$u_{u} v_{i}$对目标用户进行评分预测，如果目标用户包含在所计算的特征矩阵里面的话。针对于新user、新item，协同过滤失效。</p><ul><li><p>如何简单计算user偏差以及item偏差？</p><script type="math/tex; mode=display">b_u=\frac{1}{|I_u|}\sum_{i \in I_u}(r_{u,i}-\mu) \\b_i=\frac{1}{|U_i|}\sum_{u \in U_i}(r_{u,i}-b_u-\mu)</script></li><li><p>如何选择协同过滤算法是基于user还是基于item<br>一般，谁的量多就不选谁。然而基于user的会给推荐目标带来惊喜，选择的范围更为宽阔，而不是基于推荐目标当前的相似item。因此如果要给推荐目标意想不到的推荐，就选择基于user的方式。可以两者结合。</p></li></ul><ul><li>协同过滤的优缺点</li><li><p>缺点：<br> (1)稀疏性—— 这是协同过滤中最大的问题，大部分数据不足只能推荐比较流行的items，因为很多人只有对少量items进行评价，而且一般items的量非常多，很难找到近邻。导致大量的user木有数据可推荐（一般推荐比较流行的items），大量的item不会被推荐<br> (2)孤独用户——孤独user具有非一般的品味，难以找到近邻，所以推荐不准确<br> (3)冷启动——只有大量的评分之后，才能协同出较多信息，所以前期数据比较少，推荐相对不准确；而如果没有人进行评分，将无法被推荐<br> (4)相似性——协同过滤是与内容无关的推荐，只根据用户行为，所以倾向于推荐较为流行的items。</p></li><li><p>优点：  </p><pre><code>(1)不需要领域知识，存在users和items的互动，便能进行推荐   (2)简单易于理解  (3)相似度计算可预计算，预测效率高</code></pre></li><li><p>协同过滤与关联规则的异同<br>关联规则是不考虑tems或者使用它们的users情况下分析内容之间的关系，而协同过滤是不考虑内容直接分析items之间的关系或者users之间的关系。两者殊途同归均能用于推荐系统，但是计算方式不同。</p></li><li><p>实践中的一些注意点<br>(1) 过滤掉被评价较少的items<br>(2) 过滤掉评价较少的users<br>(3) 可用聚类方式缩小搜索空间，但是面临找不到相同偏好的用户（如果用户在分界点，被误分的情况），这种方式通过缩小搜索空间的方式优化协同过滤算法<br>(4) 使用的时候，可以考虑时间范围，偏好随着时间的改变会改变</p></li></ul><h2 id="面试真题"><a href="#面试真题" class="headerlink" title="面试真题"></a>面试真题</h2><p>使用协同过滤算法之前，数据应该如何进行预处理？<br>协同过滤的方式有哪些？<br>如何通过相似度计算设计协同过滤推荐系统？<br>请谈谈你对协同过滤中特征学习的理解？<br>如何将协同过滤用于推荐系统？<br>FUNK SVD相对于SVD有哪些优势？<br>如何求解FUNK SVD？<br>请描述下协同过滤的优缺点？  </p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;协同过滤-collaborative-filtering&quot;&gt;&lt;a href=&quot;#协同过滤-collaborative-filtering&quot; class=&quot;headerlink&quot; title=&quot;协同过滤(collaborative filtering)&quot;&gt;&lt;/a&gt;协同过滤(collaborative filtering)&lt;/h1&gt;&lt;h2 id=&quot;直观解释&quot;&gt;&lt;a href=&quot;#直观解释&quot; class=&quot;headerlink&quot; title=&quot;直观解释&quot;&gt;&lt;/a&gt;直观解释&lt;/h2&gt;&lt;p&gt;协同过滤是推荐算法中最常用的算法之一，它根据user与item的交互，发现item之间的相关性，或者发现user之间的相关性，进行推荐。比如你有位朋友看电影的爱好跟你类似，然后最近新上了《调音师》，他觉得不错，就会推荐给你，这是最简单的基于user的协同过滤算法（user-based collaboratIve filtering），还有一种是基于item的协同过滤算法（item-based collaborative filtering），比如你非常喜欢电影《当幸福来敲门的时候》，那么观影系统可能会推荐一些类似的励志片给你，比如《风雨哈佛路》等。如下主要分析user-based，item-based同理。&lt;br&gt;
    
    </summary>
    
    
      <category term="机器学习" scheme="http://Bithub00.com/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="协同过滤" scheme="http://Bithub00.com/tags/%E5%8D%8F%E5%90%8C%E8%BF%87%E6%BB%A4/"/>
    
      <category term="推荐系统" scheme="http://Bithub00.com/tags/%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title>算法基本思想</title>
    <link href="http://Bithub00.com/2019/09/21/%E7%AE%97%E6%B3%95%E5%9F%BA%E6%9C%AC%E6%80%9D%E6%83%B3/"/>
    <id>http://Bithub00.com/2019/09/21/算法基本思想/</id>
    <published>2019-09-21T02:02:42.483Z</published>
    <updated>2019-09-21T02:06:07.789Z</updated>
    
    <content type="html"><![CDATA[<p>算法设计常见的5种基本技巧，有贪婪算法、分治算法、动态规划、随机化算法和回溯算法。<br><a id="more"></a></p><h3 id="贪婪算法"><a href="#贪婪算法" class="headerlink" title="贪婪算法"></a>贪婪算法</h3><p>虽然每次的选择都是局部最优，当在算法结束的时候，其期望是全局最优才是正确的。不过有时，在不同条件与要求下时，最优解的答案可能不止有一个或不一样，而贪婪算法也可以得出一个近似的答案。</p><h3 id="分治算法"><a href="#分治算法" class="headerlink" title="分治算法"></a>分治算法</h3><p>分治算法不是简单的递归，而是将大的问题递归解决较小的问题，然后从子问题的解构建原问题的解。比如，快速排序和归并排序算分治算法，而图的递归深度搜索和二叉树的递归遍历则不是分治算法的运用。</p><h3 id="动态规划"><a href="#动态规划" class="headerlink" title="动态规划"></a>动态规划</h3><p>动态规划与分治算法的区别是，两种算法同样是将较大的问题分解成较小问题，而动态规划对这些较小的问题并不是对原问题明晰的分割，其中一部分是被重复求解的，因此动态规划将较小问题的解记录下来，使得在处理较大问题的时候，可以不用重复去处理较小的问题，而是直接利用所记录的较小问题的答案来求解。</p><h3 id="随机化算法"><a href="#随机化算法" class="headerlink" title="随机化算法"></a>随机化算法</h3><p>随机化算法的一个应用是在快速排序中对枢纽元素的选择，使得算法的运行时间不止依赖于特定的输入，还而且还依赖于所出现的随机数。虽然一个随机化算法的最坏情形运行时间常常与非随机化算法的最坏情形运行时间相同，但两者还是有区别的，好的随机化算法没有坏的输入，而只有坏的随机数。</p><h3 id="回溯算法"><a href="#回溯算法" class="headerlink" title="回溯算法"></a>回溯算法</h3><p>回溯算法相当于穷举搜索的巧妙实现，对比蛮力的穷举搜索，回溯算法可以对一些不符合要求的或者是重复的情况进行裁剪，不再对其进行搜索，以减少搜索的工作量提高效率。比如，在图运用回溯算法的深度优先搜索遍历中，会对已搜索遍历过的顶点进行标记，避免下次的回溯搜索中对再次出现的该顶点进行重复遍历。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;算法设计常见的5种基本技巧，有贪婪算法、分治算法、动态规划、随机化算法和回溯算法。&lt;br&gt;
    
    </summary>
    
    
      <category term="算法" scheme="http://Bithub00.com/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>一亩三分地题库+新手上路答案</title>
    <link href="http://Bithub00.com/2019/09/11/%E4%B8%80%E4%BA%A9%E4%B8%89%E5%88%86%E5%9C%B0/"/>
    <id>http://Bithub00.com/2019/09/11/一亩三分地/</id>
    <published>2019-09-11T11:13:30.290Z</published>
    <updated>2019-11-15T07:10:12.449Z</updated>
    
    <content type="html"><![CDATA[<p>1.一亩三分地 新手上路 网站规则 - 满分5大米(适用于所有用户)<br>2.一亩三分地 考试中心 满分95大米(只适用于2019年之后注册的新人)<br>3.一亩三分地 每日答题 题库</p><a id="more"></a><h3 id="网站规则-满分5大米"><a href="#网站规则-满分5大米" class="headerlink" title="网站规则 - 满分5大米"></a>网站规则 - 满分5大米</h3><ol><li><p>一亩三分地发帖可以选择内容用hide进行隐藏。隐藏方式：[hide=200]隐藏的内容[/hide] 下面哪个选项hi‍‌‌‌‌‌‌‌‍‍‍‌‌‌‍‌‌‌‌‌de正确。 (1.0 分)<br><strong>A. 两人第一次华山论剑，争的是荣名与[hide=188]《九阴真经》[/hide]；</strong><br>B. 第二次在桃花岛过招，是为了郭靖与[hide=188]欧阳克[\hide]争婚。<br>C. 第三次海上相斗，生死只隔一线，但(hide=188)洪七公(\ hide)手下尚自容让；<br>D. 现下第四次恶战，[hide188]才是各出全力[/hide]，再无半点留情。<br>E. 洪七公伸指疾点欧阳锋背心[hide=188]“凤尾穴”(/hide)，要迫他松手。  </p></li><li><p>为什么一亩三分地除了租房广告找室友、学有飞友工友、本地版聚等少数版块之外，绝大多数板块都不允许拉群？ (1.0 分)<br>A. 地里信息是公开的，全部回复每个人都可以看到。而群里的信息，作为新入群的同学是无法看到历史消息的，并且无法查找<br>B. 公开自己的微信，将来可能会被人人肉或者骚扰<br>C. 地里的信息永远存在，有些群很可能不活跃甚至不存在了，里面的讨论也就消失了<br><strong>D. 以上全都理解并接受</strong></p></li><li><p>在下面哪些板块里留微信号等各种联系方式，事后可以要求版主删除？ (1.0 分)<br>A. 如果发在求职类板块里，可以删除，我的隐私你得尊重啊<br>B. 如果发在留学类板块里，可以删除，毕竟我年少不懂事嘛<br>C. 如果发在非正事、无聊帖子里，可以删除，毕竟没啥营养啊<br><strong>D. 绝大多数板块禁止留微信、拉群，如果你非要发出来，那就永远不删。另外，私下联系建议发站内信。</strong></p></li><li><p>为什么我们不鼓励用谐音或者各种拐弯抹角的说法来指代公司或者学校名称？比如：“湾区某元音开头和结尾公司” (1.0 分)<br>A. 也许有什么顾虑吧<br>B. 这样不好玩<br><strong>C. 写成这样子，别人看不懂，也搜不到。如果别人也这样写，你也看不懂、搜不到。信息没法分享和交流。</strong><br>D. 不知道</p></li><li><p>下面哪个说法是错误的？ (1.0 分)<br>A. 连续超过14天不登录，每天扣一个大米，直到大米数=100<br><strong>B. 抖包袱版看帖，不会消耗积分</strong><br>C. 可以消耗积分更改用户名（网站右上角设置-&gt;个人资料-&gt;更改用户名）<br>D. 看到干货帖子和回复，给作者加分，不会消耗我的积分<br>E. 每日签到、每日答题都可以拿到积分奖励<br>F. 手机app里也可以每日签到，好方便！<br>G. 给地里官方app五星好评，可以拿加分奖励: www.1point3acres.com/bbs/thread-446981-1-1.html<br>H. 在手工加分的帖子里，多次回复骗取积分，会被系统检测到，积分扣除+额外扣分！<br>I. 网站上方导航栏 -&gt; 道具中心，可以兑换匿名卡，把自己的帖子匿名。</p></li></ol><h3 id="网站规则-满分95大米"><a href="#网站规则-满分95大米" class="headerlink" title="网站规则 - 满分95大米"></a>网站规则 - 满分95大米</h3><ol><li><p>一亩三分地里有哪些方面的信息？ (5.0 分)<br><strong>A. 美国大学各专业录取信息<br>B. 美国和中国公司面试题目<br>C. 买房买车租‍‌‌‌‌‌‌‌‍‍‍‌‌‌‍‌‌‌‌‌房等生活信息<br>D. 移民签证H1B等信息<br>E. 公开课、刷题、做项目<br>F. 八卦我司版：美国公司评价（各公司员工发帖）<br>G. 抖包袱版：各公司工资offer的详细数目<br>H. 缘来如此版可以发帖征友<br>I. 职场达人：中美职场和职业发展话题<br>J. TOEFL/GRE考试信息</strong>  </p></li><li><p>一亩三分地有积分限制，请戳这里阅读《攒积分和消耗积分完全指南》然后回答：下面哪些说法正确？ (10.0 分)<br><strong>A. 认真做考卷，很容易拿到满分<br>B. 每日签到（网站右上方），奖励1颗大米<br>C. 每日答题（网站右上方），答对了奖励1颗大米，答错了消耗1颗<br>D. 设置头像，奖励一颗大米（只能获得一次）<br>E. 验证邮箱，奖励一颗大米（只能获得一次）<br>F. 管理员每日选择2-3个干货帖子全站置顶，大家会奖励给你大米<br>G. 分享面经、录取信息、工资数目等干货，或者积极参与讨论<br>H. 积极参与论坛各种活动，比如给地里官方app五星好评<br>I. 《攒积分和消耗积分完全指南》里有更多获取积分方法的说明<br>J. 积分变更记录在网站右上角设置-&gt;积分里能找到（2019年3月2日之前的部分记录不显示，之后的全显示）</strong>  </p></li><li><p>一亩三分地发帖可以选择内容进行隐藏。举个例子：<br>黄蓉哭了一会，抽抽噎噎的道：“我听爹爹说过，洪老前辈有一套武功，当真是天下无双、古今独步，甚至全真教的王重阳也忌惮三分，叫做……叫做……咦，我怎么想不起来啦，明明刚才我还记得的，我想求他教你，这套拳法叫做……叫做……”其实她哪里知道，全是信口胡吹。洪七公在树顶上听她苦苦思索，实在忍不住了，喝道：“叫做‘[hide=200]降龙十八掌[/hide]’！”说着一跃而下。上述段落里，“降龙十八掌”五个字被隐藏，只有积分&gt;=200分的用户才能看到。<br>隐藏方式：[hide=200]隐藏的内容[/hide] 注意不要添加多余的空格！第二个hide前面的斜线别弄反方向！下面隐藏的内容哪个被188分正确隐藏？真相只有一个！ (10.0 分)<br>A. 柯南的名字是[hide=188]工藤新一[\hide]<br>B. 柯南的名字是[hide]工藤新一[/hide=188]<br><strong>C. 柯南的名字是[hide=188]工藤新一[/hide]</strong><br>D. 柯南的名字是[hide=188]工藤新一[\ hide]<br>E. 柯南的名字是[hide=188]工藤新一{\hide}<br>F. 柯南的名字是(hide=188)工藤新一(\hide)  </p></li><li><p>在论坛发slack群、qq群、微信群等任何站外讨论方式，会如何？ (10.0 分)<br>A. 如果发在本地版聚、租房找室友、飞友学友工友版块，是允许的<br>B. 如果发在求职、面经、申请类板块里，都会被删帖扣分<br>C. 举报这些群，可能得到加分奖励<br><strong>D. 以上都正确</strong>  </p></li><li><p>下面哪种情况，管理员会按照你的要求，进行删帖？ (10.0 分)<br>A. 问了问题，得到了答案，然后我过河拆桥，删帖让其他人看不到<br>B. 尽管地里不允许，但是我到处留微信号，然后说隐私暴露要求删帖<br>C. 发帖赚到了积分，看到了有权限设置的内容，然后反悔<br><strong>D. 这些情况全都不删帖！</strong>  </p></li><li><p>你的一亩三分地账号很宝贵，在别的网站，考完托福你就离开了，申请完了你也不会再去。但是在一亩三分地，拿到录取以后，你找实习要回来，找全职工作要回来，申请OPT要回来，等H1b签证和绿卡要回来，甚至工作几年后要跳槽你也要回来看求职信息 - 随着地里的壮大，你会经常回来。<br>下面哪些方法可以保护你的账号？ (10.0 分)<br><strong>A. 给账号设置复杂密码，并且只在一亩三分地使用该密码。<br>B. 把地里的邮件放入白名单以免被判定为垃圾邮件而导致收不到密码重设等重要信息（地里从来不发广告）。<br>C. 绑定微信。如果账号有异常，会被系统要求扫码登录，而且扫码登录比输入密码方便。<br>D. 管理好用来注册账号的电子邮箱，如果连邮箱都没了，那就惨了。。。</strong><br>E. 别那么多有的没的，我爱咋地就咋地。  </p></li><li><p>下面哪些发帖行为，值得鼓励和倡导？ (10.0 分)<br>A. 随便发就是了，反正有版主和管理员给调整<br><strong>B. 读一下各个版块的置顶信息，了解网站规则。<br>C. 发帖之前，先浏览有哪些版块，帖子要发在对应的板块里。</strong><br>D. 帖子设置回复可见，大家必须回复才能看到，然后一堆人发“顶”<br><strong>E. 帖子标题最好能用一句话概括主要内容，方便大家阅读<br>F. 地里很多帖子有分类设置，方便大家查找，发帖确保分类信息设置合理</strong><br>G. 很多帖子有权限设置，我积分不够，到处发“看不到啊”、“积分不够啊”，水掉论坛  </p></li><li><p>新人积分不够。下面哪些做法正确？ (5.0 分)<br><strong>A. 分享干货、签到答题、参加活动等，争取早日攒够积分。</strong><br>B. 到处发帖抱怨积分不够、看不到，没准会有帮助呢。<br>C. 想各种办法绕开积分限制，比如要求楼主私下把信息发给我<br>D. 注册个小号，相互加分（嘿嘿，地里有后台系统检测哦）  </p></li><li><p>下面哪些方式，可以获得积分奖励？ (5.0 分)<br><strong>A. 分享干货，无论是录取信息、面经题目、工资数据，还是各种生活经验。</strong><br>B. 在帖子里给别人加分，告诉对方给我加回来。<br><strong>C. 认真参与网站里的讨论，贡献我的看法和信息</strong><br>D. 没有分享干货，但是可以缠着别人要积分<br><strong>E. 干货帖子被全站置顶或者公众号推出，至少拿100分，很多帖子拿到200+</strong><br>F. 我有信息可以分享，但是大家来给我加分吧，谁加了分我私下里发给你  </p></li><li><p>一亩三分地里可以购买VIP通行证，位于网站上方导航栏 -&gt; VIP。关于VIP，下面哪些说法正确？ (10.0 分)<br><strong>A. VIP可以瞬间解锁地里有权限的帖子，获得阅读权限<br>B. VIP下载附件不扣积分，不受权限限制<br>C. VIP用户可以自由搜索，不扣积分</strong><br>D. VIP是“免责金牌”，在地里不受规则约束，可以为所欲为<br><strong>E. VIP获得的只是阅读帖子权限，网站有的功能仍需积分（可以攒大米或者购买蓝莓）<br>F. VIP收入用来支付一亩三分地运营和发展的必要花费；我的打赏能支持一亩三分地做的更好</strong>  </p></li><li><p>下面哪种行为，在地里会被扣光积分，甚至封号？ (10.0 分)<br><strong>A. 戾气十足、人身攻击<br>B. 种种手段恶意刷分<br>C. 软硬广告或导流吸粉<br>D. 造谣或者发钓鱼贴<br>E. 多人共享账号<br>F. 违反版规，胡乱跨版发帖，到处留邮箱或微信号<br>G. 购买了VIP通行证，作为付费用户，违反网站规则。</strong>  </p></li></ol><h3 id="每日答题题库"><a href="#每日答题题库" class="headerlink" title="每日答题题库"></a>每日答题题库</h3><p>【题目】 公司之间级别对应，如下哪个是错误的？<br>Google T5 = Facebook E5/6<br>Uber Sr II = Lyft T6<br>Amazon L7 = Facebook E6<br>✓ Facebook L6 = Facebook E6</p><p>【题目】一亩三分地发帖可以选择内容用 hide 进行隐藏。隐藏方式：[hide=200]隐藏的内容[/hide] 下面哪个选项 hide 正确。<br>✓ A. 两人第一次华山论剑，争的是荣名与[hide=188]《九阴真经》[/hide]；<br>B. 第二次在桃花岛过招，是为了郭靖与[hide=188]欧阳克[\hide]争婚。<br>C. 第三次海上相斗，生死只隔一线，但(hide=188)洪七公(\ hide)手下尚自容让；<br>D. 现下第四次恶战，[hide188]才是各出全力[/hide]，再无半点留情。<br>E. 洪七公伸指疾点欧阳锋背心[hide=188]“凤尾穴”(/hide)，要迫他松手。</p><p>【题目】为什么一亩三分地除了租房广告找室友、学有飞友工友、本地版聚等少数版块之外，绝大多数板块都不允许拉群？<br>A. 地里信息是公开的，全部回复每个人都可以看到。而群里的信息，作为新入群的同学是无法看到历史消息的，并且无法查找<br>B. 公开自己的微信，将来可能会被人人肉或者骚扰<br>C. 地里的信息永远存在，有些群很可能不活跃甚至不存在了，里面的讨论也就消失了<br>✓ D. 以上全都理解并接受</p><p>【题目】在下面哪些板块里留微信号等各种联系方式，事后可以要求版主删除？<br>A. 如果发在求职类板块里，可以删除，我的隐私你得尊重啊<br>B. 如果发在留学类板块里，可以删除，毕竟我年少不懂事嘛<br>C. 如果发在非正事、无聊帖子里，可以删除，毕竟没啥营养啊<br>✓ D. 绝大多数板块禁止留微信、拉群，如果你非要发出来，那就永远不删。另外，私下联系建议发站内信。</p><p>【题目】为什么我们不鼓励用谐音或者各种拐弯抹角的说法来指代公司或者学校名称？ 比如：“湾区某元音开头和结尾公司”，你能猜到是哪家吗？<br>A. 也许有什么顾虑吧<br>B. 这样不好玩<br>✓ C. 写成这样子，别人看不懂，也搜不到。如果别人也这样写，你也看不懂、搜不到。信息没法分享和交流。<br>D. 不知道</p><p>【题目】下面哪个说法是错误的？<br>A. 连续超过 14 天不登录，每天扣一个大米，直到大米数=100<br>✓ B. 抖包袱版看帖，不会消耗积分<br>C. 可以消耗积分更改用户名（网站右上角设置-&gt;个人资料-&gt;更改用户名）<br>D. 看到干货帖子和回复，给作者加分，不会消耗我的积分 E. 每日签到、每日答题都可以拿到积分奖励<br>F. 手机 app 里也可以每日签到，好方便！<br>G. 给地里官方 app 五星好评，可以拿加分奖励: www.1point3acres.com/bbs/thread-446981-1-1.html H. 在手工加分的帖子里，多次回复骗取积分，会被系统检测到，积分扣除+额外扣分！<br>I. 网站上方导航栏 -&gt; 道具中心，可以兑换匿名卡，把自己的帖子匿名。</p><p>【题目】 下面哪个情况，不会消耗你的积分？<br>超过 14 天不登录<br>使用论坛搜索<br>下载附件<br>✓ 看到干货帖子和精华回复，给作者加分！  </p><p>【题目】 下面哪个州，没有 income tax?<br>✓ Nevada<br>New York<br>Nebraska<br>Massachusetts  </p><p>【题目】 下面哪个州，有 state income tax<br>Tennessee<br>Alaska<br>Washington<br>✓ Mississippi</p><p>【题目】 求内推如何作死？<br>一下子叫好多人给内推同一家公司<br>别人回复慢了就抱怨<br>简历上撒谎<br>✓ 这些都会作死  </p><p>【题目】 下面哪种方法，可以妥妥拿到积分？<br>上传头像<br>每日签到（需绑定微信）<br>分享干货<br>✓ 这些全都可以  </p><p>【题目】 回答别人的私信提问还需要消耗我 5 大米怎么办？<br>✓ 直接在版面回答，这样大家都能看见  </p><p>【题目】 下面哪种行为，在地里会被扣光积分，甚至封号？<br>✓ 这些全都会</p><p>【题目】一亩三分地发帖可以用 hide 语法隐藏内容。下面哪个写法正确？<br>✓ 柯南的名字是[hide=200]工藤新一[/hide]<br>柯南的名字是[hide=200]工藤新一[\hide]<br>柯南的名字是[hide=200]工藤新一[hide]<br>柯南的名字是[hide=200]工藤新一[/hide=200]  </p><p>【题目】 在 Linkedin 上求内推如何作死<br>看也不看对方情况，直接扔简历要求内推，国人必须帮助国人啊<br>写模板内容要求内推，不论男女都叫学姐<br>也不自我介绍，就要求对方介绍公司情况<br>✓ 这些都会作死</p><p>【题目】一亩三分地鼓励如何发面经？<br>遇到有人留邮箱，私下发面经的，点举报<br>积分隐藏[hide==188]内容[/hide]<br>✓ 以上都正确</p><p>【题目】 下面哪个大学在华盛顿州？<br>Washington University<br>✓ University of Washington<br>George Washington University<br>Washington College</p><p>【题目】下面哪个大学不在 Virginia/DC 附近<br>✓ Washington and Jefferson College<br>Trinity Washington University<br>George Washington University<br>Washington and Lee University</p><p>【题目】 下面哪个州，对公司友好，所以吸引了美国很多公司注册？<br>加利福尼亚<br>✓ 特拉华<br>佛罗里达<br>纽约</p><p>【题目】 下面哪个州，有 state income tax<br>South Dakota<br>Wyoming<br>✓ North Dakota<br>Tennessee</p><p>【题目】 下面哪个州，没有 state income tax<br>New York<br>New Jersey<br>✓ New Hampshire<br>New Mexico</p><p>【题目】 下面哪个州，没有 state income tax?<br>✓ Florida<br>Georgia<br>Hawaii<br>Idahoda  </p><p>【题目】 下面哪个州，没有 state income tax?<br>Alabama<br>✓ Alaska<br>Arizona<br>Arkansas  </p><p>【题目】下面哪个州冬天最暖和？<br>Minnesota<br>✓ Oklahoma<br>Michigan<br>Massachusetts</p><p>【题目】下面哪个大学实际上不存在？<br>University of California, San Francisco<br>University of Massachusetts, Dartmouth<br>✓ University of Michigan, Twin City<br>University of Nevada, Las Vegas</p><p>【题目】下面哪所大学所在城市不是波士顿？<br>✓ Boston College<br>Berklee College Of Music<br>Northeastern University<br>Boston University</p><p>【题目】下面哪个说法错误？<br>伊利诺伊大学在芝加哥有校区<br>✓ 芝加哥是美国著名的雨城<br>美国西北大学在芝加哥有校区<br>芝加哥 skydeck 上可以看到四个州</p><p>【题目】 Which company is the largest single✓site employer in the US?<br>Walmart<br>Ford<br>Costco<br>✓ Disney World</p><p>【题目】 下面哪种方法，可以妥妥拿到积分？<br>分享干货<br>上传头像<br>每日签到（需绑定微信）<br>✓ 这些全都可以</p><p>【题目】 下面哪家公司的总部不在西雅图<br>亚马逊<br>阿拉斯加航空公司<br>星巴克<br>✓ 波音</p><p>【题目】 给论坛 ios 或者安卓手机应用留评价如何获取 50 大米？<br>留 5 星评价<br>截屏作为证据<br>上传到第一个大区的”官方开发版“<br>✓ 以上步骤都需要</p><p>【题目】 地里发帖可以隐藏内容。假如要设置 200 积分以上才可以看到，下面哪个语法正确？<br>[hide]想要隐藏的内容[/hide]<br>[hide=200 ]想要隐藏的内容[/hide]<br>✓ [hide=200]想要隐藏的内容[/hide]<br>[hide=200]想要隐藏的内容[hide]  </p><p>【题目】 地里面经数目最多的是哪家公司？<br>Facebook<br>Google<br>✓ Amazon<br>Uber</p><p>【题目】 Negotiate 工资的时候，哪种做法有利于得到更大的包裹？<br>拿地里抖包袱版的工资数字要对方 match<br>直接告诉对方自己目前薪酬，让对方看着良心办<br>开一个天价，谈不拢就散伙<br>✓ 精读地里谈工资宝典，知己知彼，百战不殆</p><p>【题目】 which state is University of Miami located?<br>California<br>Nevada<br>✓ Florida<br>Ohio</p><p>【题目】 下面哪个城市没有 SUNY（纽约州立大学）校区？<br>Albany<br>Buffalo<br>✓ Fulton<br>Stony Brook</p><p>【题目】 下面哪个州里有 Disney World？<br>✓ Florida<br>New York<br>North Carolina<br>Texas</p><p>【题目】 下面哪所大学所在城市不是波士顿？<br>✓ MIT<br>Boston University<br>Northeastern University<br>Emerson College</p><p>【题目】 关于旧金山市中心描述，下面哪个不正确？<br>走路得看着路，很多流浪汉，地上屎尿一不小心会踩上<br>车里一定不要放东西，但即使不放，也可能被砸车玻璃<br>Uber/Airbnb/Pinterest/Twitter 等著名科技公司都在 SOMA 区<br>✓ 旧金山创业公司很多，被称为“硅谷”</p><p>【题目】 一亩三分地是哪年创立的？<br>✓ 2009<br>2011<br>2013<br>2015</p><p>【题目】 下面哪个州在美国西海岸<br>VirginiaNorth<br>DakotaMaine<br>✓ Washington</p><p>【题目】 which state is University of Miami located?<br>Ohio<br>✓ Florida<br>Nevada<br>California</p><p>【题目】 加州大学有多个分校，下面哪个成立时间最短？<br>UC Davis<br>✓ UC Merced<br>UC Riverside<br>UC Santa Cruz</p><p>【题目】 下面哪个专业，不是 STEM，OPT 没法延期？<br>会计学以前不是，现在很多学校 stem 获批<br>数据科学<br>EECS<br>✓ 教育学</p><p>【题目】 哪种选校策略最合理？<br>按照排名高低选，谁高谁就好<br>交给中介选，反正不想操心<br>所有学校都申，蒙中哪个算哪个<br>✓ 根据自己下一步职业和学业目标，参考地里数据和成功率，认真斟酌</p><p>【题目】 一亩三分地是谁创立的？<br>✓ Warald<br>俞敏洪<br>李大辉<br>徐小平</p><p>【题目】 下面几个州，哪个离美国首都最远？<br>Maryland<br>Delaware<br>✓ North Carolina<br>Virginia</p><p>【题目】 地里数据科学类职位面经放在在什么版最合理？<br>数据科学版<br>美国面经版数据科学分类<br>✓ 数科面经版<br>找工求职版</p><p>【题目】 下面哪个公司总部在圣地亚哥？<br>✓ Qualcomm<br>AMD<br>Nvidia<br>Netflix</p><p>【题目】 下面哪种情况，管理员会按照你的要求，进行删帖？<br>问了问题，得到了答案，然后我过河拆桥，删帖让其他人看不到<br>发帖赚到了积分，看到了有权限设置的内容，然后反悔<br>尽管地里不允许，但是我到处留微信号，然后说隐私暴露要求删帖<br>✓ 这些情况全都不删帖！</p><p>【题目】 Miami University 在哪个城市<br>Miami, Florida<br>Las Vegas, Nevada<br>✓ Oxford, Ohio<br>Los Angeles, California</p><p>【题目】 想找室友或者当房东，帖子发在哪里？<br>✓ 租房广告|找室友版<br>房地产版<br>生活版<br>面经版</p><p>【题目】 在论坛发 slack 群，qq 群，微信群，任何站外讨论方式，会如何？<br>如果发在求职面经大区，申请大区，都会被删帖扣分<br>举报这些群，可能得到加分奖励<br>✓ 以上都正确<br>如果发在版聚，或者本地版块，是允许的</p><p>【题目】 下面哪类版块，可以拉群，而且不会被警告扣分？<br>录取结果汇报<br>求职、面经<br>内推<br>✓ 学友工友、找室友或者版聚本地</p><p>【题目】下面哪个说法错误？<br>雪城大学尽管在纽约州，但是离纽约城很远！<br>✓ 中国驻纽约领事馆位于法拉盛中国城，周围全是好吃的！<br>哥伦比亚大学离纽约中央公园很近<br>纽约州立大学石溪分校学费很便宜  </p><p>【题目】 下面哪个学术会议不是机器学习领域的？<br>CVPR<br>ICML<br>SIGKDD<br>✓ ICSE</p><p>【题目】 下面哪个童话故事不是安徒生写的<br>✓ 尼尔斯骑鹅旅行记<br>冰雪女王<br>卖火柴的小女孩<br>国王的新装</p><p>【题目】 下面哪个作家是英国人？<br>✓Charles Dickens<br>Ernest Hemingway<br>Victor Hugo<br>Alexander Pushkin</p><p>【题目】 income tax on wages<br>✓North Dakota<br>South Dakota<br>Wyoming<br>Teness…  </p><p>【题目】 下面哪个machine learning 的模型不是supervised<br>Logistic regression<br>✓Clustering<br>SVM<br>Decision Tree</p><p>【题目】 Apollo 11是哪一年登月的？<br>1969  </p><p>【题目】 下面哪个公司的streaming service不是会员subscription付费模式运营的？<br>✓tubi</p><p>【题目】 著名篮球运动员姚明效力的NBA球队是休斯敦火箭队。取名“ 火箭队”是因为休斯敦是美国著名的?<br>钢城<br>汽车城<br>✓ 宇航工业城<br>电影城</p><p>【题目】 音乐家贝多芬出生于哪国？<br>✓ 德国<br>法国<br>意大利<br>英国  </p><p>【题目】 下面哪个Ivy League，离东海岸最远？<br>Brown<br>Dartmouth<br>Princeton<br>✓ Cornell</p><p>【题目】 美国哪个州没有夏令时？<br>南达科他州<br>爱荷华州<br>✓亚利桑那州<br>阿肯色州</p><p>【题目】 下面哪部作品是喜剧？<br>麦克白<br>李尔王<br>✓仲夏夜之梦<br>哈姆雷特</p><p>【题目】 下面哪个公司总部不在湾区？<br>google<br>✓snapchat<br>facebook<br>Apple</p><p>【题目】 下面哪所纽约高校坐落于中央公园附近？<br>Fordham University<br>New York University<br>New York Institute of Technology<br>✓Columbia University</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;1.一亩三分地 新手上路 网站规则 - 满分5大米(适用于所有用户)&lt;br&gt;2.一亩三分地 考试中心 满分95大米(只适用于2019年之后注册的新人)&lt;br&gt;3.一亩三分地 每日答题 题库&lt;/p&gt;
    
    </summary>
    
    
      <category term="一亩三分地" scheme="http://Bithub00.com/tags/%E4%B8%80%E4%BA%A9%E4%B8%89%E5%88%86%E5%9C%B0/"/>
    
  </entry>
  
  <entry>
    <title>托福备考</title>
    <link href="http://Bithub00.com/2019/09/09/%E6%89%98%E7%A6%8F%E5%A4%87%E8%80%83/"/>
    <id>http://Bithub00.com/2019/09/09/托福备考/</id>
    <published>2019-09-09T03:02:28.587Z</published>
    <updated>2019-09-16T06:24:25.265Z</updated>
    
    <content type="html"><![CDATA[<p>8月25号香港荃湾考试局托福首考，9月4号出分102成功分手，R29L28S22W23，没有报过补习班，分享自己复习的经验，希望能帮助大家<br><a id="more"></a></p><center class="half"><img src="https://s2.ax1x.com/2019/09/08/n3jKfg.png" width="200px" alt="托福">  </center><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>我也会把当初有帮助的知乎回答贴在这里，我自认为自己的写作准备方法是有效的，只是可能准备时间不是很充分没发挥出来，话不多说进入正题:<br>我把自己积累的素材和格言等都放在github上，有需要的话可以自己获取：<br><a href="https://github.com/BitHub00/TOEFL" target="_blank" rel="noopener">托福个人积累素材及格言等</a></p><h3 id="阅读"><a href="#阅读" class="headerlink" title="阅读"></a>阅读</h3><p>阅读向来是中国考生的强项，我这次最好的单项也是阅读。我觉得最主要是平时要多读点英文材料，例如时事评论或者论文，然后考试时注意时间的把控，就没什么大问题了，当然也可以按照传统的复习方法使用托福模考软件多做tpo</p><h3 id="听力"><a href="#听力" class="headerlink" title="听力"></a>听力</h3><p>八月份的托福改革，减少了一篇听力lecture，好处是考试时不会这么累，因为托福的听力长度一般比较长，而且偏学术，需要全程保持专注和紧张，同时因为开考的时间不一致，可能你在听力时别人在考口语，会造成影响。坏处是题目量减少之后容错率降低，拿高分会变难一点，不过也不用顾虑太多，多练习才是王道。还有一点就是，网上说新的改革里加入了英国口音，我没怎么留意，然后说听力变成了1.2倍速度，我觉得这个不实，感觉和平时练的tpo语速是一样的，不要听信网上的说法给自己制造焦虑。<br>我复习的方法来自知乎，觉得还是挺有效的，如果只是单纯做tpo然后对答案其实并不会提升自己的听力水平，这里贴出来给大家参考：</p><p><img src="https://s2.ax1x.com/2019/09/09/nJWQKS.png" alt="托福听力"><br><a href="https://www.zhihu.com/question/20407472/answer/83390431" target="_blank" rel="noopener">如何快速提高托福听力水平？ - 梁跃的回答 - 知乎</a></p><h3 id="口语"><a href="#口语" class="headerlink" title="口语"></a>口语</h3><p>口语部分在八月改革之后改动很大，这次考试我也确认了网上的说法，即第一部分和第五部分是直接删掉了，因为是第一次考托福，考口语的时候我比较紧张，主要是考试界面的那个倒计时增添了我的紧张，总怕说不完，教训是平时复习的时候应该多掐表按照时间来练习，复习方法来自豆瓣：<br><a href="https://www.douban.com/group/topic/43613327/" target="_blank" rel="noopener">托福口语备考</a></p><h3 id="写作"><a href="#写作" class="headerlink" title="写作"></a>写作</h3><p>写作的确需要长期积累才能出效果，我个人觉得自己的复习方法是正确的，这次的分数23也还行，可能需要积累到一定程度才会出效果。那就是对某些话题，直接上google看本土人士是怎么写的，不要去背很多范文，因为托福写作毕竟也会跟以前的考试进行查重比对，而且很多范文说实在也是我们国人写的，怎么都没有外国人地道，我拿一篇举例，旅游的好处：</p><center><font size="5">11 Reasons Why Travel Makes You a Happier Person</font>  </center><p>&#8195;I feel happy when I’m gaining new experiences and insights, and challenging my boundaries. Travel is the perfect catalyst for happiness, as it has allowed me to experience the natural, cultural and man-made wonders of the world. Being in foreign lands, it also continuously forces me to step out of my comfort zone - a great confidence-builder. Travel expands our capacity for wonder, joy and appreciation of the amazing diversity on our lovely planet.  </p><ol><li>FIND YOUR SELF-CONFIDENCE BY DEALING WITH UNEXPECTED SITUATIONS<br>&#8195;There comes a time when everyone must deal with an unexpected situation when they’re on the road. Even if you plan your trip to the letter, things can take a surprise turn. Whatever happens, there is a way around the problem and knowing that you can deal with these situations is a big boost to self-confidence and therefore your happiness.</li><li>HAPPINESS IS INFECTIOUS<br>&#8195;When locals are happy, smiling and friendly, <font color="red">it has an immediate knock-on effect. </font>I found the people of Thailand and Laos to be notably friendly and cheerful, despite the relative poorness of these countries and the former in particular having a very recent traumatic history. When faced with those <font color="red">big beaming smiles</font>, it’s hard to be annoyed at the hassling you might experience at busy sites like Angkor Wat; <font color="red">putting that knee-jerk irritation to one side instantly lifts your mood</font> and is a good habit to take home.</li><li>BEING AWAY MAKES YOU APPRECIATE FAMILY AND HOME<br>&#8195;Being away from things we often take for granted — family, close friends, home — makes us appreciate them more. Calling home isn’t a chore, but something to look forward to: <font color="red">no one enjoys listening to your envy-inducing travel stories more than your parents, so it’s the perfect excuse to wax lyrical about whatever place with which you’ve just fallen in love.</font></li><li>YOU MAKE NEW FRIENDS<br>&#8195;It’s much easier to make new friends on the road than it is at home, <font color="red">where people are less inclined to chat to strangers on a bus or strike up conversation in a bar. When people are away from home, there seem to be less boundaries to cross</font> and making friends becomes much easier, whether it’s a local curious to know where you’ve come from or a fellow traveler keen to have someone with whom to enjoy a beer or share a taxi. Social interactions make us happier and <font color="red">increasing our social circle</font> means that we’re talking more and meeting different, interesting people, which hopefully means we’re learning more, too.</li><li><font color="red">DETOX FROM SOCIAL MEDIA</font>  &#8195;Social media can be used for both good and bad, but it's healthy for everyone to have a break from the internet every once in a while. Wi-fi is so prevalent that it's hard to turn off and you can quite often find yourself tuning out whatever amazing place you're in with your face in your phone, checking Twitter, scrolling through your Facebook feed, checking your emails... stop. Turn it off. Better yet, find somewhere with no reception and no wi-fi so that you don't have a choice. <font color="red">It's liberating and allows you to better enjoy the 'here and now', which nicely ties into the following point.</font></li><li>GETTING SOME ‘YOU’ TIME<br>&#8195;<font color="red">Traveling gives us breathing space that is often lost in our usual day-to-day existence.</font> Having a moment to take advantage of peace and quiet and to simply ‘be’ allows us to let go of stress and tension and just enjoy being in the moment — a key focus of meditation and a practice you can take home with you. If you’re traveling with a partner, it’s a chance to spend time with only each other for company, which is a thought that probably shouldn’t fill you with dread.</li><li>EDUCATION, EDUCATION, EDUCATION<br>&#8195;Whether it’s learning a new skill such as cooking Thai food or learning a new language, travel presents ways in which we can further our knowledge and education. Learning makes our brains more active, which psychologists have found increases our level of happiness - particularly when learning something we find enjoyable.</li><li>GET A VITAMIN D BOOST<br>&#8195;Whilst it’s a bit of myth that you need to be on a sun-lounger for twelve hours to feel the full effects of vitamin D (20 minutes of exposure to sunlight is enough), there’s no doubt that in the same way that the cold and dark of winter makes us unhappy (feeling the effects of seasonal affective disorder or SAD), sunshine and warmth generally put us in a much better mood. A beach break is a great way to relax and enjoy the health benefits of a warm climate. Admittedly, this is more of a short-term boost, but a healthy glow makes everyone feels better and lasts for a few weeks after your trip is over.</li><li>YOU’RE MORE INTERESTING<br>&#8195;You don’t need to be a ‘travel bore’ to have a few interesting stories to tell. <font color="red">Traveling throws up a lot of bizarre, funny and sometimes serious situations that relating back to people will make you — at least — feel interesting. Making someone laugh is an easy way to instantly bump up your self-esteem</font>, so hold on to those embarrassing memories — no matter how much they might make you cringe.</li><li>NEW EXPERIENCES GIVE US MOMENTS TO REMEMBER<br>&#8195;For most people, travelling is about the new experiences. <font color="red">I will never forget that moment of awe when I stood watching the sunlight leak out around the ancient temple of Chiang Mai in Thailand at sunrise, the sky turned a striking shade of violet: it was one of the most extraordinary sights I’ve ever seen. Recalling memories of happiness can sustain a feeling of contentment long after the moment has passed, and new experiences are memories that can stick with you forever</font>.</li><li>THE EFFECTS OF TRAVELING AREN’T JUST SHORT-TERM<br>&#8195;Aside from making you happier in the short-term, traveling can make you a much more contented, happy and relaxed person in the long run, too. Of course, most travel enthusiasts are constantly planning their next trip, but when we’re at home or past a point of being able to jet off whenever we like, past travels leave us with the memories and personal skills - such as confidence, broad-mindedness, friends and a more worldly perspective — that make people happy. And that’s why travel makes you a happier person.</li></ol><p>标红的那些部分是我个人认为很地道的表达，而且关于旅行如何让我们更幸福文章里就列举了11个观点，很多观点都很新颖，如果我们自己来写旅行，能写到多少个观点，而且有多少个大家想的都是一样的？所以我觉得这样子积累对写作会很有帮助。<br>至于素材积累，我自己使用的网站有：</p><ul><li><a href="https://techcrunch.com/" target="_blank" rel="noopener">techcrunch</a></li><li><a href="http://debate.org/" target="_blank" rel="noopener">Debate</a>  </li></ul><p>更多的时候是在google上搜索特定话题的时候，直接看靠前面的搜索结果，因为好文章不一定都能集中在同一个网站</p><h3 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h3><p>不管什么复习方法，其实多练习才是王道，认定一个复习方法持之以恒就可以了，不存在什么最好最高效的方法，同时要有自己的主见，不要知乎上说什么就信什么。祝愿大家早日和托福分手</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;8月25号香港荃湾考试局托福首考，9月4号出分102成功分手，R29L28S22W23，没有报过补习班，分享自己复习的经验，希望能帮助大家&lt;br&gt;
    
    </summary>
    
    
      <category term="托福" scheme="http://Bithub00.com/tags/%E6%89%98%E7%A6%8F/"/>
    
  </entry>
  
  <entry>
    <title>C++刷题</title>
    <link href="http://Bithub00.com/2019/09/01/C++%E5%88%B7%E9%A2%98/"/>
    <id>http://Bithub00.com/2019/09/01/C++刷题/</id>
    <published>2019-09-01T08:30:55.972Z</published>
    <updated>2019-09-11T15:59:43.089Z</updated>
    
    <content type="html"><![CDATA[<p>C++刷题记录</p><a id="more"></a><h2 id="题目集一"><a href="#题目集一" class="headerlink" title="题目集一"></a>题目集一</h2><p><a href="https://blog.csdn.net/qq_36426650/article/category/8452043/1" target="_blank" rel="noopener">C++面向对象程序设计50道编程题</a></p><h3 id="Problem-1"><a href="#Problem-1" class="headerlink" title="Problem 1"></a>Problem 1</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fract</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">   <span class="keyword">int</span> num, den;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">   Fract(<span class="keyword">int</span> a = <span class="number">0</span>, <span class="keyword">int</span> b = <span class="number">1</span>) &#123; num = a; den = b; &#125;</span><br><span class="line">   <span class="function"><span class="keyword">int</span> <span class="title">ged</span><span class="params">(<span class="keyword">int</span> m, <span class="keyword">int</span> n)</span></span>;</span><br><span class="line">   <span class="function">Fract <span class="title">add</span><span class="params">(Fract f)</span></span>;</span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> Fract::ged(<span class="keyword">int</span> m, <span class="keyword">int</span> n)</span><br><span class="line">&#123;</span><br><span class="line">   <span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">   <span class="keyword">if</span>(m &gt;= n)</span><br><span class="line">       k = n;</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">       k = m;</span><br><span class="line">   <span class="keyword">for</span>(; k &gt;= <span class="number">1</span>; k--)</span><br><span class="line">   &#123;</span><br><span class="line">       <span class="keyword">if</span>(m % k == <span class="number">0</span> &amp;&amp; n % k == <span class="number">0</span>)</span><br><span class="line">           <span class="keyword">break</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> k;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Fract Fract::add(Fract f)</span><br><span class="line">&#123;</span><br><span class="line">   Fract ff;</span><br><span class="line">   <span class="keyword">int</span> v;</span><br><span class="line">   v = ged(f.den, den);</span><br><span class="line">   <span class="keyword">int</span> vv = den / v * f.den;</span><br><span class="line">   <span class="keyword">int</span> uu = vv / den * num + vv / f.den * f.num;</span><br><span class="line">   <span class="keyword">int</span> cc = ged(vv, uu);</span><br><span class="line">   <span class="keyword">if</span> (cc != <span class="number">1</span>) &#123;vv = vv / cc; uu = uu / cc;&#125;</span><br><span class="line">   ff.den = vv;</span><br><span class="line">   ff.num = uu;</span><br><span class="line">   <span class="keyword">return</span> ff;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> Fract::show()</span><br><span class="line">&#123;</span><br><span class="line">   <span class="built_in">cout</span> &lt;&lt; num &lt;&lt; <span class="string">'/'</span> &lt;&lt; den &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   Fract f1(1,5), f2(7,20), f3;</span><br><span class="line">   f3 = f1.add(f2);</span><br><span class="line">   f3.show();</span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Problem-2"><a href="#Problem-2" class="headerlink" title="Problem 2"></a>Problem 2</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ARRAY</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">   <span class="keyword">float</span> a[<span class="number">10</span>], b[<span class="number">10</span>];</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">   ARRAY(<span class="keyword">float</span> t[<span class="number">10</span>])</span><br><span class="line">   &#123;</span><br><span class="line">       <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">           a[i] = t[i];</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">process</span><span class="params">()</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">       <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">       &#123;</span><br><span class="line">           <span class="keyword">int</span> pre = (i - <span class="number">1</span>) % <span class="number">10</span>;</span><br><span class="line">           <span class="keyword">if</span>(pre &lt; <span class="number">0</span>)</span><br><span class="line">               pre = <span class="number">10</span> + pre;</span><br><span class="line">           <span class="keyword">int</span> aft = (i + <span class="number">1</span>) % <span class="number">10</span>;</span><br><span class="line">           b[i] = (a[pre] + a[i] + a[aft]) / <span class="number">3</span>;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">       <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">           <span class="built_in">cout</span> &lt;&lt; a[i] &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">       <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">       <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">           <span class="built_in">cout</span> &lt;&lt; b[i] &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   <span class="keyword">float</span> aa[<span class="number">10</span>] = &#123;<span class="number">0</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">9</span>,<span class="number">12</span>,<span class="number">15</span>,<span class="number">18</span>,<span class="number">21</span>,<span class="number">24</span>,<span class="number">27</span>&#125;;</span><br><span class="line">   <span class="function">ARRAY <span class="title">v</span><span class="params">(aa)</span></span>;</span><br><span class="line">   v.process();</span><br><span class="line">   v.print();</span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Problem-3"><a href="#Problem-3" class="headerlink" title="Problem 3"></a>Problem 3</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ID</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">   <span class="keyword">char</span> s[<span class="number">18</span>], x[<span class="number">11</span>];</span><br><span class="line">   <span class="keyword">int</span> w[<span class="number">17</span>];</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">   ID(<span class="keyword">char</span> *str)&#123;</span><br><span class="line">       <span class="keyword">int</span> i;</span><br><span class="line">       <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="number">18</span>; i++)</span><br><span class="line">           s[i] = <span class="string">'0'</span>;</span><br><span class="line">       <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="built_in">strlen</span>(str); i++)&#123;</span><br><span class="line">           s[i] = str[i];</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">char</span> x1[] = &#123;<span class="string">'1'</span>,<span class="string">'0'</span>,<span class="string">'X'</span>,<span class="string">'9'</span>,<span class="string">'8'</span>,<span class="string">'7'</span>,<span class="string">'6'</span>,<span class="string">'5'</span>,<span class="string">'4'</span>,<span class="string">'3'</span>,<span class="string">'2'</span>&#125;;</span><br><span class="line">       <span class="built_in">strcpy</span>(x,x1);</span><br><span class="line">       <span class="keyword">int</span> w1[] = &#123;<span class="number">7</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">5</span>,<span class="number">8</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">6</span>,<span class="number">3</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">5</span>,<span class="number">8</span>,<span class="number">4</span>,<span class="number">2</span>&#125;;</span><br><span class="line">       <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="number">17</span>; i++)</span><br><span class="line">           w[i] = w1[i];</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">fun</span><span class="params">()</span></span>&#123;</span><br><span class="line">       <span class="keyword">int</span> i;</span><br><span class="line">       <span class="keyword">for</span>(i = <span class="number">16</span>; i &gt; <span class="number">7</span>; i--)</span><br><span class="line">           s[i] = s[i - <span class="number">2</span>];</span><br><span class="line">       s[<span class="number">6</span>] = <span class="string">'1'</span>; s[<span class="number">7</span>] = <span class="string">'9'</span>;</span><br><span class="line">       <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">       <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="number">17</span>; i++)&#123;</span><br><span class="line">           <span class="keyword">int</span> temp = s[i] - <span class="string">'0'</span>;</span><br><span class="line">           sum += temp * w[i];</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">int</span> index = sum % <span class="number">11</span>;</span><br><span class="line">       s[<span class="number">17</span>] = x[index];</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;</span><br><span class="line">       <span class="built_in">cout</span> &lt;&lt; s &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   <span class="keyword">char</span> *str = <span class="string">"340524800101001"</span>;</span><br><span class="line">   <span class="function">ID <span class="title">id</span><span class="params">(str)</span></span>;</span><br><span class="line">   id.fun();</span><br><span class="line">   id.print();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Problem-4"><a href="#Problem-4" class="headerlink" title="Problem 4"></a>Problem 4</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">String</span>&#123;</span></span><br><span class="line">   <span class="keyword">char</span> *str1, *str2;</span><br><span class="line">   <span class="keyword">char</span> *str;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">   String(<span class="keyword">char</span> *s1, <span class="keyword">char</span>* s2)&#123;</span><br><span class="line">       str1=<span class="keyword">new</span> <span class="keyword">char</span>[<span class="built_in">strlen</span>(s1)+<span class="number">1</span>];</span><br><span class="line">       <span class="built_in">strcpy</span>(str1,s1);</span><br><span class="line">       str2=<span class="keyword">new</span> <span class="keyword">char</span>[<span class="built_in">strlen</span>(s2)+<span class="number">1</span>];</span><br><span class="line">       <span class="built_in">strcpy</span>(str2,s2);</span><br><span class="line">       str=<span class="keyword">new</span> <span class="keyword">char</span>[<span class="built_in">strlen</span>(s1)+<span class="built_in">strlen</span>(s2)+<span class="number">1</span>];</span><br><span class="line">       <span class="built_in">strcpy</span>(str,s1);<span class="built_in">strcat</span>(str,s2);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">del</span><span class="params">()</span></span>&#123;</span><br><span class="line">       <span class="keyword">char</span> *ptr1 = str;</span><br><span class="line">       <span class="keyword">char</span> *ptr2 = str;</span><br><span class="line">       <span class="keyword">while</span>(*ptr1)&#123;</span><br><span class="line">           <span class="keyword">if</span>(*ptr1 != <span class="string">' '</span>)&#123;</span><br><span class="line">               *ptr2 = *ptr1;</span><br><span class="line">               ptr2++;</span><br><span class="line">           &#125;</span><br><span class="line">           ptr1++;</span><br><span class="line">       &#125;</span><br><span class="line">       *ptr2 = <span class="string">'\0'</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">void</span> _sort()&#123;</span><br><span class="line">       <span class="keyword">char</span> *ptr1 = str;</span><br><span class="line">       <span class="keyword">char</span> *ptr2, temp;</span><br><span class="line">       <span class="keyword">while</span>(*ptr1)&#123;</span><br><span class="line">           <span class="keyword">for</span>(ptr2 = ptr1; *ptr2; ptr2++)&#123;</span><br><span class="line">               <span class="keyword">if</span>(*ptr1 &gt; *ptr2)&#123;</span><br><span class="line">                   temp = *ptr1;</span><br><span class="line">                   *ptr1 = *ptr2;</span><br><span class="line">                   *ptr2 = temp;</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">           ptr1++;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;</span><br><span class="line">       <span class="built_in">cout</span> &lt;&lt; <span class="string">"str1: "</span> &lt;&lt; str1 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">       <span class="built_in">cout</span> &lt;&lt; <span class="string">"str2: "</span> &lt;&lt; str2 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">       <span class="built_in">cout</span> &lt;&lt; <span class="string">"str: "</span> &lt;&lt; str &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   ~String()&#123;</span><br><span class="line">       <span class="built_in">free</span>(str1);</span><br><span class="line">       <span class="built_in">free</span>(str2);</span><br><span class="line">       <span class="built_in">free</span>(str);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">   <span class="keyword">char</span> *s1 = <span class="string">"db a"</span>;</span><br><span class="line">   <span class="keyword">char</span> *s2 = <span class="string">"4  1"</span>;</span><br><span class="line">   <span class="function">String <span class="title">str</span><span class="params">(s1, s2)</span></span>;</span><br><span class="line">   str.del();</span><br><span class="line">   str.show();</span><br><span class="line">   str._sort();</span><br><span class="line">   str.show();</span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Problem-5"><a href="#Problem-5" class="headerlink" title="Problem 5"></a>Problem 5</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Array</span>&#123;</span></span><br><span class="line">   <span class="keyword">int</span> *p,k;</span><br><span class="line">   <span class="keyword">float</span> s;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">   Array(<span class="keyword">int</span> *ptr, <span class="keyword">int</span> n)&#123;</span><br><span class="line">       k = n;</span><br><span class="line">       p = <span class="keyword">new</span> <span class="keyword">int</span>[k];</span><br><span class="line">       <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; k; i++)</span><br><span class="line">           p[i] = ptr[i];</span><br><span class="line">       s = <span class="number">0</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">int</span> <span class="title">fun</span><span class="params">(<span class="keyword">int</span> n)</span></span>;</span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">sum</span><span class="params">()</span></span>;</span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>;</span><br><span class="line">   ~Array()&#123;</span><br><span class="line">       <span class="keyword">delete</span> []p;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> Array::fun(<span class="keyword">int</span> n)&#123;</span><br><span class="line">   <span class="keyword">if</span>(n == <span class="number">0</span> || n == <span class="number">1</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">   <span class="keyword">int</span> i;</span><br><span class="line">   <span class="keyword">for</span>(i = <span class="number">2</span>; i &lt; n; i++)</span><br><span class="line">   &#123;</span><br><span class="line">       <span class="keyword">if</span>(n % i == <span class="number">0</span>)</span><br><span class="line">           <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> Array::sum()&#123;</span><br><span class="line">   <span class="keyword">float</span> sum = <span class="number">0</span>;</span><br><span class="line">   <span class="keyword">int</span> length = <span class="number">0</span>;</span><br><span class="line">   <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; k; i++)&#123;</span><br><span class="line">       <span class="keyword">if</span>(fun(p[i]))&#123;</span><br><span class="line">           sum += p[i];</span><br><span class="line">           length++;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   s = sum / length;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> Array::show()&#123;</span><br><span class="line">   <span class="built_in">cout</span> &lt;&lt; k &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">   <span class="keyword">int</span> i;</span><br><span class="line">   <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; k; i++)&#123;</span><br><span class="line">       <span class="built_in">cout</span> &lt;&lt; p[i] &lt;&lt; <span class="string">'\t'</span>;</span><br><span class="line">       <span class="keyword">if</span>(i % <span class="number">4</span> ==<span class="number">0</span> &amp;&amp; i != <span class="number">0</span>)</span><br><span class="line">           <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">cout</span> &lt;&lt; s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">   <span class="keyword">int</span> ptr[] = &#123;<span class="number">5</span>,<span class="number">2</span>,<span class="number">7</span>,<span class="number">4</span>,<span class="number">8</span>,<span class="number">23</span>,<span class="number">65</span>,<span class="number">1</span>,<span class="number">40</span>&#125;;</span><br><span class="line">   <span class="keyword">int</span> n = <span class="number">9</span>;</span><br><span class="line">   <span class="function">Array <span class="title">arr</span><span class="params">(ptr, n)</span></span>;</span><br><span class="line">   arr.sum();</span><br><span class="line">   arr.show();</span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Problem-6"><a href="#Problem-6" class="headerlink" title="Problem 6"></a>Problem 6</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">STR</span>&#123;</span></span><br><span class="line">   <span class="keyword">char</span> s1[<span class="number">80</span>], s2[<span class="number">80</span>];</span><br><span class="line">   <span class="keyword">char</span> s3[<span class="number">160</span>];</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">   STR(<span class="keyword">char</span> a[], <span class="keyword">char</span> b[])&#123;</span><br><span class="line">       <span class="keyword">char</span> *ptr1 = s1;</span><br><span class="line">       <span class="keyword">char</span> *ptr2 = s2;</span><br><span class="line">       <span class="keyword">while</span>(*a)&#123;</span><br><span class="line">           *ptr1 = *a;</span><br><span class="line">           ptr1++;</span><br><span class="line">           a++;</span><br><span class="line">       &#125;</span><br><span class="line">       *ptr1 = <span class="string">'\0'</span>;</span><br><span class="line">       <span class="keyword">while</span>(*b)&#123;</span><br><span class="line">           *ptr2 = *b;</span><br><span class="line">           ptr2++;</span><br><span class="line">           b++;</span><br><span class="line">       &#125;</span><br><span class="line">       *ptr2 = <span class="string">'\0'</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">consort</span><span class="params">()</span></span>;</span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> STR::consort()&#123;</span><br><span class="line">   <span class="built_in">strcpy</span>(s3, s1);</span><br><span class="line">   <span class="built_in">strcat</span>(s3, s2);</span><br><span class="line">   <span class="keyword">char</span> *ptr1 = s3, *ptr2, temp;</span><br><span class="line">   <span class="keyword">while</span>(*ptr1)&#123;</span><br><span class="line">       <span class="keyword">for</span>(ptr2 = ptr1; *ptr2; ptr2++)&#123;</span><br><span class="line">           <span class="keyword">if</span>(*ptr2 &lt; *ptr1)&#123;</span><br><span class="line">               temp = *ptr2;</span><br><span class="line">               *ptr2 = *ptr1;</span><br><span class="line">               *ptr1 = temp;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       ptr1++;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> STR::show()&#123;</span><br><span class="line">   <span class="built_in">cout</span> &lt;&lt; s1 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">   <span class="built_in">cout</span> &lt;&lt; s2 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">   <span class="built_in">cout</span> &lt;&lt; s3 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">   <span class="keyword">char</span> a[] = <span class="string">"pear"</span>;</span><br><span class="line">   <span class="keyword">char</span> b[] = <span class="string">"apple"</span>;</span><br><span class="line">   <span class="function">STR <span class="title">str</span><span class="params">(a, b)</span></span>;</span><br><span class="line">   str.consort();</span><br><span class="line">   str.show();</span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Problem-7"><a href="#Problem-7" class="headerlink" title="Problem 7"></a>Problem 7</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RECT</span>&#123;</span></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">   <span class="keyword">double</span> x,y;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">   RECT(<span class="keyword">double</span> x1, <span class="keyword">double</span> y1)&#123;</span><br><span class="line">       x = x1;</span><br><span class="line">       y = y1;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">virtual</span> <span class="keyword">double</span> <span class="title">area</span><span class="params">()</span></span>&#123;</span><br><span class="line">       <span class="keyword">double</span> are = x * y;</span><br><span class="line">       <span class="keyword">return</span> are;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">double</span> <span class="title">peri</span><span class="params">()</span></span>&#123;</span><br><span class="line">       <span class="keyword">double</span> per = <span class="number">2</span> * (x + y);</span><br><span class="line">       <span class="keyword">return</span> per;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">virtual</span> <span class="keyword">int</span> <span class="title">isSquare</span><span class="params">()</span></span>&#123;</span><br><span class="line">       <span class="keyword">if</span>(x == y)</span><br><span class="line">           <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">       <span class="keyword">else</span></span><br><span class="line">           <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CUB</span>:</span><span class="keyword">public</span> RECT&#123;</span><br><span class="line">   <span class="keyword">double</span> height;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">   CUB(<span class="keyword">double</span> x1, <span class="keyword">double</span> y1, <span class="keyword">double</span> h):RECT(x1,y1)&#123;</span><br><span class="line">       height = h;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">double</span> <span class="title">volume</span><span class="params">()</span></span>;</span><br><span class="line">   <span class="function"><span class="keyword">double</span> <span class="title">area</span><span class="params">()</span></span>;</span><br><span class="line">   <span class="function"><span class="keyword">int</span> <span class="title">isSquare</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">double</span> CUB::volume()&#123;</span><br><span class="line">   <span class="keyword">double</span> square = RECT::area();</span><br><span class="line">   <span class="keyword">double</span> v = square * height;</span><br><span class="line">   <span class="keyword">return</span> v;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">double</span> CUB::area()&#123;</span><br><span class="line">   <span class="keyword">double</span> square = RECT::area();</span><br><span class="line">   <span class="keyword">double</span> result = <span class="number">2</span> * square + peri() * height;</span><br><span class="line">   <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> CUB::isSquare()&#123;</span><br><span class="line">   <span class="keyword">if</span>(RECT::isSquare())</span><br><span class="line">       <span class="keyword">return</span> x == height;</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">       <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">   <span class="keyword">double</span> a,b,c;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;a&gt;&gt;b&gt;&gt;c;</span><br><span class="line"><span class="function">CUB <span class="title">cu</span><span class="params">(a,b,c)</span></span>;</span><br><span class="line">RECT *re;</span><br><span class="line">re=&amp;cu;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">"长方体的体积为："</span>&lt;&lt;cu.volume()&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">"长方体的表面积为："</span>&lt;&lt;re-&gt;area()&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">if</span>(re-&gt;isSquare())</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">"该长方体是正方体\n"</span>;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">"该长方体不是正方体\n"</span>;</span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Problem-8"><a href="#Problem-8" class="headerlink" title="Problem 8"></a>Problem 8</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ARR</span>&#123;</span></span><br><span class="line">   <span class="keyword">int</span> n;</span><br><span class="line">   <span class="keyword">int</span> a[<span class="number">100</span>];</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">   ARR(<span class="keyword">int</span> x[], <span class="keyword">int</span> size)&#123;</span><br><span class="line">       n = size;</span><br><span class="line">       <span class="keyword">int</span> i;</span><br><span class="line">       <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">           a[i] = x[i];</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">change</span><span class="params">()</span></span>;</span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> ARR::change()&#123;</span><br><span class="line">   <span class="keyword">int</span> i = <span class="number">0</span>, j = n - <span class="number">1</span>;</span><br><span class="line">   <span class="keyword">for</span>(; i &lt; j; i++)&#123;</span><br><span class="line">       <span class="keyword">while</span>(a[i] &lt; <span class="number">0</span>)</span><br><span class="line">       &#123;</span><br><span class="line">           <span class="keyword">if</span>(i == j)</span><br><span class="line">               <span class="keyword">break</span>;</span><br><span class="line">           i++;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">while</span>(a[j] &gt; <span class="number">0</span>)</span><br><span class="line">       &#123;</span><br><span class="line">           <span class="keyword">if</span>(i == j)</span><br><span class="line">               <span class="keyword">break</span>;</span><br><span class="line">           j--;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">int</span> temp = a[i];</span><br><span class="line">       a[i] = a[j];</span><br><span class="line">       a[j] = temp;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> ARR::show()&#123;</span><br><span class="line">   <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">       <span class="built_in">cout</span> &lt;&lt; a[i] &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">   <span class="keyword">int</span> b[<span class="number">10</span>] = &#123;<span class="number">1</span>,<span class="number">-3</span>,<span class="number">-1</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">-4</span>,<span class="number">5</span>,<span class="number">-5</span>,<span class="number">-2</span>&#125;;</span><br><span class="line">   <span class="function">ARR <span class="title">arr</span><span class="params">(b, <span class="number">10</span>)</span></span>;</span><br><span class="line">   arr.show();</span><br><span class="line">   arr.change();</span><br><span class="line">   arr.show();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Problem-9"><a href="#Problem-9" class="headerlink" title="Problem 9"></a>Problem 9</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span>&#123;</span></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">   <span class="keyword">char</span> name[<span class="number">8</span>];</span><br><span class="line">   <span class="keyword">int</span> num;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">   Base()&#123;</span><br><span class="line">       <span class="built_in">cout</span> &lt;&lt; <span class="string">"请输入姓名："</span>;</span><br><span class="line">       <span class="built_in">cin</span> &gt;&gt; name;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;</span><br><span class="line">       <span class="built_in">cout</span> &lt;&lt; name &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">virtual</span> <span class="keyword">int</span> <span class="title">isGood</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>:</span><span class="keyword">public</span> Base&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">   Student()&#123;</span><br><span class="line">       <span class="built_in">cout</span> &lt;&lt; <span class="string">"请输入成绩："</span>;</span><br><span class="line">       <span class="built_in">cin</span> &gt;&gt; num;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">int</span> <span class="title">isGood</span><span class="params">()</span></span>&#123;</span><br><span class="line">       <span class="keyword">if</span>(num &gt; <span class="number">90</span>)</span><br><span class="line">           <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">       <span class="keyword">else</span></span><br><span class="line">           <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Teacher</span>:</span><span class="keyword">public</span> Base&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">   Teacher()&#123;</span><br><span class="line">       <span class="built_in">cout</span> &lt;&lt; <span class="string">"请输入论文数："</span>;</span><br><span class="line">       <span class="built_in">cin</span> &gt;&gt; num;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">int</span> <span class="title">isGood</span><span class="params">()</span></span>&#123;</span><br><span class="line">       <span class="keyword">if</span>(num &gt; <span class="number">3</span>)</span><br><span class="line">           <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">       <span class="keyword">else</span></span><br><span class="line">           <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">   <span class="built_in">cout</span> &lt;&lt; <span class="string">"学生情况："</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">   Student s[<span class="number">2</span>];</span><br><span class="line">   <span class="built_in">cout</span> &lt;&lt; <span class="string">"老师情况："</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">   Teacher t[<span class="number">2</span>];</span><br><span class="line">   Base *p;</span><br><span class="line">   <span class="keyword">int</span> i;</span><br><span class="line">   <span class="built_in">cout</span> &lt;&lt; <span class="string">"优秀学生："</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">   <span class="keyword">for</span>(i = <span class="number">0</span>, p = s; i &lt; <span class="number">2</span>; i++)&#123;</span><br><span class="line">       <span class="keyword">if</span>(p-&gt;isGood())</span><br><span class="line">           p-&gt;print();</span><br><span class="line">       p++;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">cout</span> &lt;&lt; <span class="string">"优秀老师："</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">   <span class="keyword">for</span>(i = <span class="number">0</span>, p = t; i &lt; <span class="number">2</span>; i ++)&#123;</span><br><span class="line">       <span class="keyword">if</span>(p-&gt;isGood())</span><br><span class="line">           p-&gt;print();</span><br><span class="line">       p++;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Problem-10"><a href="#Problem-10" class="headerlink" title="Problem 10"></a>Problem 10</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 4</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Array</span>&#123;</span></span><br><span class="line">   <span class="keyword">int</span> b[M][M];</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">   Array(<span class="keyword">int</span> (*p)[M]);</span><br><span class="line">   <span class="keyword">void</span> <span class="keyword">operator</span>+();</span><br><span class="line">   <span class="keyword">friend</span> <span class="keyword">void</span> <span class="keyword">operator</span>-(Array &amp;b);</span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Array::Array(<span class="keyword">int</span> (*p)[M])&#123;</span><br><span class="line">   <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; M; i++)</span><br><span class="line">       <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; M; j++)</span><br><span class="line">           b[i][j] = p[i][j];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> Array::<span class="keyword">operator</span>+()&#123;</span><br><span class="line">   <span class="keyword">int</span> t[M][M];</span><br><span class="line">   <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; M; i++)</span><br><span class="line">       <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; M; j++)</span><br><span class="line">           t[i][j] = b[j][M<span class="number">-1</span>-i];</span><br><span class="line">   <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; M; i++)</span><br><span class="line">       <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; M; j++)</span><br><span class="line">           b[i][j] = t[i][j];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="keyword">operator</span>-(Array &amp;b)&#123;</span><br><span class="line">   <span class="keyword">int</span> t[M][M];</span><br><span class="line">   <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; M; i++)</span><br><span class="line">       <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; M; j++)</span><br><span class="line">           t[i][j] = b.b[M<span class="number">-1</span>-j][i];</span><br><span class="line">   <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; M; i++)</span><br><span class="line">       <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; M; j++)</span><br><span class="line">           b.b[i][j] = t[i][j];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> Array::print()&#123;</span><br><span class="line">   <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; M; i++)</span><br><span class="line">   &#123;</span><br><span class="line">       <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; M; j++)</span><br><span class="line">       &#123;</span><br><span class="line">           <span class="built_in">cout</span> &lt;&lt; b[i][j] &lt;&lt; <span class="string">'\t'</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">cout</span> &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">   <span class="keyword">int</span> a[][M]=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">14</span>,<span class="number">15</span>,<span class="number">16</span>&#125;;</span><br><span class="line">   <span class="function">Array <span class="title">arr</span><span class="params">(a)</span></span>;</span><br><span class="line">   arr.print();</span><br><span class="line">   +arr;</span><br><span class="line">   arr.print();</span><br><span class="line">   -arr;</span><br><span class="line">   arr.print();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Problem-11"><a href="#Problem-11" class="headerlink" title="Problem 11"></a>Problem 11</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">String_Integer</span>&#123;</span></span><br><span class="line">   <span class="keyword">char</span> *s;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">   String_Integer(<span class="keyword">char</span> *str);</span><br><span class="line">   <span class="function"><span class="keyword">operator</span> <span class="title">int</span><span class="params">()</span></span>&#123;</span><br><span class="line">       <span class="keyword">char</span> *ptr = s;</span><br><span class="line">       <span class="keyword">int</span> num = <span class="number">0</span>;</span><br><span class="line">       <span class="keyword">while</span>(*ptr)&#123;</span><br><span class="line">           <span class="keyword">if</span>(*ptr &gt;= <span class="string">'0'</span> &amp;&amp; *ptr &lt;= <span class="string">'9'</span>)</span><br><span class="line">               &#123;</span><br><span class="line">                   num = num*<span class="number">10</span> + *ptr - <span class="string">'0'</span>;</span><br><span class="line">               &#125;</span><br><span class="line">           ptr++;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> num;</span><br><span class="line">       &#125;</span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>;</span><br><span class="line">   ~String_Integer();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">String_Integer::String_Integer(<span class="keyword">char</span> *str)&#123;</span><br><span class="line">   s = <span class="keyword">new</span> <span class="keyword">char</span>(<span class="built_in">strlen</span>(str) + <span class="number">1</span>);</span><br><span class="line">   <span class="built_in">strcpy</span>(s, str);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> String_Integer::show()&#123;</span><br><span class="line">   <span class="keyword">char</span> *ptr = s;</span><br><span class="line">   <span class="keyword">while</span>(*ptr)&#123;</span><br><span class="line">       <span class="built_in">cout</span> &lt;&lt; *ptr;</span><br><span class="line">       ptr++;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">String_Integer::~String_Integer()&#123;</span><br><span class="line">   <span class="keyword">delete</span> []s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">   <span class="keyword">char</span> *s = <span class="string">"ab12  3c00d45ef"</span>;</span><br><span class="line">   <span class="function">String_Integer <span class="title">str</span><span class="params">(s)</span></span>;</span><br><span class="line">   str.show();</span><br><span class="line">   <span class="keyword">int</span> n = str;</span><br><span class="line">   <span class="built_in">cout</span> &lt;&lt; <span class="string">"输出的整数为："</span> &lt;&lt; n;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Problem-12"><a href="#Problem-12" class="headerlink" title="Problem 12"></a>Problem 12</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SET</span>&#123;</span></span><br><span class="line">   <span class="keyword">int</span> *a;</span><br><span class="line">   <span class="keyword">int</span> len;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">   SET(<span class="keyword">int</span> *p, <span class="keyword">int</span> n);</span><br><span class="line">   <span class="keyword">int</span> <span class="keyword">operator</span> ==(<span class="keyword">int</span> m);</span><br><span class="line">   <span class="keyword">friend</span> <span class="keyword">int</span> <span class="keyword">operator</span> ==(SET &amp;s1, SET &amp;s2);</span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>;</span><br><span class="line">   ~SET();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">SET::SET(<span class="keyword">int</span> *p, <span class="keyword">int</span> n)</span><br><span class="line">&#123;</span><br><span class="line">   len = n;</span><br><span class="line">   a = <span class="keyword">new</span> <span class="keyword">int</span>(len);</span><br><span class="line">   <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">       a[i] = p[i];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> SET::<span class="keyword">operator</span> ==(<span class="keyword">int</span> m)</span><br><span class="line">&#123;</span><br><span class="line">   <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">       <span class="keyword">if</span>(m == a[i])</span><br><span class="line">           <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> <span class="keyword">operator</span> ==(SET &amp;s1, SET &amp;s2)</span><br><span class="line">&#123;</span><br><span class="line">   <span class="keyword">if</span>(s1.len != s2.len)</span><br><span class="line">       <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">   &#123;</span><br><span class="line">       <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; s1.len; i++)</span><br><span class="line">           <span class="keyword">if</span>(!(s2 == s1.a[i]))</span><br><span class="line">               <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> SET::print()</span><br><span class="line">&#123;</span><br><span class="line">   <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">   &#123;</span><br><span class="line">       <span class="built_in">cout</span> &lt;&lt; a[i] &lt;&lt; <span class="string">'\t'</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">cout</span> &lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SET::~SET()</span><br><span class="line">&#123;</span><br><span class="line">   <span class="keyword">delete</span> []a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   <span class="keyword">int</span> a[]=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;,b[]=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;,c[]=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;,d[]=&#123;<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>&#125;;</span><br><span class="line">SET s1(a,5),s2(b,5),s3(c,6),s4(d,5);</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">"a:\t"</span>;s1.print();</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">"b:\t"</span>;s2.print();</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">"c:\t"</span>;s3.print();</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">"d:\t"</span>;s4.print();</span><br><span class="line"><span class="keyword">if</span>(s1==s2)<span class="built_in">cout</span>&lt;&lt;<span class="string">"a==b\n"</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="built_in">cout</span>&lt;&lt;<span class="string">"a!=b\n"</span>;</span><br><span class="line"><span class="keyword">if</span>(s1==s3)<span class="built_in">cout</span>&lt;&lt;<span class="string">"a==c\n"</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="built_in">cout</span>&lt;&lt;<span class="string">"a!=c\n"</span>;</span><br><span class="line"><span class="keyword">if</span>(s1==s4)<span class="built_in">cout</span>&lt;&lt;<span class="string">"a==d\n"</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="built_in">cout</span>&lt;&lt;<span class="string">"a!=d\n"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Problem-13"><a href="#Problem-13" class="headerlink" title="Problem 13"></a>Problem 13</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">STR</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">   <span class="keyword">char</span> *s;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">   STR(<span class="keyword">char</span> *p = <span class="number">0</span>);</span><br><span class="line">   STR&amp; <span class="keyword">operator</span> =(STR &amp;str);</span><br><span class="line">   <span class="keyword">friend</span> STR&amp; <span class="keyword">operator</span> +=(STR &amp;str1, STR &amp;str2);</span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>;</span><br><span class="line">   ~STR();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">STR::STR(<span class="keyword">char</span> *p)</span><br><span class="line">&#123;</span><br><span class="line">   <span class="keyword">if</span>(p == <span class="number">0</span>)</span><br><span class="line">       s = <span class="number">0</span>;</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">   &#123;</span><br><span class="line">       s = <span class="keyword">new</span> <span class="keyword">char</span>(<span class="built_in">strlen</span>(p) + <span class="number">1</span>);</span><br><span class="line">       <span class="built_in">strcpy</span>(s, p);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">STR&amp; STR::<span class="keyword">operator</span> =(STR &amp;str)</span><br><span class="line">&#123;</span><br><span class="line">   <span class="keyword">if</span>(s)</span><br><span class="line">       <span class="keyword">delete</span> []s;</span><br><span class="line">   s = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="built_in">strlen</span>(str.s) + <span class="number">1</span>];</span><br><span class="line">   <span class="built_in">strcpy</span>(s, str.s);</span><br><span class="line">   <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">STR&amp; <span class="keyword">operator</span> +=(STR &amp;str1, STR &amp;str2)</span><br><span class="line">&#123;</span><br><span class="line">   <span class="keyword">char</span> *p = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="built_in">strlen</span>(str1.s) + <span class="built_in">strlen</span>(str2.s) + <span class="number">1</span>];</span><br><span class="line">   <span class="built_in">strcpy</span>(p, str1.s);</span><br><span class="line">   <span class="built_in">strcat</span>(p, str2.s);</span><br><span class="line">   <span class="keyword">if</span>(str1.s)</span><br><span class="line">       <span class="keyword">delete</span> []str1.s;</span><br><span class="line">   str1.s = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="built_in">strlen</span>(p) + <span class="number">1</span>];</span><br><span class="line">   <span class="built_in">strcpy</span>(str1.s, p);</span><br><span class="line">   <span class="keyword">return</span> str1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> STR::print()</span><br><span class="line">&#123;</span><br><span class="line">   <span class="built_in">cout</span> &lt;&lt; s &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">STR::~STR()</span><br><span class="line">&#123;</span><br><span class="line">   <span class="keyword">delete</span> []s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   STR str1("Shenzhen"),str2(" University"),str3;</span><br><span class="line">str1.print();</span><br><span class="line">str2.print();</span><br><span class="line">str3=str1+=str2;</span><br><span class="line">str3.print();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Problem-14"><a href="#Problem-14" class="headerlink" title="Problem 14"></a>Problem 14</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pi 3.14</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">container</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="keyword">int</span> radius;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    container(<span class="keyword">int</span> n) &#123;radius = n;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">double</span> <span class="title">square</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">double</span> <span class="title">volume</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">cube</span>:</span><span class="keyword">public</span> container</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    cube(<span class="keyword">int</span> n):container(n)&#123; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">square</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> s = <span class="number">6</span> * radius * radius;</span><br><span class="line">        <span class="keyword">return</span> s;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">volume</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">double</span> v = radius * radius * radius;</span><br><span class="line">        <span class="keyword">return</span> v;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">sphere</span>:</span><span class="keyword">public</span> container</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    sphere(<span class="keyword">int</span> n):container(n)&#123; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">square</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">double</span> s = <span class="number">4</span> * radius * radius * pi;</span><br><span class="line">        <span class="keyword">return</span> s;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">volume</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">double</span> v = (<span class="number">4</span> / <span class="number">3.0</span>) * radius * radius * radius;</span><br><span class="line">        <span class="keyword">return</span> v;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">cylinder</span>:</span><span class="keyword">public</span> container</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">int</span> height;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    cylinder(<span class="keyword">int</span> n, <span class="keyword">int</span> h):container(n)&#123; height = h;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">square</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">double</span> s = <span class="number">2</span> * radius * radius * pi + <span class="number">2</span> * pi * radius * height;</span><br><span class="line">        <span class="keyword">return</span> s;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">volume</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">double</span> v =  radius * radius * pi * height;</span><br><span class="line">        <span class="keyword">return</span> v;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> radius = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">int</span> height = <span class="number">4</span>;</span><br><span class="line">    container *base;</span><br><span class="line">    <span class="function">cube <span class="title">c</span><span class="params">(radius)</span></span>;</span><br><span class="line">    <span class="function">sphere <span class="title">s</span><span class="params">(radius)</span></span>;</span><br><span class="line">    <span class="function">cylinder <span class="title">cy</span><span class="params">(radius, height)</span></span>;</span><br><span class="line">    base = &amp;c;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"正方体表面积为："</span> &lt;&lt; base-&gt;square() &lt;&lt; <span class="built_in">endl</span>;;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"正方形体积为："</span> &lt;&lt; base-&gt;volume() &lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    base = &amp;s;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"球体表面积为："</span> &lt;&lt; base-&gt;square() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"球体体积为："</span> &lt;&lt; base-&gt;volume() &lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    base = &amp;cy;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"圆柱体表面积为："</span> &lt;&lt; base-&gt;square() &lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"圆柱体体积为："</span> &lt;&lt; base-&gt;volume() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="题目集二"><a href="#题目集二" class="headerlink" title="题目集二"></a>题目集二</h2><p>王道论坛计算机机试指南</p><h3 id="贪心算法"><a href="#贪心算法" class="headerlink" title="贪心算法"></a>贪心算法</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iomanip&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> M, N;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; M &gt;&gt; N;</span><br><span class="line">    <span class="keyword">while</span>(M != - <span class="number">1</span> &amp;&amp; N != <span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> storage = M;</span><br><span class="line">        <span class="keyword">float</span> result = <span class="number">0.0</span>;</span><br><span class="line">        <span class="keyword">int</span> J[N], F[N];</span><br><span class="line">        <span class="keyword">float</span> rate[N];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; J[i] &gt;&gt; F[i];</span><br><span class="line">            rate[i] = <span class="keyword">float</span>(J[i]) / F[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(storage != <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">float</span> max = <span class="number">0.0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(rate[i] &gt; max)</span><br><span class="line">                &#123;</span><br><span class="line">                    index = i;</span><br><span class="line">                    max = rate[i];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(storage &gt; F[index] &amp;&amp; F[index] != <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                result += J[index];</span><br><span class="line">                storage -= F[index];</span><br><span class="line">                rate[index] = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                result += storage * rate[index];</span><br><span class="line">                storage = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; fixed &lt;&lt; setprecision(<span class="number">3</span>) &lt;&lt; result &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; M &gt;&gt; N;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="括号匹配"><a href="#括号匹配" class="headerlink" title="括号匹配"></a>括号匹配</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//    char str[100];</span></span><br><span class="line"><span class="comment">//    cin &gt;&gt; str;</span></span><br><span class="line">    <span class="keyword">char</span> str[] = <span class="string">")(rttyy())sss)("</span>;</span><br><span class="line">    <span class="built_in">stack</span>&lt;<span class="keyword">char</span>&gt; S;</span><br><span class="line">    <span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt; index;</span><br><span class="line">    <span class="keyword">int</span> len = <span class="built_in">strlen</span>(str);</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="keyword">char</span> result[len];</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">        result[i] = <span class="string">' '</span>;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(str[i] == <span class="string">'('</span>)&#123;</span><br><span class="line">           S.push(str[i]);</span><br><span class="line">           index.push(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(str[i] == <span class="string">')'</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(S.empty())&#123;</span><br><span class="line">                result[i] = <span class="string">'?'</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                S.pop();</span><br><span class="line">                index.pop();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    result[i] = <span class="string">'\0'</span>;</span><br><span class="line">    <span class="keyword">while</span>(!S.empty())&#123;</span><br><span class="line">        <span class="keyword">int</span> top = index.top();</span><br><span class="line">        index.pop();</span><br><span class="line">        S.pop();</span><br><span class="line">        result[top] = <span class="string">'$'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; result &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="简易计数器-中缀表达式-gt-后缀表达式"><a href="#简易计数器-中缀表达式-gt-后缀表达式" class="headerlink" title="简易计数器[中缀表达式-&gt;后缀表达式]"></a>简易计数器[中缀表达式-&gt;后缀表达式]</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">priority</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> symbol)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> grade = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">switch</span>(symbol)&#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'+'</span>: grade = <span class="number">4</span>;<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'-'</span>: grade = <span class="number">4</span>;<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'*'</span>: grade = <span class="number">5</span>;<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'/'</span>: grade = <span class="number">5</span>;<span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> grade;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">float</span> <span class="title">calculate</span><span class="params">(<span class="keyword">const</span> <span class="keyword">float</span> a, <span class="keyword">const</span> <span class="keyword">char</span> symbol, <span class="keyword">const</span> <span class="keyword">float</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">float</span> result = <span class="number">0.0</span>;</span><br><span class="line">    <span class="keyword">switch</span>(symbol)&#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'+'</span>: result = a + b;<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'-'</span>: result = a - b;<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'*'</span>: result = a * b;<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'/'</span>: result = <span class="keyword">float</span>(a) / b;<span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; a &lt;&lt; <span class="string">' '</span> &lt;&lt; symbol &lt;&lt; <span class="string">' '</span> &lt;&lt; b &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> str[] = <span class="string">"4+2*5-6/3"</span>;</span><br><span class="line">    <span class="built_in">stack</span>&lt;<span class="keyword">char</span>&gt; result;</span><br><span class="line">    <span class="built_in">stack</span>&lt;<span class="keyword">char</span>&gt; S;</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="built_in">strlen</span>(str); i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(str[i] &gt;= <span class="string">'0'</span> &amp;&amp; str[i] &lt;= <span class="string">'9'</span>)</span><br><span class="line">            result.push(str[i]);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(str[i] == <span class="string">'+'</span> || str[i] == <span class="string">'-'</span> || str[i] == <span class="string">'*'</span> || str[i] == <span class="string">'/'</span>)&#123;</span><br><span class="line">            <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span>(S.empty() || S.top() == <span class="string">'('</span>)&#123;</span><br><span class="line">                    S.push(str[i]);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(priority(str[i]) &gt; priority(S.top()))&#123;</span><br><span class="line">                    S.push(str[i]);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="keyword">char</span> top = S.top();</span><br><span class="line">                    result.push(top);</span><br><span class="line">                    S.pop();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(str[i] == <span class="string">'('</span>)</span><br><span class="line">                S.push(str[i]);</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">while</span>(S.top() != <span class="string">'('</span>)&#123;</span><br><span class="line">                    <span class="keyword">char</span> top = S.top();</span><br><span class="line">                    result.push(top);</span><br><span class="line">                    S.pop();</span><br><span class="line">                &#125;</span><br><span class="line">                S.pop();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(!result.empty())&#123;</span><br><span class="line">        <span class="keyword">char</span> top = result.top();</span><br><span class="line">        S.push(top);</span><br><span class="line">        result.pop();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">stack</span>&lt;<span class="keyword">float</span>&gt; C;</span><br><span class="line">    <span class="keyword">while</span>(!S.empty())&#123;</span><br><span class="line">        <span class="keyword">char</span> top = S.top();</span><br><span class="line">        S.pop();</span><br><span class="line">        <span class="keyword">if</span>(top &gt;= <span class="string">'0'</span> &amp;&amp; top &lt;= <span class="string">'9'</span>)&#123;</span><br><span class="line">            C.push(top - <span class="string">'0'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">float</span> b = C.top();</span><br><span class="line">            C.pop();</span><br><span class="line">            <span class="keyword">float</span> a = C.top();</span><br><span class="line">            C.pop();</span><br><span class="line">            <span class="keyword">float</span> result = calculate(a, top, b);</span><br><span class="line">            C.push(result);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">float</span> num = C.top();</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"计算结果："</span> &lt;&lt; num &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="哈夫曼树"><a href="#哈夫曼树" class="headerlink" title="哈夫曼树"></a>哈夫曼树</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    priority_queue&lt;<span class="keyword">int</span>, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;, greater&lt;<span class="keyword">int</span>&gt; &gt; Q;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n) != EOF)&#123;</span><br><span class="line">        <span class="keyword">while</span>(!Q.empty())</span><br><span class="line">            Q.pop();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> x;</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; x;</span><br><span class="line">            Q.push(x);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(Q.size() &gt; <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">int</span> a = Q.top();</span><br><span class="line">            Q.pop();</span><br><span class="line">            <span class="keyword">int</span> b = Q.top();</span><br><span class="line">            Q.pop();</span><br><span class="line">            ans += a + b;</span><br><span class="line">            Q.push(a + b);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="二叉树遍历-前序-中序-gt-后序"><a href="#二叉树遍历-前序-中序-gt-后序" class="headerlink" title="二叉树遍历[前序+中序-&gt;后序]"></a>二叉树遍历[前序+中序-&gt;后序]</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">TNode</span> &#123;</span></span><br><span class="line">    <span class="keyword">char</span> data;</span><br><span class="line">    TNode *lchild, *rchild;</span><br><span class="line">&#125;*Tree;</span><br><span class="line"><span class="keyword">char</span> preOrder[] = <span class="string">"FDXEAG"</span>, inOrder[] = <span class="string">"XDEFAG"</span>;</span><br><span class="line"></span><br><span class="line"><span class="function">Tree <span class="title">createTree</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Tree T = <span class="keyword">new</span> TNode;</span><br><span class="line">    T-&gt;lchild = T-&gt;rchild = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">return</span> T;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">postOrder</span><span class="params">(Tree T)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(T-&gt;lchild != <span class="literal">NULL</span>)</span><br><span class="line">        postOrder(T-&gt;lchild);</span><br><span class="line">    <span class="keyword">if</span>(T-&gt;rchild != <span class="literal">NULL</span>)</span><br><span class="line">        postOrder(T-&gt;rchild);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; T-&gt;data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Tree <span class="title">BuildTree</span><span class="params">(<span class="keyword">int</span> s1, <span class="keyword">int</span> e1, <span class="keyword">int</span> s2, <span class="keyword">int</span> e2)</span></span>&#123;</span><br><span class="line">    Tree T = createTree();</span><br><span class="line">    T-&gt;data = preOrder[s1];</span><br><span class="line">    <span class="keyword">int</span> rootIdx;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="built_in">strlen</span>(inOrder); i++)</span><br><span class="line">        <span class="keyword">if</span>(inOrder[i] == preOrder[s1])&#123;</span><br><span class="line">            rootIdx = i;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">if</span>(rootIdx != s2)&#123; <span class="comment">//左子树非空</span></span><br><span class="line">        T-&gt;lchild = BuildTree(s1 + <span class="number">1</span>, s1 + (rootIdx - s2), s2, rootIdx - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(rootIdx != e2)&#123; <span class="comment">//右子树非空</span></span><br><span class="line">        T-&gt;rchild = BuildTree(s1 + (rootIdx - s2) + <span class="number">1</span>, e1, rootIdx + <span class="number">1</span>, e2);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> T;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%s"</span>, preOrder) != EOF)&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%s"</span>, inOrder);</span><br><span class="line">        <span class="keyword">int</span> len_pre = <span class="built_in">strlen</span>(preOrder), len_in = <span class="built_in">strlen</span>(inOrder);</span><br><span class="line">        Tree T = BuildTree(<span class="number">0</span>, len_pre - <span class="number">1</span>, <span class="number">0</span>, len_in - <span class="number">1</span>);</span><br><span class="line">        postOrder(T);</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="二叉排序树"><a href="#二叉排序树" class="headerlink" title="二叉排序树"></a>二叉排序树</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">TNode</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> data;</span><br><span class="line">    TNode *lchild, *rchild;</span><br><span class="line">&#125;*Tree;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">preOrder</span><span class="params">(Tree T)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(T != <span class="literal">NULL</span>)&#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; T-&gt;data &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">        preOrder(T-&gt;lchild);</span><br><span class="line">        preOrder(T-&gt;rchild);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">inOrder</span><span class="params">(Tree T)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(T != <span class="literal">NULL</span>)&#123;</span><br><span class="line">        inOrder(T-&gt;lchild);</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; T-&gt;data &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">        inOrder(T-&gt;rchild);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">postOrder</span><span class="params">(Tree T)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(T != <span class="literal">NULL</span>)&#123;</span><br><span class="line">        postOrder(T-&gt;lchild);</span><br><span class="line">        postOrder(T-&gt;rchild);</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; T-&gt;data &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Tree <span class="title">Insert</span><span class="params">(Tree T, <span class="keyword">int</span> X)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!T)&#123;</span><br><span class="line">        T = <span class="keyword">new</span> TNode;</span><br><span class="line">        T-&gt;lchild = T-&gt;rchild = <span class="literal">NULL</span>;</span><br><span class="line">        T-&gt;data = X;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(X &gt; T-&gt;data)</span><br><span class="line">        T-&gt;rchild = Insert(T-&gt;rchild, X);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(X &lt; T-&gt;data)</span><br><span class="line">        T-&gt;lchild = Insert(T-&gt;lchild, X);</span><br><span class="line">    <span class="keyword">return</span> T;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n) != EOF)&#123;</span><br><span class="line">        Tree T = <span class="literal">NULL</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> num;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;num);</span><br><span class="line">            T = Insert(T, num);</span><br><span class="line">        &#125;</span><br><span class="line">        preOrder(T);</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        inOrder(T);</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        postOrder(T);</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="同一二叉搜索树序列"><a href="#同一二叉搜索树序列" class="headerlink" title="同一二叉搜索树序列"></a>同一二叉搜索树序列</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">TNode</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> data;</span><br><span class="line">    TNode *lchild, *rchild;</span><br><span class="line">&#125;*Tree;</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> *str;</span><br><span class="line"><span class="keyword">char</span> str1[<span class="number">40</span>], str2[<span class="number">40</span>];</span><br><span class="line"><span class="keyword">int</span> *size;</span><br><span class="line"><span class="keyword">int</span> size1, size2;</span><br><span class="line"></span><br><span class="line"><span class="function">Tree <span class="title">Insert</span><span class="params">(Tree T, <span class="keyword">int</span> X)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(T == <span class="literal">NULL</span>)&#123;</span><br><span class="line">        T = <span class="keyword">new</span> TNode;</span><br><span class="line">        T-&gt;data = X;</span><br><span class="line">        T-&gt;lchild = T-&gt;rchild = <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(X &lt; T-&gt;data)</span><br><span class="line">        T-&gt;lchild = Insert(T-&gt;lchild, X);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(X &gt; T-&gt;data)</span><br><span class="line">        T-&gt;rchild = Insert(T-&gt;rchild, X);</span><br><span class="line">    <span class="keyword">return</span> T;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">preOrder</span><span class="params">(Tree T)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(T != <span class="literal">NULL</span>)&#123;</span><br><span class="line">        str[(*size)++] = T-&gt;data + <span class="string">'0'</span>;</span><br><span class="line">        preOrder(T-&gt;lchild);</span><br><span class="line">        preOrder(T-&gt;rchild);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">inOrder</span><span class="params">(Tree T)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(T != <span class="literal">NULL</span>)&#123;</span><br><span class="line">        inOrder(T-&gt;lchild);</span><br><span class="line">        str[(*size)++] = T-&gt;data + <span class="string">'0'</span>;</span><br><span class="line">        inOrder(T-&gt;rchild);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">postOrder</span><span class="params">(Tree T)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(T != <span class="literal">NULL</span>)&#123;</span><br><span class="line">        postOrder(T-&gt;lchild);</span><br><span class="line">        postOrder(T-&gt;rchild);</span><br><span class="line">        str[(*size)++] = T-&gt;data + <span class="string">'0'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="keyword">while</span>(n != <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">char</span> originTree[<span class="number">20</span>];</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; originTree;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">            <span class="keyword">char</span> compareTree[<span class="number">20</span>];</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; compareTree;</span><br><span class="line">            size1 = <span class="number">0</span>;</span><br><span class="line">            size = &amp;size1;</span><br><span class="line">            str = str1;</span><br><span class="line">            Tree T1 = <span class="literal">NULL</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="built_in">strlen</span>(originTree); j++)</span><br><span class="line">                T1 = Insert(T1, originTree[j] - <span class="string">'0'</span>);</span><br><span class="line">            preOrder(T1);</span><br><span class="line">            inOrder(T1);</span><br><span class="line">            str1[size1] = <span class="string">'\0'</span>;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">strlen</span>(compareTree) != <span class="built_in">strlen</span>(originTree))</span><br><span class="line">                <span class="built_in">cout</span> &lt;&lt; <span class="string">"NO"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                size2 = <span class="number">0</span>;</span><br><span class="line">                size = &amp;size2;</span><br><span class="line">                str = str2;</span><br><span class="line">                Tree T2 = <span class="literal">NULL</span>;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="built_in">strlen</span>(compareTree); j++)</span><br><span class="line">                    T2 = Insert(T2, compareTree[j] - <span class="string">'0'</span>);</span><br><span class="line">                preOrder(T2);</span><br><span class="line">                inOrder(T2);</span><br><span class="line">                str2[size2] = <span class="string">'\0'</span>;</span><br><span class="line">                <span class="built_in">puts</span>(<span class="built_in">strcmp</span>(str1, str2) == <span class="number">0</span> ? <span class="string">"YES"</span> : <span class="string">"NO"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="最大公约数"><a href="#最大公约数" class="headerlink" title="最大公约数"></a>最大公约数</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">gcd</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(b == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        gcd(b, a % b);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a, b;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;a, &amp;b) != EOF)&#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; gcd(a, b) &lt;&lt; <span class="built_in">endl</span>;;</span><br><span class="line">        <span class="keyword">while</span>(a != <span class="number">0</span> &amp;&amp; b != <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">int</span> temp = a;</span><br><span class="line">            a = b;</span><br><span class="line">            b = temp % b;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(a == <span class="number">0</span>)</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; b &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; a &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="最小公倍数"><a href="#最小公倍数" class="headerlink" title="最小公倍数"></a>最小公倍数</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">gcd</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(b == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        gcd(b, a % b);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a, b;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;a, &amp;b) != EOF)&#123;</span><br><span class="line">        <span class="keyword">int</span> c = gcd(a, b);</span><br><span class="line">        <span class="keyword">int</span> l = a / c * b;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; l &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="列出连通集"><a href="#列出连通集" class="headerlink" title="列出连通集"></a>列出连通集</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Vertex int</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> WeightType int</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MaxVertexNum 1000</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> visited[MaxVertexNum];</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">GNode</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> Gv, Ge;</span><br><span class="line">    <span class="keyword">int</span> vexs[MaxVertexNum];</span><br><span class="line">    WeightType G[MaxVertexNum][MaxVertexNum];</span><br><span class="line">&#125;*MGraph;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">ENode</span>&#123;</span></span><br><span class="line">    Vertex v1, v2;</span><br><span class="line">&#125;*Edge;</span><br><span class="line"></span><br><span class="line"><span class="function">MGraph <span class="title">BuildGraph</span><span class="params">(<span class="keyword">int</span> VertexNum)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    MGraph Graph = <span class="keyword">new</span> GNode;</span><br><span class="line">    Graph-&gt;Gv = VertexNum;</span><br><span class="line">    Graph-&gt;Ge = <span class="number">0</span>;</span><br><span class="line">    Vertex v, w;</span><br><span class="line">    <span class="keyword">for</span>(v = <span class="number">0</span>; v &lt; Graph-&gt;Gv; v++)</span><br><span class="line">        <span class="keyword">for</span>(w = <span class="number">0</span>; w &lt; Graph-&gt;Gv; w++)</span><br><span class="line">            Graph-&gt;G[v][w] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; Graph-&gt;Gv; i++)</span><br><span class="line">        Graph-&gt;vexs[i] = i;</span><br><span class="line">    <span class="keyword">return</span> Graph;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Insert</span><span class="params">(MGraph g, Edge e)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    g-&gt;G[e-&gt;v1][e-&gt;v2] = <span class="number">1</span>;</span><br><span class="line">    g-&gt;G[e-&gt;v2][e-&gt;v1] = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DFS</span><span class="params">(MGraph g, <span class="keyword">int</span> i)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    visited[i] = <span class="literal">true</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">' '</span> &lt;&lt; g-&gt;vexs[i];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; g-&gt;Gv; j++)</span><br><span class="line">        <span class="keyword">if</span>(g-&gt;G[i][j] == <span class="number">1</span> &amp;&amp; !visited[j])</span><br><span class="line">            DFS(g, j);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DFSTraverse</span><span class="params">(MGraph g)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; g-&gt;Gv; i++)</span><br><span class="line">        visited[i] = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; g-&gt;Gv; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(!visited[i])&#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"&#123;"</span>;</span><br><span class="line">            DFS(g, i);</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">" &#125;\n"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">BFSTraverse</span><span class="params">(MGraph g)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i, j;</span><br><span class="line">    <span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; g-&gt;Gv; i++)</span><br><span class="line">        visited[i] = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; g-&gt;Gv; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(!visited[i])&#123;</span><br><span class="line">            visited[i] = <span class="literal">true</span>;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"&#123;"</span>;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">' '</span> &lt;&lt; g-&gt;vexs[i];</span><br><span class="line">            q.push(i);</span><br><span class="line">            <span class="keyword">while</span>(!q.empty())</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">int</span> k = q.front();</span><br><span class="line">                q.pop();</span><br><span class="line">                <span class="keyword">for</span>(j = <span class="number">0</span>; j &lt; g-&gt;Gv; j++)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span>(g-&gt;G[k][j] == <span class="number">1</span> &amp;&amp; !visited[j])</span><br><span class="line">                    &#123;</span><br><span class="line">                        visited[j] = <span class="literal">true</span>;</span><br><span class="line">                        <span class="built_in">cout</span> &lt;&lt; <span class="string">' '</span> &lt;&lt; g-&gt;vexs[j];</span><br><span class="line">                        q.push(j);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">" &#125;\n"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> N;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; N;</span><br><span class="line">    MGraph G = BuildGraph(N);</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; G-&gt;Ge;</span><br><span class="line">    <span class="keyword">if</span>(G-&gt;Ge != <span class="number">0</span>)&#123;</span><br><span class="line">       <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G-&gt;Ge; i++)&#123;</span><br><span class="line">            Edge e = <span class="keyword">new</span> ENode;</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; e-&gt;v1 &gt;&gt; e-&gt;v2;</span><br><span class="line">            Insert(G, e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    DFSTraverse(G);</span><br><span class="line">    BFSTraverse(G);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;C++刷题记录&lt;/p&gt;
    
    </summary>
    
    
      <category term="C++" scheme="http://Bithub00.com/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>阅读点滴</title>
    <link href="http://Bithub00.com/2019/08/27/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    <id>http://Bithub00.com/2019/08/27/读书笔记/</id>
    <published>2019-08-27T11:41:18.469Z</published>
    <updated>2019-09-04T14:36:27.132Z</updated>
    
    <content type="html"><![CDATA[<p>这里摘录自己看过的书里受启发的一些句子以及自己的所想<br><a id="more"></a></p><h3 id="《扫起落叶好过冬》—-林达"><a href="#《扫起落叶好过冬》—-林达" class="headerlink" title="《扫起落叶好过冬》— 林达"></a>《扫起落叶好过冬》— 林达</h3><ul><li><p>林奇堡：私刑的发源地<br>对于民众激情的过度赞美是危险的。“人民”和“暴民”之间，并没有一条不可逾越的鸿沟。在失控的人群中，“人民法庭”随意蹂躏和消灭一个生命的情况，就很容易发生。聚集的人群在心理上一旦放任自己，就容易在处置罪犯的借口下，忽略个体生命，放大自己的权力。程序自然会迅速简化，刑罚必然就日趋严峻。而契约规定的严格的司法程序正是对草菅人命的有效约束。</p></li><li><p>阿米绪人的故事<br>一个社会要发动成千上百的人并不难，要达到多数人的一致也不难，难的是公正善待只有百分之几的少数。有时候，少数显得如此人微言轻，他们的生死存亡是如此地微不足道，可是，能否保证这微乎其微地少数得到公平地善待，恰恰是检验文明和人道的试金石，也是决定能否长治久安的一个关键。</p></li><li><p>一个历史学家和他的小镇<br>我们在自己短暂的一生里，所看到的社会、所看到的人和人之间的关系，和历史长河里大时段大范围里呈现的图景是有所不同的，甚至会有很大的差别。短暂一生里，更多的机会是看到了人性之恶，是令人失望的现实。即使是在我们的上半辈子，我们也看到不知有多少人是怀着对人类、对国家、对社会的彻底绝望离开这个世界的。这样的事情，自古以来不知发生了多少。只有在读历史的时候，你能在纸页间经历几百年几千年，你才能看到进步、改善，你才会庆幸自己生活在此时此刻。【我们为什么要读历史】</p></li><li><p>各有一番风景<br>美国宪法之父詹姆斯·麦迪逊认为，政治之所以经常败坏人性，和人们在政治中拉帮结派有关。他认为，单独的个人都有一定得道德要求。独立的个人，须对自己的行为主张负责，更容易有道德心。但是，当一些人结成宗派，就会人为制造虚幻正义，把个人的自私，在虚幻正义下掩盖起来，互相提供行为正当性的保证。所以，小宗派的道德水准，通常低于个人道德。单个好人，会在拉帮结派中放任自己的私心，甚至做出坏事来。</p></li><li><p>科尔曼报告<br>它向国会证明，教育机会的平等，不仅要从教育的投入来考察，即考察学生能够获得的公共教育资源，而且更重要的是，要从教育的结果来考察，因为正是对受教育结果的期望，影响了学生的自我评估，决定了学生的学习状态，也造成了种族、肤色、宗教等因素下，弱势人群教育机会的实质不平等。</p></li><li><p>两千年前那个叫西塞罗的老头儿<br>两千年前的时候，罗马人已经有了人类的初始民主，民主决定的法律，总不算错了吧？西塞罗想想觉得还是不对，假如大众通过一项法律说，现在可以抢劫了，难道就真的能出去抢东西了吗？西塞罗琢磨着，人应该有一种“本性”的东西，它不会“屈从愚氓者的意见和命令”。于是他就找到如伊甸园里那种人的最初状态去了。<br>一旦进了伊甸园，我发现西塞罗还是很有道理。仔细打量的话，人和人之间，真的就有非常近似的那一部分。只要这么一想就明白了：所有的人，都有一些绝对不愿意发生在自己身上的事情。比如说，只要是个正常人，就没人愿意自己被杀被抢的，没人愿意别人骑在自己头上作威作福的，这才是人“自然本源”的状态。人要维护自己这样的生存状态，就是维护人的“自然权利”，这权利与生俱来。就刚才那简单的几个“不愿意”，已经隐含了生命的权利、平等的权利、人身自由的权利等等。维护自然权利的法，就是自然法。<br>所以另一个比西塞罗还要早的罗马老头儿狄摩西尼说，“每一种法律都是另一种发现”。法律不是胡编乱造、随心所欲的，正义的法律是对自然法的发现。<br>【柏拉图的理型论】</p></li><li><p>陪审团已经作出了判决<br>法制制度最关键的一步，就是这个文化本身必须建立起绝对尊重司法的传统。因为论“硬件”来说，司法分支是最弱的一环，它在相当程度上是必须依靠社会共识来维持的。宪政国家的产生，就其历史发展来说，是一个社会依据其长期的经验，首先得出对司法之崇高地位的认可。缺少这种文化上的认可，司法是很容易被破坏的。<br>一旦陪审团宣布被告无罪，任何人，即使是总统和最高法院大法官，都没有权力改变。假如不是这样，那就将是一个打不开的死结，就会引出打着伸张正义旗号的民众私刑，就会走向暴力和血腥。假如不是这样，司法就失去权威，整个法制制度都将崩溃。新奥尔良私刑事件中的意大利裔受难者们，用他们的鲜血，用他们被民众的子弹打得残碎的躯体，为后代美国人重申了非常简单却至为重要的道理，这就是今日美国人在法庭大门口经常听到的话：“陪审团已经作出了判决，我们的制度要求我们，必须尊重陪审团。</p></li><li><p>非法之法不是法<br>实际上，美国的领袖们对立法议会的警惕非常容易理解。读读权利法案那短短十条就明白，它要保障的，是民众个人的权利，是一个一个具体的、分散的、个人的权利，听起来是一回事，只是局部和整体的关系，在实际生活中却根本就是两回事。因为所谓人民的权利，在组成政府的时候，就已经委托给了政府，变成了政府之权力。建国领袖们所担心的，是作为这些个人之集合体的人民，通过他们选出的代表，在具体事务上，侵犯一部分民众的个人权利。<br>多数的暴政和绝对个人专权的暴政，可以在顷刻间转换。美国的建国领袖和同时代的法国革命者不同的是，在他们看来，“多数”并不天然地蕴含着“正确”，多数民众对少数人地镇压，并没有想象中地合理性。所以，对当年的宪法起草者来说，保障民众的个人权利，即使是保障少数人甚至一个人的权利，和防止暴政，特别是多数的暴政，就是同一回事。</p></li><li><p>星期日早晨的谋杀案<br>哪怕再合理的推论，也不足以定罪。定罪必须有超越“合理怀疑”的确凿无疑的证据。所以，被告的辩护律师们常常说的一句话是：”合理怀疑“是我们的救星。在一般人看来，假如被告被发现有强烈的作案动机，应该对被告是不利的，但是在律师看来，远非如此。因为作案动机的存在，通常会引出人们逻辑合理的推论。就可能在这种强烈的逻辑力量下忽略证据，甚至自然而然地就以推理取代证据。这个时候，距离辩护取胜、被告被开释，也就不远了。<br>在这里经常出现的、对种族问题的此类不确切描述，起因于人们尤其是知识阶层，有很强烈的、要表达自己对弱者深切同情，以及要挺身为底层代言的倾向。这是知识阶层由来已久、经久不息的一个情结。这也恰恰旁证了知识阶层和底层事实上的本质差异。这种差异给知识阶层带来越多的不安，他们产生这种表达的意向就越趋强烈。无疑，贫穷与恶劣的生活状态导致罪恶。可是，对这张联系的探究，应该引出的是社会学意义上的如何消除贫困、消灭罪恶根源的研究和行动，而不是对已经结出的罪恶之果表达泛滥的同情，不论这个恶果是个别的罪犯或是群体的暴民。道理很简单：任何罪行都是有受害者的。而知识阶层假如放弃面对犯罪行为的道德立场，甚至提供过分的借口和“理解”，不仅无助于弱势群体自身的演进，甚至可能将他们带入更为危险的困惑和歧途。</p></li><li><p>汉娜的手提箱<br>人类历史有大量的负面经验，即使是在和平时期，每个国家也都有大量负面的现实。人们需要历史的传承，汲取历史的教训，需要面对现实。而与此同时，作为儿童和青少年教育，又要警惕大规模的心理伤害。悲和愤等感情，是正义感的基础，可是一旦过度，很容易走向极端，产生对理性的摒弃。历史教育的目的，是带来一个健康的社会，让新的一代有幸福的生活、健康的心态。他们应该是幽默、睿智、快乐、自尊、富有想象力的一代，而不是一代悲壮的愤怒青年。</p></li><li><p>哪怕在奥斯维辛，绘画依然是美丽的<br>历史学家在摸索的，多是粗大的社会走向之脉络；文学艺术在细细解剖的，却是人们在不由自主中刻意藏匿的内心。在一定程度上，后者是理解前者必不可少的依托；前者又是后者无可离弃的基本背景。</p></li><li><p>《野火集》的启示<br>从中华文化圈里出来，很多人能够做到文字优美、内容正确、逻辑严密，可是，也许是我们习惯了这一文化中“士”的特殊位置，即使理解平等的意义，对自己的定位定调往往还是会“开低走高”。做社会批判时，会忘记自己也是社会的一员。批判的烈度越大，自我的位置就不断上升，不能持之以恒地维护和读者对话的平等。因为在我们的文化中，历来缺少平等地概念，我们自己地“低调”往往只是理智的产物，而不是本能的反应。</p></li><li><p>听一次演讲后的随想<br>他们大多是没有名气的，甚至是被误解的。然而，假如没有他们在一片需要改良的土地上默默耕耘，而只有燃野火者，那么当春天来临，也未见得就能够快快长出健康丰润的树苗来。</p></li></ul><h3 id="《刀锋》—-毛姆"><a href="#《刀锋》—-毛姆" class="headerlink" title="《刀锋》— 毛姆"></a>《刀锋》— 毛姆</h3><ul><li><p>你不觉得或许他正在追求一个深藏在一片未知的云朵中的理想——就像一位天文学家寻找某个仅仅通过数学计算才能知道其存在的星球吗？  </p></li><li><p>我们谁也不能两次涉足于同一条河流，然而，河水流去，随即流来的河水依旧沁人心脾。</p></li></ul><h3 id="《娱乐至死》—-尼尔·波兹曼"><a href="#《娱乐至死》—-尼尔·波兹曼" class="headerlink" title="《娱乐至死》— 尼尔·波兹曼"></a>《娱乐至死》— 尼尔·波兹曼</h3><ul><li><p>我时常想起萧伯纳著名的诗句，理智的人适应环境，而世上所有的进步都依赖不理智的人。麦克卢汉是不理智的，兰斯是不理智的，尼尔也是不理智的。因为这样，所有美好的事才发生了。  </p></li><li><p>根据柏拉图的观点，我们应该把焦点放在人类会话的形式上，而且假定我们会话的形式对于要表达的思想有重大的影响，而且容易表达出来的思想自然会成为文化的组成部分。 </p></li><li><p>犹太人的上帝存在于文字中，或者通过文字而存在，这需要人们进行最精妙的抽象思考。运用图像是亵渎神袛的表现，这样就防止了新的上帝进入。</p></li><li><p>随着印刷术影响的减退，政治、宗教、教育和任何其他构成公共事务的领域都要改变其内容，并且用最适用于电视的表达方式去重新定义。</p></li><li><p>如果我们能够意识到，我们创造的每一种工具都蕴含着超越其自身的意义，那么理解这些隐喻就会容易多了。例如，有人指出，12世纪眼镜的发明不仅使矫正视力成为可能，而且还暗示了人类可以不必把天赋或者缺陷视为最终的命运。 </p></li><li><p>马克思《德意志意识形态》：如果印刷机存在，这世上是否还可能有《伊利亚特》？他反问道：”有了印刷机，那些吟唱、传说和思考难道还能继续吗？这些史诗存在的必备条件难道不会消失吗？“</p></li><li><p>道格拉斯：“在讨论这些问题的时候，沉默比掌声更得体，我希望你们能够用自己的评判力、理解力和良知来听我的演讲，而不是用你们的激情或热情。”……，对于读者更是如此，因为作者并不是一直值得信任的。他们撒谎他们陷入迷茫，他们过于笼统，他们滥用逻辑甚至常识。读者对此必须有备而来，用知识武装好自己。</p></li><li><p>这并不是说，印刷术时代发表的文字就一定都是真实的。文字不能保证内容的真实性，而是形成一个语境，让人们可以问“这是真的还是假的”。</p></li><li><p>“阐释年代”：所有成熟话语所拥有的特征，都被偏爱阐释的印刷术发扬光大：富有逻辑的复杂思维，高度的理性和秩序，对于自相矛盾的憎恶，超常的冷静和客观以及等待受众反应的耐心。</p></li><li><p>《瓦尔登湖》：我们匆匆地建起了从缅因州通往德克萨斯州的磁性电报，但是它们可能并没有什么重要的东西需要交流……我们满腔热情地在大西洋下开通隧道，把新旧世界拉近几个星期，但是到达美国人耳朵里的第一条新闻可能却是阿德雷德公主得了百日咳。</p></li><li><p>从此，来路不明、读者对象不定的新闻开始横扫整个国家。战争、犯罪、交通事故、火灾和水灾——大多是阿德莱德公主得百日咳新闻的社会版本和政治版本——开始成为所谓“今日新闻”的主要内容。……电报使脱离语境的信息合法化，也就是说，信息的价值不再取决于其在社会和政治对策和行动中所起的运用，而是取决于它是否新奇有趣。电报把信息变成了一种商品，一种可以置用处或意义于不顾而进行买卖的东西。</p></li><li><p>行为最终产生的结果并不能成为行为最初的目的；人本性就是自私的，只有判断他行为中私己成分的多与少。</p></li><li><p>马歇尔·麦克卢汉所说的”后视镜“思维：认为一种新媒介只是旧媒介的延伸和扩展，比如汽车只是速度更快的马，电灯是功率更大的蜡烛。他们犯的错误就是完全误解了电视如何重新定义公众话语的意义。</p></li><li><p>宗教改革运动的发起者马丁·路德：如果每个家庭的餐桌上都有上帝的文字，基督徒就不需要教皇来为他们释义了。</p></li><li><p>萧伯纳第一次看见百老汇和四十二街上夜间闪烁的霓虹灯时发表的评论：如果你不识字，这些灯光无疑是美丽的。</p></li><li><p>思考不是表演艺术，而电视需要的是表演艺术…….人们看的以及想要看的是有动感的画面—-成千上万的图片，稍纵即逝却斑斓夺目。正是电视本身的这种性质决定了他必须舍弃思想，来迎合人们都视觉快感的需求，适应娱乐业的发展。</p></li><li><p>和他们一样，你要把注意力放在如何最大限度地实现节目的娱乐价值上。例如，你要为节目选择一个音乐主题。所有的电视新闻节目的开始、结束或者中间都要插入一段音乐。我发现很少有美国人会觉得这样的做法奇怪，这足以证明严肃的公众话语和娱乐之间存在的分界线已经荡然无存…….制造一种情绪，为娱乐提供一个主题，提醒观众使用一个合适的情绪。</p></li><li><p>假信息并不意味着错误的信息，而是意味着使人产生误解的信息——没有依据、毫无关联、支离破碎或流于表面的信息——这些信息让人产生错觉，以为自己知道了很多事实，其实却离事实的真相越来越远。当新闻被包装成一种娱乐形式时，它提供给观众的是娱乐而不是信息。</p></li><li><p>电视信息的娱乐化：节目中加入音乐引导观众情绪  | 新闻通常不超过1分钟，几乎不可能报导一个完整的严肃性新闻  |  紧跟着播放的一系列广告会在瞬间消解新闻的重要性 | 电视屏幕上的图像源源不断出现，不留有时间供观众思考 | 播音员播报任何新闻时保持一种固定不变的、得体的热情，不为播报的新闻内容所影响 | 播音员的容貌须得体，以及讲述者的可信度决定了事件的真实性。</p></li><li><p>不论是释迦牟尼、摩西、耶稣还是穆罕默德、路德，从来没有那个伟大的宗教领袖会给人们他们想要的东西，他们给的是人们应该具备的东西。但电视传教士的不成文规则是：“只有给观众他们想要的东西，你才可以得到市场占有率。”</p></li><li><p>真正的危险不在于宗教已经成为电视节目的内容，而在于电视节目可能会成为宗教的内容。</p></li><li><p>那些经营电视的人从来没有限制我们获得信息，而是不断扩大我们获得信息的途径。也就是说，通过制造大量的娱乐性的、无目的性、无意义的信息，来使真正应该被引起注意的新闻被淹没其中。不采用限制的手段却达到了使特定的信息在操纵下无法流通。</p></li><li><p>杜威《经验与教育》：也许人们对于教育最大的错误认识是，一个人学会的只有他当时正在学习的东西。其实，伴随学习的过程形成持久的态度········也许比拼写课或地理历史课更为重要·······因为这些态度才是在未来发挥重要作用的东西。</p></li><li><p>有两种方法可以让文化精神枯萎，一种是奥威尔式的——文化成为一个监狱，另一种是赫胥黎式的——文化成为一种滑稽戏。</p></li><li><p>奥威尔预言的世界比赫胥黎预言的世界更容易辨认，也更有理由去反对。我们的生活经历已经能够让我们认识监狱，并且知道在监狱大门即将关上的时候要奋力反抗。在弥尔顿、培根、伏尔泰、歌德和杰弗逊这些前辈的精神的激励下，我们一定会拿起武器保卫和平。但是，如果我们没有听到痛苦的哭声呢？谁会拿起武器去反对娱乐？</p></li><li><p>那些提出这些问题的人是得出和我一样的答案还是和马歇尔·麦克卢汉一样的答案并不重要，能够提出答案就行了，提出了问题就是破除了禁忌。</p></li></ul><h3 id="《如彗星划过夜空》—-林达"><a href="#《如彗星划过夜空》—-林达" class="headerlink" title="《如彗星划过夜空》— 林达"></a>《如彗星划过夜空》— 林达</h3><ul><li><p>这是一件非常有意思的事情，人类文明可能在一部分人中间先创造出来，而它被称为是“文明”的原因之一，就是它有能力超越自身利益的局限，有了抽象的人道、人权的思维，而且，还在设计“制度”，保障这样的权益。</p></li><li><p>华盛顿将军：“先生们，请等我戴上眼镜。这么些年，我的头发白了，眼神也不济了。”在华盛顿将军心中，“枪杆子”只是带来了追求自由的一个可能。唯有民众的授权，才是政府权力的合法来源。</p></li><li><p>欠债的农夫一多，就群起要求州议会通过立法，允许他们缓偿债务，要求州里加印纸币，还要求立法强立债权人接受纸币作为还款…….欠债的农夫们走投无路，开始造反，最震动的一次冲突是美国历史上有名的谢思暴动。</p></li><li><p>熟悉英国议会制度的代表们，在费城会议中也设立了全体委员会，作用却不一样。它只是一个矛盾的缓冲设置。这时的表决结果，只相当于委员会推荐方案，是对可行方案的试探。</p></li><li><p>今天人们在讨论的民主，往往都是指政治制度。为什么要去牵扯出“民主是一种思维方式”或者非政治领域的“生活方式”呢？我想，政治制度，其实时需要一个相应的社会文明程度去配合的。在民主制度自然生成的国家，是文明的土壤长出了这颗制度之树，而不是相反。</p></li><li><p>费城制宪会议的另一个规则，是一条条地分别表决提案，任何一条通过之后，都可以再返回来提出异议，要求重新表决。</p></li><li><p>民主意识的一个重要来源是人性的觉醒，从而自然地引发出对底层悲惨状况的同情和不平，进而为他们争取权益。正由于这种同情大多发自有比较优越的社会地位、文明程度较高的阶层，或者说发自知识阶层，因此他们的民主意识从起源来说，都是带着原罪负担的。他们非常容易进入的一个误区，就是会不由自主地要美化底层，以平衡自己的原罪意识。他们会在表达对底层苦难同情的时候，在赞美底层的时候，表现得煽情和夸张，以支撑自己的道德感。他们中的一部分，会要求竭力降低自己的文明水准甚至在行为上表现出反文明和粗俗…….这种倾向符合道德出发点的原始冲动。从法国大革命对平民杀贵族的支持，到一代代的民粹倾向，直至现代美国走到极端的“政治正确”，都是源于同样的出发点。在原罪负担之下，承担原罪感的人群往往是不自信的，他们需要他人对自己做出道德上的肯定。结果就是以过激的平民认同和平民倾向，来达到心理和道德需求上的平衡。</p></li><li><p>所以，我以为知识阶层的所谓道德勇气，一部分应该是表现在对强权的批判上，但更为困难更难做到的，是表现在他不迎合、不取悦于民众上。前者是很容易理解也相对更容易做到的。可是，只有非常少的人，能够有智慧有勇气做到，对强权和民众，都保持应有的独立和批判。这和他是否同情弱者，是否保护弱势人群，其实是两回事。</p></li><li><p>这是一个自然形成的利益诉求。个人在人群中非常弱下，可能被强者吃掉。他因此需要一个社会保护层，有法律抵挡强人，有地方可以申诉，有政府力量的保护，如同在身上加一个保护性的外壳。因此，人的联合、政府组织自然形成。</p></li><li><p>麦迪逊认为：结派会导致人的道德水平下降。个人作为个人行动的时候，都会对自己有一定的道德要求，有人之常情，有恻隐之心，会自觉地压抑人性中自私和恶的一面。可是一群人结成一派行动的时候，就会互相提供行为的正当性，提供派别内部的互相暗示，自我道德要求就会下降，甚至做出在一个人的时候不会做的坏事。</p></li><li><p>只有获得充分信息的持批判态度的大众意见，能够保护民主政府的价值体系。所以，警觉的、无所不晓的、自由的新闻界本身，对实现宪法第一修正案的目的是最为重要的。他说：“没有一个自由的、获得了充分信息的新闻界，就不可能有脱离蒙昧的人民。”</p></li><li><p>在这里，人们仍然有一种信念，他们相信，他们可能要走一段弯路，可能有一段倒退，可是任何威胁只能阻碍人们追求自由的道路，却不可能堵死它。也许今夜没有星辰，可是，他们相信，在云霭之上，仍然有群星在太空闪亮。</p></li></ul><h3 id="《美丽新世界》—-赫胥黎"><a href="#《美丽新世界》—-赫胥黎" class="headerlink" title="《美丽新世界》— 赫胥黎"></a>《美丽新世界》— 赫胥黎</h3><ul><li><p>直到最后，孩童的心灵就是这些暗示，而这些暗示的总和也就是孩童的心灵。不仅仅是孩童的心灵而已。成年人的心灵亦复如此······终其一生而不渝。那用来判断、希冀和下决心的心灵——都由这些暗示所组成。而所有这些暗示都是我们的暗示！</p></li><li><p>长久的追悔，是最可厌的一种情绪，这是所有道德家都同意的。如果你犯了错，就忏悔、努力改正，争取下回做好就是了。绝对不要沉溺在自己的错失里。在污泥中打滚可不是最好的净身方法。</p></li></ul><h3 id="《乌合之众》—-古斯塔夫·勒庞"><a href="#《乌合之众》—-古斯塔夫·勒庞" class="headerlink" title="《乌合之众》— 古斯塔夫·勒庞"></a>《乌合之众》— 古斯塔夫·勒庞</h3><ul><li><p>群体不善推理，却急于采取行动。他们目前的组织赋予了他们巨大的力量。我们目睹其诞生的那些教条，很快也会具有旧式教条的威力，也就是说，不容讨论的专横武断的力量。群众的神权就要取代国王的神权了。  </p></li><li><p>只有环境的单一性，才能造成明显的性格单一性。我曾在其它著作中指出，一切精神结构都包含着各种性格的可能性，环境的突变就会使这种可能性表现出来。这解释了法国国民公会中最野蛮的成员为何原来都是些谦和的公民。 </p></li><li><p>他很难约束自己不产生这样的念头：群体是个无名氏，因此也不必承担责任。这样一来，总是约束着个人的责任感便彻底消失了。  </p></li><li><p>群体在智力上总是低于孤立的个人，但是从感情及其激起的行动这个角度看，群体可以比个人表现得更好或更差，这全看环境如何。一切取决于群体所接受的暗示具有什么性质……刺激群体的因素多种多样，群体总是屈从于这些刺激，因此群体也极为多变。群体很容易做出刽子手的举动，同样也很容易慷慨赴义。</p></li><li><p>孤立的个人很清楚，在孤身一人时，他不能焚烧宫殿或洗劫商店，即使受到这样做的诱惑，他也很容易抵制这种诱惑。但是在成为群体的一员时，他就会意识到人数赋予他的力量，这足以让他生出杀人劫掠的念头，并且会立刻屈从于这种诱惑。</p></li><li><p>群体中的某个人对真相的第一次歪曲，是传染性暗示过程的起点……被派往寻找失散巡洋舰的护航舰“贝勒·波拉号”上，执勤兵突然发出了有一艘遇难船只的信号。而下船去营救落难士兵的官员们发现，那只不过是几根长满树叶的树枝。在这个实例中，可以清楚地看到我们已经解释过的集体幻觉的作用机制。一方面，我们看到一个在期待中观望的群体；另一方面，是执勤者发出海上有遇难船只的信号这样一个暗示。</p></li><li><p>群体推理的特点，是把彼此不同、只在表面上相似的事物搅在一起，而且立刻把具体的事物普遍化。知道如何操纵群体的人，给他们提供的也正是这种论证。包含一系列环节的逻辑论证，对群体来说完全是不可理解的。对于演讲家来说，20本滔滔不绝的长篇论证，尽管它们是认真思考的产物，还不如几句对群众有号召力的口号。</p></li><li><p>拿破仑对国会说：“我通过改宗天主教，终止了旺代战争；通过变成一个穆斯林教徒，在埃及站住了脚；通过成为一名信奉教皇至上的人，赢得了意大利神父的支持。如果我去统治一个犹太人的国家，我也会重修所罗门的神庙。”</p></li><li><p>持政府和帝国的具体工作就是用新的名称把大多数过去的制度重新包装一遍，这就是说，用新名称代替那些能够让群众想起不利形象的名称，因为它们的新鲜能防止这种联想。如商号和行会的税款变成了执照费等…名称的威力如此强大，如果选择得当，它足以使最可恶的事情改头换面，变得能被民众所接受。</p></li><li><p>让人们怀抱着那些希望和幻想吧，不然他们是活不下去的。这就是存在着诸神、英雄和诗人的原因。科学承担起这一任务已有50年的时间，但是在渴望理想的心灵里，科学是有所欠缺的，因为它不敢作出过于慷慨的承诺，因为它不能撒谎。</p></li><li><p>然而群众无论付出多大的代价，他们必须拥有自己的幻想，于是他们便像趋光的昆虫一样，本能地转向那些迎合他们需要的巧舌如簧者。</p></li><li><p>群众从来就没有渴望过真理，面对那些不合口味的证据，他们会拂袖而去，假如谬论对他们有诱惑力，他们更容易崇拜谬论。凡是能向他们供应幻觉的，也可以很容易地成为他们的主人。</p></li><li><p>要让群体相信什么，首先得搞清楚让他们兴奋的感情，并且装出自己也有这种感情的样子……那些知道如何影响他们的演说家，总是诉诸他们的感情而不是他们的理性。逻辑定律对群体不起作用……若演讲者遵循的是自己的思路而不是听众的思路，仅仅这一个事实就会使他不可能产生任何影响。</p></li><li><p>一个人占据着某种位置，拥有一定的财富或头衔，仅仅这些事实，就能使他享有名望，不管他本人多么没有价值。帕斯卡尔十分正确地指出，法袍和假发使法官必不可少的行头。没了这些东西，他们的权威就会损失一半。</p></li><li><p>巴特农神庙按其现存的状态，不过是一堆非常没有意思的破败废墟，但是它的巨大名望却使它看起来不是那个样子，而是与所有的历史记忆联系在一起。</p></li><li><p>各民族一直清楚获得普遍信念的好处，他们本能地知道，这种信念的消失是他们衰败的信号。使罗马人能够征服世界的信念，是他们对罗马的狂热崇拜；当这种信念寿终正寝时，罗马也注定衰亡。</p></li><li><p>每个时代的人都是在一个由相似的传统、意见和习惯组成的基本环境中成长，他们不能摆脱这些东西的桎梏。人的行为首先是受他们的信念支配，也受由这些信念所形成的习惯支配。</p></li><li><p>利用密谋可以推翻一个暴君，而反对牢固的信念又有什么可资利用？人类所知道的唯一真正的暴君，历来就是他们对死人的怀念或他们为自己编织出来的幻觉……躺在坟墓深处的摩西、佛祖、耶稣和默罕穆德，对人类实行着更深刻的转制统治。</p></li><li><p>至于过去引导意见的报业，就像政府一样，它在群众势力面前也变得屈尊俯就。当然，它仍然有相当大的影响，然而这不过是因为它只一味反映群众的意见及其不断的变化。报业既然成了仅仅提供信息的部门，它便放弃了让人接受某种观念或学说的努力。它在公众思想的变化中随波逐流，出于竞争的必要，它也只能这样做，因为它害怕失去自己的读者。最有价值的新闻被夹在各种轻松话题、社会见闻和金融谎言之间。</p></li><li><p>人们的意见还大致存在着一般趋势，它们的产生是因为接受了一些基本的信仰，只根据某人是个君主制的拥护者这一事实，即可断定他持有某些明确的历史观和科学观；只根据某人是共和主义者，便可以说他有着完全相反的观点。</p></li><li><p>候选人可以毫无惧色地承诺最重要地改革。这些夸张能够产生巨大的效果，但它们对未来并没有约束力，因为这需要不断地进行观察，而选民绝对不想为这事操心，他并不想知道自己支持的候选人在实行他所赞成的竞选纲领上走了多远，虽然他以为正是这个纲领使他的选择有了保证。</p></li></ul><h3 id="《达摩流浪者》—-杰克·凯鲁亚克"><a href="#《达摩流浪者》—-杰克·凯鲁亚克" class="headerlink" title="《达摩流浪者》— 杰克·凯鲁亚克"></a>《达摩流浪者》— 杰克·凯鲁亚克</h3><ul><li><p>在钢铁工厂和飞机场遍布的美国，会出现这样一号人物，更是奇上加奇。有贾菲这样的人在，表示着世界还不算太没有希望。我为此而感到高兴。我全身的肌肉都酸痛得要死，而肚子也饿得要命，不过，能够坐在这里和另一个充满热情的年轻人为这个世界祷告，这件事所带给我的安抚，就足以胜过一千个吻和一千句柔情话。</p></li><li><p>一想到这个，我就不禁噗嗤一声笑了出来。我想不出来，除了露宿、攀火车和做自己想做的事情以外，还有什么生活是值得过的，难道是在精神病院里和其它一百个病人聚精会神地盯着电视看吗？</p></li><li><p>你知道吗，我常常开着这辆大东西，在俄亥俄和洛杉矶之间没命地跑来跑去，而我跑一趟的钱，说不定要比你当流浪汉一辈子能赚的还要多。但你不必工作，不需要多少钱，却可以享受人生。到你是你聪明还是我聪明，我实在说不上来。</p></li><li><p>你和我都不是那种愿意为了过优裕的生活而践踏别人的人。我们的理想是找一个安静的地方，永远为所有的有情祷告，而只要等我们都变得够强壮，就可以付诸实行。</p></li></ul><h3 id="《僧侣与哲学家》—-让-弗朗索瓦·何维勒"><a href="#《僧侣与哲学家》—-让-弗朗索瓦·何维勒" class="headerlink" title="《僧侣与哲学家》— 让-弗朗索瓦·何维勒"></a>《僧侣与哲学家》— 让-弗朗索瓦·何维勒</h3><ul><li><p>用同样的方式，我们正眼去看一个念头，追溯它的起源，一样找不到任何具体的东西。当你发现这一点的那一刹那，那个念头就会消失掉。这称为“通过认识念头的本质来解放它”，意思是要认出念头的“空性”。我们一旦解放一个念头，就不会产生连环作用，反而像是从天空中飞过去的一只鸟，消失了却不留痕迹。</p></li><li><p>一个不存在的自我其实没有办法真正被“毁灭”，但是我们可以认出它的不存在性。我们想毁灭的就是那个幻觉，那个错误，那原来并非存在的东西。关于这一点经常有如下的隐喻：如果你进到一个房间，在阴暗的光线下看到一条绳子，以为是一条蛇，你会害怕，你会想逃走，或者想拿一根棍棒把它赶跑。这时候一个人突然把灯打开，你马上看到了，那根本不是一条蛇。事实上，在这个过程之中，什么都没有发生；你也没有“消灭”那条蛇，因为它从来就没有存在过，你只不过是驱除了一个幻觉。</p></li><li><p>我们需要再度分辨科学的种类，一方面是历史科学、心灵科学和人文科学，另外一边是“硬”的科学。后者得到的证据是任何人，不管他的意见是什么，都必须接受的。而前者不断累积见证，增加真理的可能性，但是有一个永远属于“绝对确定”的门槛，是没有办法跨越的。</p></li><li><p>我向你保证，我们无法让一位新几内亚热带雨林的居民相信百分之一的科学发现。我们说话的对象必须有一个相称的心理架构才行。我们必须许多年用一种特定的方式来教育他。同样地，没有打开自己的心来研究修行的人士，也不可能接受这样的成果。这也是需要教育的。“硬”的科学，也就是需要可复制性证据的科学，目标其实不是要解决形而上的问题，也不是要让生命有意义，而是希望用最准确的方式来描述物质世界，如果现实可以被浓缩成物质，意识只不过是神经系统的一个作用，这只是在替科学的运作下一个定义。修行的生物也有它的规则，修行在心中所带出的深沉信仰力量，可以和物质世界进行的实验相当。从一个纯粹修行的观点来观察心的本性，所带来的确定性等同于观察一个因地心引力而坠落的物体。</p></li><li><p>如果内省作为一种科学方法在西方心理学中已经失败而且被抛弃了，那是因为使用它的人没有适当的工具来进行实验。他们完全没有训练，完全没有心灵领域的知识，也完全不知道如何让心平静的技巧，让心背后的本性能够被观察出来。这像一个人用一个不稳定的电表来测电，最后得到的结论是：电是无法测量的。心灵技巧的学习需要精进，你不能一挥手就说不算，就因为它们不属于西方世界的主流思想。怀疑是容易理解的，但是缺乏兴趣，或不愿去印证另外一种方式这才是难以理解的。事实上，反过来说，也会遭遇同样的问题：我认识的一些西藏人绝对不愿意相信人类已经登陆了月球！</p></li><li><p>褊狭有两种主要形态：第一种是当人们没有深入自己宗教的深层意义时，不用纯正的方式实践它，反而拿它作为一面镜子，用来煽动地方性、民族性或国家性的情绪；第二种就是诚恳实行自己宗教的人们深信所信仰的真理，到他们认为可以用任何方式把这些信仰强加到别人身上的地步，因为他们认为这样做是在帮助别人的情况。</p></li><li><p>我们对现象世界的觉知是通过感觉器官，再由一串意识的刹那来感受这些器官送出来的资讯，并加以诠释。于是我们并不在觉知真正的世界，我们觉知的只不过是在我们意识中反映出来的意向。</p></li><li><p>如果一个囚犯想要释放和他同样受苦的伙伴，他必须先想办法挣脱自己的枷锁……如果要有能力帮助众生，你所教导的就是你所实行的。</p></li><li><p>丹增仁波切经常说：“我来西方的目的并不是为了要多创造一两个佛教徒，而是要分享我的经验，关于佛教这几世纪所发展出来的智慧。”他每一次演讲完都会说：“如果你举得我说的任何话有用，请用它，不然就忘掉它吧！”他甚至劝告到其他国家旅行的西藏喇嘛们不要过度强调佛教的教义，而要以一个人的身份对另外一个人提供自己的经验。</p></li><li><p>佛教谈到三种懒惰。第一种很简单，就是把所有时间用在吃饭和睡觉上。第二种就是告诉自己，“像我这样的人绝对不可能达到完美”。佛教的观点中，这种懒惰会让你觉得就算努力也没有意义，你永远无法达到任何心灵上的成就，这种懒惰让自己灰心，反而令自己试都不去试。第三种，也是在这里最切题的，就是把生命浪费在次等重要的工作上，永远不去面对最精要的问题，所有时间都花在解决次要问题上，一个个接一个，在一个永无止境的顺序中，像湖上的涟漪一样。你告诉自己，当你完成了这件或那件事情之后，你会开始寻找你生命的意义。</p></li><li><p>佛说：“不要因为对我的尊敬而相信我的教导。检查它，让你自己重新发掘出真理。”他又说：“我已经为你指引出道路，要不要走下去是你的事。”佛陀的教导就像一本导游手册，解释他自己走向智慧的道路。真正要成为一个佛教徒，我们必须皈依佛陀，并不是要把他当做一个神，而是把他当作一个导游，以及证悟的象征。同时我们要皈依他的教导，就是佛法，但佛法不是教条，而是一条道路。</p></li><li><p>不要只顾着梯子，要记得你要爬向哪里。</p></li></ul><h3 id="《魔鬼经济学》"><a href="#《魔鬼经济学》" class="headerlink" title="《魔鬼经济学》"></a>《魔鬼经济学》</h3><ul><li><p>值得注意的是，这些网站仅仅是将报价罗列了出来，并未参与保险的销售。因此，它们所经手的并非保险，而是信息……三K党的机密情报被爆料给广播和报纸媒体后，申请入会人数开始减少，机要信息如内部的等级分级制度及阶层名称也成为了供人讥讽的笑料……最高法院大法官路易斯·D·布兰戴斯曾写道：“据说阳光是最好的杀菌剂。”</p></li><li><p>信息就是互联网的货币。作为一种媒介，互联网行之有效地将信息从占有方转移到需求方。通常，一如定期人寿保险费的例子，信息以极端零碎的方式存在。在此情况下，互联网就像一块巨大的马蹄形磁铁，将沉入大海的绣花针一根根收集起来。互联网有一项成就，就连最热心积极的消费者保护团体也望尘莫及：它大幅缩小了专家与公众之间的信息差。</p></li><li><p>报纸上的言论听起来更加顺耳——犯罪率的下降要归功于新型的治安策略、灵活的枪支管制和良好的经济形势。我们越来越习惯于从我们触手可及的事物上寻找因果联系，而忽视年代久远、难以理解的现象。我们尤其迷信短期可见的原因，多数时候，这种推断都是正确的。但探讨因果关系时，这种一概而论的思维却常常存在陷阱。</p></li><li><p>这其实是个滑坡谬论——看似毫无意义的个人行为积少成多，就会产生客观的影响。并不是说有选民认识到自己的选票无法左右选举结果而不去投票，会使得选举不复存在。滑坡谬论，是一种非形式谬论，使用连串的因果推论，却夸大了每个环节的因果强度，因此得到不合理的结论。</p></li><li><p>那说90年代的经济繁荣导致了犯罪率的下降，似乎也顺理成章。然而，二者存在相关关系，并不等同于一者导致了另一者。相关关系仅表示，两个因素——姑且称之为X和Y——之间存在某种关系，但你无从判断孰因孰果。</p></li></ul><h3 id="《通往维根码头之路》—-乔治·奥威尔"><a href="#《通往维根码头之路》—-乔治·奥威尔" class="headerlink" title="《通往维根码头之路》— 乔治·奥威尔"></a>《通往维根码头之路》— 乔治·奥威尔</h3><ul><li><p>这个地方开始让我抑郁。不仅仅是因为那些灰尘，异味，和令人生厌的食物，更是由于那种一潭死水又毫无意义的衰退的感觉，那些在地底下工作的人散发出的味道如爬虫一般，那是一种被禁锢在充满污秽的劳作和刻薄的抱怨的泥沼之中，一圈一圈兜兜转转无法消散的气息。像布鲁克夫妇这样的人，最让人忍无可忍的是他们对于同一件事情一遍又一遍发着牢骚的方式。这让你觉得他们并不是活生生的人，而像是某种神神叨叨反复呢喃胡言乱语的幽魂。最后布鲁克夫人那千篇一律、自怜自艾的话语永远都是以“这真的太难了，不是吗？”结尾，一遍又一遍地重复着。</p></li><li><p>北方商人抱着其可恶的“要么成功要么滚蛋”的哲学理念成为十九世纪的主导力量，并至今阴魂不散地统治着我们。这是一类受阿诺德·本涅特启发的人——一类从半个克朗起家，到头来赢得五万英镑的人，他们最可吹嘘之处就是赚了钱之后变得比以前更粗鲁。他们唯一的优点就是会赚钱。我们被教导要推崇这样的人，仅仅是因为他们尽管心胸狭窄、卑鄙、愚昧、贪婪又粗鲁，却有“胆识”，他“成功”了。</p></li><li><p>接下来，你要面对的是西方社会阶级差异的真正秘密……下等人臭，这就是我们被教导的。没有什么喜恶之感能像生理感受这般切肤。种族厌恶、宗教憎恨、教育差异、性格、智力、甚至道德观的差异都可以被跨越，唯有生理上的排斥无从化解。</p></li><li><p>但是你的愿景苍白无力，除非你能抓紧它所牵扯进来的东西，即一个你不得不面对的现实，想要废除阶级差异，等于废除一部分的自我。像我这样，一个典型的中产阶级的一员，叫我说出我想让阶级差异消亡殆尽简直易如反掌。但我所有的行之所至，思之所及都来源于这阶级特质。我所有的观念，我的善与恶、悲与喜、笑与怒、美与丑，本质上都是中产阶级所拥有的概念；我读书、穿衣、饮食的品味，我的幽默，我的礼节，甚至我的一言一行、一平一仄，都是一种在社会阶层中自抬身价的特殊举措。当我意识到这点，我也同样意识到了我在无产阶级背后所给予他们的鼓励和平等的徒负虚名；若我果真想和他接触，我必须彻底改头换面，以至于最终从前的那个自我荡然无存，无人能辨。这里牵涉到的不仅仅是改善工人阶级的生活条件，也不仅仅是避免愚蠢的自命不凡的姿态，而是彻底抛弃中上层阶级的生活态度。</p></li></ul><h3 id="《人性的枷锁》—-毛姆"><a href="#《人性的枷锁》—-毛姆" class="headerlink" title="《人性的枷锁》— 毛姆"></a>《人性的枷锁》— 毛姆</h3><ul><li><p>自己读完的感受：【艺术性地夸大欲望的力量，将人的本性暴露得一览无遗】</p></li><li><p>他明明愿意放弃一切来再和罗斯成为朋友的。他恨自己和罗斯吵架，现在他看到自己让他痛苦了他觉得十分抱歉。但是刚刚那一刻仿佛不是自己了，就好像魔鬼抓住了他，强迫着他违背自己的意愿对罗斯说一些尖酸刻薄的话，尽管他现在恨不得立刻冲去和罗斯握手言和。但是他报仇雪恨的渴望太强烈了。他想要为自己曾经受到的痛苦和侮辱报复罗斯。这是他的骄傲：当然他也知道这很蠢，因为罗斯根本就不会在乎，而他自己却会因此二痛苦。</p></li><li><p>等你长大一点儿你就会明白要让这个世界变成一个尚可容忍的生活场所，第一件事情就是要承认人类的自私是不可避免的。你要求别人对你无私实际上就很荒谬，因为这就是在要求他们为了你而牺牲自己的欲望。他们凭什么要那么做呢？如果你甘心接受世界上每个人都是为了自己而活的，你反而就会对别人要求变少了。那么他们也不会让你失望，而你也会更加宽恕地看待他们。人们在世上只追求一件事情——那就是他们自己的愉悦。</p></li><li><p>菲利普突然意识到了他一直在欺骗自己：并不是自我牺牲逼得他想到了结婚，而是对于一位妻子一个家和爱情的渴望；而现在这一切似乎都在他的手上溜走了，他感到十分的绝望。他想要那些，比世界上任何东西都想要。他有什么好在乎西班牙和西班牙的那些城市呢，什么科尔德瓦，什么多莱多，什么莱昂；那些缅甸的宝塔和南海群岛的环礁湖又对他有什么意义呢？此时此地就是美洲啊。在他看来他以前的所有人生都在追随着其他人通过言语或者文字灌输给他的想法，他从来就没有过自己心底的渴望。他的轨迹永远是被他认为应该做的事情所动摇，而不是被他的整颗心想要做的事情所动摇。他现在不耐烦的把这些所有的一切都抛弃了。他永远都活在未来，而当下永远，永远地都从他的指尖溜走。他自己的想法？他想到了他想要从纷繁复杂又毫无意义地生活中编出一个美丽而复杂的图案来的愿望：他不也见过了那些最简单的图案了吗？那种一个人出生、工作、结婚、生子然后死亡的图案，那不也是最完美的图案吗？屈服于幸福也许就是承认失败，但是这种失败却比千百次的成功都更好啊</p></li></ul><h3 id="《沉默的大多数》—-王小波"><a href="#《沉默的大多数》—-王小波" class="headerlink" title="《沉默的大多数》— 王小波"></a>《沉默的大多数》— 王小波</h3><ul><li><p>假设有某君思想高尚，我是十分敬佩的；可是如果你因此想把我的脑子挖出来扔掉，换上他的，我绝不肯。人既然活着，就有权保证他思想的连续性，到死方休。假如我全盘接受，无异于请那些善良的思想母鸡到我脑子里下蛋，而我总不肯相信，自己的脖子上方，原来是长了一座鸡窝……假设我相信上帝，并且正在为善恶不分而苦恼，我就会请求上帝让我聪明到足以明辨是非的程度，而绝不会请他让我愚蠢到让人家给我灌输善恶标准的程度。假若上帝要我负起灌输的任务，我就要请求他让我在此项任务和下地狱中作一选择，并且我坚定不移的决心是：选择后者。</p></li><li><p>假如要我举出一生最善良的时刻，那我就要举出刚当知青时，当时我一心想要解放全人类，丝毫也没有想到自己。同时我也要承认，当时我愚蠢得很，所以不仅没干成什么事情，反而染上了一身病，丢盔卸甲地讨回城里。现在我认为，愚蠢是一种极大的痛苦；降低人类的智能，乃是一种最大的罪孽。所以，以愚蠢教人，那是善良的人所能犯下的最严重地罪孽。从这个意义上说，我们决不可对善人放松警惕。</p></li><li><p>中国的人文知识分子，有种以天下为己任的使命感，总觉得自己该搞出些给老百姓当信仰的东西。这种想法的古怪之处在于，他们不仅是想当牧师、想当神学家，还想当上帝（中国话不叫上帝，叫“圣人”）。可惜的是，老百姓该信什么，信到哪种程度，你说了并不算哪，这是令人遗憾的。还有一条不令人遗憾，但却要命：你自己也是老百姓；所以弄得不好，就会自己屙屎自己吃。</p></li><li><p>我对国学的看法是：这种东西实在厉害。最可怕之处就在那个“国”字。顶着这个字，谁还敢有不同意见？这种套子套上脖子，想把它再扯下来是枉然的；否则也不至于套了好几千年。它的诱人之处也在这个“国”字，抢到这个制高点，就可以压制一切不同意见；所以它对一切想在思想领域里巧取豪夺的不良分子都有莫大的诱惑力。你说它是史学也好，哲学也罢，我都不反对——倘若此文对正经史学家哲学家有了得罪之处，我深表歉意——但你不该否认它有成为棍子的潜力。想当年，像姚文元之类的思想流氓拿阶级斗争当棍子，打死打伤了无数人。现在有人又在造一根漂亮棍子。它实在太漂亮了，简直是完美无缺。我怀疑除了落进思想流氓手中变成一种凶器之外，它还能有什么用场。鉴于有这种危险，我建议大家都不要做上帝梦，也别做圣人梦，以免头上鲜血淋漓。</p></li><li><p>作为一个知识分子，我对信念的看法是：人活在世上，自会形成信念。对我本人来说，学习自然科学、阅读文学作品、看人文科学的书籍，乃至旅行、恋爱，无不有助于形成我的信念，构造我的价值观。一种学问、一本书，假如不对我的价值观发生作用（姑不论其大小，我要求它是有作用的），就不值得一学，不值得一看。有一个公开的秘密就是：任何一个知识分子，只要他有了成就，就会形成自己的哲学、自己的信念。托尔斯泰是这样，维纳也是这样。到目前为止，我还看不出自己有要死的迹象，所以不想最终皈依什么——这块地方我给自己留着，它将是我一生事业的终结之处，我的精神墓地。不断地学习和追求，这可是人生在世最有趣的事啊，要把这件趣事从生活中去掉，倒不如把我给阉了……你有种美好的信念，我很尊重，但要硬塞给我，我就不那么乐意：打个粗俗的比方，你的把把不能代替我的把把，更不能代替天下人的把把啊。这种看法会遭到反对，你会说：有些人就是笨，老也形不成信念，也管不了自己，就这么浑浑噩噩地活着，简直是种灾难！所以，必须有种普遍适用的信念，我们给它加点压力，灌到他们脑子里！你倒说说看，这再不叫意识形态，什么叫意识形态？</p></li><li><p>有关理性，哲学家有很多讨论，但根据我的切身体会，它的关键是：凡不可信的东西就不信，像我姥姥当年对待亩产三十万斤粮的态度，就叫做有理性。但这一点有时候不容易做到，因为会导致悲观和消极，从理性和乐观两样东西里选择理性颇不容易。理性就像贞操，失去了就不会再有；只要碰上了开心的事，乐观还会回来的。不过这一点很少有人注意到。从逻辑上说，从一个错误的前提什么都能推出来；从实际上看，一个扯谎的人什么都能编出来。所以假如你失去了理性，就会遇到大量令人诧异的新鲜事物，从此迷失在万花筒里，直到碰上了钉子。假如不是遇到了林彪事件，我至今还以为自己真能保卫毛主席哩。</p></li><li><p>我上大学时，有一次我的数学教授在课堂上讲到：我现在所教的数学，你们也许一生都用不到，但我还要教，因为这些知识是好的，应该让你们知道。这位老师的胸襟之高远，使我终生佩服。</p></li><li><p>我认为像我这样的人不在少数：我们热爱艺术、热爱科学，认为它们是崇高的事业，但是不希望这些领域里的事同我为人处世的态度、我对别人的责任、我的爱憎感情发生关系，更不愿因此触犯社会的禁忌。这是因为，这两个方面不在一个论域里，而且后一个论域比前者要严重。打个比方，我像本世纪初年的一个爪哇土著人，此种人生来勇敢，不畏惧战争，但是更重视清洁。换言之，生死和清洁两个领域里，他们更看重后者；因为这个缘故，他们敢于面对枪林弹雨猛冲，却不敢朝着秽物冲杀。荷兰殖民军和他们作战时，就把屎橛子劈面掷去，使他们望风而逃。当我和别人讨论文化问题时，我以为自己的审美情趣、文化修养在经受挑战，这方面的反对意见就如飞来的子弹，不能使我惧怕；而道德方面的非难就如飞来的粪便那样使我胆寒。我的意思当然不是说现在文化的领域是个屎橛纷飞的场所，臭气熏天——决不是的；我只是说，它还有让我胆寒的气味。所以，假如有人以这种态度论争，我要做的第一件事，就是逃到安全距离之外，然后再好言相劝：算了吧，何必呢？</p></li><li><p>前年夏天，我到外地开一个会——在此声明，我很少去开会，这个会议的伙食标准也不高——看到一位男会友穿了一件文化衫，上面用龙飞凤舞的笔迹写着一串英文：OK, Let’s pee！总的来说，这个口号让人振奋，因为它带有积极、振奋的语调，这正是我们都想听到的。但是这个pee是什么意思不大明白，我觉得这个字念起来不大对头。回来一查，果不出我所料，是尿尿的意思。搞明白了全句的意思，我就觉得这话不那么激动人心了。众所周知，我们已过了要人催尿的年龄，在小便这件事上无须别人的鼓励。<br>我提到这件事，不是要讨论如何小便的问题，而是想指出，在做一件事之前，首先要弄明白是在干什么，然后再决定是不是需要积极和振奋。</p></li><li><p>现在有人说，同性恋是一种社会丑恶现象，我反对这种说法，但不想在此详加讨论——我的看法是，同性恋是指一些人和他们的生活，说人家是种社会现象很不郑重。我要是说女人是种社会现象，大家以为如何？——我只想转述一位万事通先生在澡堂里对这个问题发表的宏论，他说：“同性恋那是外国的高级玩意儿，我们这里有些人就会赶时髦……这艾滋病也不是谁想得就配得的！”在他说这些话时，我的一位调查对象就在一边坐着。后者告诉我说，他的同性恋倾向是与生俱来的。他既不是想赶时髦，也不是想得艾滋病。他还认为，生为一个同性恋者，是世间最沉重的事。</p></li><li><p>我想，假如这位万事通先生知道这一切，也不会对同性恋作出轻浮、赶时髦这样的价值评判，除非他对自己说出的话是对是错也不关心。我举这个例子是想说明：伦理道德的论域也和其他论域一样，你也需要先明白有关事实才能下结论，而并非像某些人想象的那样，只要你是个好人，或者说，站对了立场，一切都可以不言自明。不管你学物理也好，学数学也罢，都得想破了脑袋，才能得到一点成绩；假设有一个领域，你在其中想都不用想就能得到大批的成绩，那倒是很开心的事。不过，假如我有了这样的感觉，一定要先去看看心理医生。</p></li><li><p>现在可以说，孔孟程朱我都读过了。虽然没有很钻进去，但我也怕钻进去就爬不出来。如果说，这就是中华文化遗产的主要部分，那我就要说，这点东西太少了，拢共就是人际关系里那么一点事，再加上后来的阴阳五行。这么多读书人研究了两千年，实在太过分。我们知道，旧时的读书人都能把四书五经背得烂熟，随便点出两个字就能知道它在书中什么地方。这种钻研精神虽然可佩，这种做法却十足是神经病。显然，会背诵爱因斯坦原著，成不了物理学家；因为真正的学问不在字句上，而在于思想。就算文科有点特殊性，需要背诵，也到不了这个程度。因为“文革”里我也背过毛主席语录，所以以为，这个调调我也懂——说是诵经念咒，并不过分。</p></li><li><p>“二战”期间，有一位美国将军深入敌后，不幸被敌人堵在了地窖里，敌人在头上翻箱倒柜，他的一位随行人员却咳嗽起来。将军给了随从一块口香糖让他嚼，以此来压制咳嗽。但是该随从嚼了一会儿，又伸手来要，理由是：这一块太没味道。将军说：没味道不奇怪，我给你之前已经嚼了两个钟头了！我举这个例子是要说明，四书五经再好，也不能几千年地念；正如口香糖再好吃，也不能换着人地嚼。当然，我没有这样地念过四书，不知道其中的好处。有人说，现代的科学、文化，林林总总，尽在儒家的典籍之中，只要你认真钻研。这我倒是相信的，我还相信那块口香糖再嚼下去，还能嚼出牛肉干的味道，只要你不断地嚼。我个人认为，我们民族最重大的文化传统，不是孔孟程朱，而是这种钻研精神。过去钻研四书五经，现在钻研《红楼梦》。我承认，我们晚生一辈在这方面差得很远，但也未尝不是一件好事。四书也好，《红楼梦》也罢，本来只是几本书，却硬要把整个大千世界都塞在其中。我相信世界不会因此得益，而是因此受害。</p></li><li><p>任何一门学问，即便内容有限而且已经不值得钻研，但你把它钻得极深极透，就可以挟之以自重，换言之，让大家都佩服你；此后假如再有一人想挟这门学问以自重，就必须钻得更深更透。此种学问被无数的人这样钻过，会成个什么样子，实在难以想象。那些钻进去的人会成个什么样子，更是难以想象。古宅闹鬼，树老成精，一门学问最后可能变成一种妖怪。就说国学吧，有人说它无所不包，到今天还能拯救世界，虽然我很乐意相信，但还是将信将疑。</p></li><li><p>拉封丹寓言里，有一则《大山临盆》，内容如下：大山临盆，天为之崩，地为之裂，日月星辰，为之无光。房倒屋坍，烟尘滚滚，天下生灵，死伤无数……最后生下了一只耗子。中国的人文学者弄点学问，就如大山临盆一样壮烈。当然，我说的不只现在，而且有过去，还有未来。</p></li><li><p>大概把对自己所治之学的狂热感情视作学问本身乃是一种常见的毛病，不独中国人犯，外国人也要犯。…躲在人文学科的领域之内，享受自满自足的大快乐，在目前还是可以的；不过要有人养。在自然科学里就不行：这世界上每年都有人发明永动机，但谁也不能因此发财。</p></li><li><p>我知道，这哲人王也不是谁想当就能当，他必须是品格高洁之士，而且才高八斗，学富五车。在此我举中国古代的哲人王为例——这只是为了举例方便，毫无影射之意——孔子是圣人，也很有学问。夏礼、周礼他老人家都能言之。但假如他来打量我，我就要抱怨说：甭管您会什么礼，千万别来打量我。再举孟子为例，他老人家善养浩然之气，显然是品行高洁，但我也要抱怨道：您养正气是您的事，打量我干什么？这两位老人家的学养再好，总不能构成侵犯我的理由。特别是，假如学养的目的是要打量人的话，我对这种学养的性质是很有看法的。比方说，朱熹老夫子格物、致知，最后是为了齐家、治国、平天下。因为本人不姓朱，还可以免于被齐，被治和被平总是免不了的。假如这个逻辑可以成立，生活就是很不安全的。很可能在我不知道的地方，有一位我全然不认识的先生在努力地格、致，只要他功夫到家，不管我乐意不乐意，也不管他打算怎样下手，我都要被治和平，而且根本不知自己会被修理成什么模样。</p></li><li><p>顺便说一句，有些话只有哲人才能说得出来，比如尼采说：到女人那里去不要忘了带上鞭子。我要替女人说上一句：我们招谁惹谁了。至于这类疯话气派很大，我倒是承认的。总的来说，哲人王藐视人类，比牢头禁子有过之无不及。主张信任哲人王的人会说：只有藐视人类的人才能给人类带来更大利益。我又要说：只有这种人才能给人类带来最大的祸害。从常理来说，倘若有人把你当做了nothing，你又怎能信任他们？</p></li><li><p>让我们像奥威尔一样，想想什么是一加一等于二，七十年代对于大多数中国人来说，是个极痛苦的年代。很多年轻人作出了巨大的自我牺牲，而且这种牺牲毫无价值。想清楚了这些事，我们再来谈谈崇高的问题。就七十年代这个例子来说，我认为崇高有两种：一种是当时的崇高，领导上号召我们到农村去吃苦，说这是一种光荣。还有一种崇高是现在的崇高，忍受了这些痛苦、作出了自我牺牲之后，我们自己觉得这是崇高的。我觉得这后一种崇高比较容易讲清楚。弗洛伊德对受虐狂有如下的解释：假如人生活在一种无力改变的痛苦之中，就会转而爱上这种痛苦，把它视为一种快乐，以便使自己好过一些。对这个道理稍加推广，就会想到：人是一种会自己骗自己的动物。我们吃了很多无益的苦，虚掷了不少年华，所以有人就想说，这种经历是崇高的。这种想法可以使他自己好过一些，所以它有些好作用。很不幸的是它还有些坏作用：有些人就据此认为，人必须吃一些无益的苦、虚掷一些年华，用这种方法来达到崇高。这种想法不仅有害，而且是有病。</p></li><li><p>说到吃苦、牺牲，我认为它是负面的事件。吃苦必须有收益，牺牲必须有代价，这些都属一加一等于二的范畴。我个人认为，我在七十年代吃的苦、作出的牺牲是无价值的，所以这种经历谈不上崇高；这不是为了贬低自己，而是为了对现在和未来发生的事件有个清醒的评价。逻辑学家指出，从正确的前提能够推导出正确的结论，但从一个错误的前提就什么都能够推导出来。把无价值的牺牲看做崇高，也就是接受了一个错误的前提。此后你就会什么鬼话都能说出口来，什么不可信的事都肯信。</p></li><li><p>人有权拒绝一种虚伪的崇高，正如他有权拒绝下水去捞一根稻草。假如这是对的，就对营造或提倡社会伦理的人提出了更高的要求：不能只顾浪漫煽情，要留有余地；换言之，不能够只讲崇高，不讲道理。举例来说，孟子发明了一种伦理学，说亲亲敬长是人的良知良能，孝敬父母、忠君爱国是人间的大义。所以，臣民向君父奉献一切，就是崇高之所在。孟子的文章写得很煽情，让我自愧不如，他老人家要是肯去作诗，就是中国的拜伦；只可惜不讲道理。臣民奉献了一切之后，靠什么活着？再比方说，在七十年代，人们说，大公无私就是崇高之所在。为公前进一步死，强过了为私后退半步生。这是不讲道理的：我们都死了，谁来干活呢？在煽情的伦理流行之时，人所共知的虚伪无所不在；因为照那些高调去生活，不是累死就是饿死——高调加虚伪才能构成一种可行的生活方式。</p></li><li><p>《廊桥遗梦》上演之前，有几位编辑朋友要我去看，看完给他们写点小文章。现在电影都演过去了，我还没去看。这倒不是故作清高，主要是因为围绕着《廊桥遗梦》有种争论，使我觉得很烦，结果连片子都懒得看了。有些人说，这部小说在宣扬婚外恋，应该批判。还有人说，这部小说恰恰是否定婚外恋的，所以不该批判。于是，《廊桥遗梦》就和“婚外恋”焊在一起了。我要是看了这部电影，也要对婚外恋作一评判，这是我所讨厌的事情。</p></li><li><p>在一生的黄金时代里，我们没有欣赏到别的东西，只看了八个戏。现在有人说，这些戏都是伟大的作品，应该列入经典作品之列，以便流传到千秋万代。这对我倒是种安慰——如前所述，这些戏到底有多好我也不知道，你怎么说我就怎么信，但我也有点怀疑，怎么我碰到的全是经典？就说《红色娘子军》吧，作曲的杜鸣心先生显然是位优秀的作曲家，但他毕竟不是柴可夫斯基，……芭蕾和京剧我不懂，但概率论我是懂的。这辈子碰上了八个戏，其中有两个是芭蕾舞剧，居然个个是经典，这种运气好得让人起疑。根据我的人生经验，假如你遇到一种可疑的说法，这种说法对自己又过于有利，这种说法准不对，因为它是编出来自己骗自己的。</p></li><li><p>作品里的艺术性，或则按事急从权的原则，最低限度地出现；或则按得到最高格调的原则，合理地搭配。比如说，径直去写男女之爱，得分为一，搭配成革命的爱情故事，就可以得到一百零一分。不管怎么说，最后总要得到高大全。<br>我反对把一切统一到格调上，这是因为它会把整个生活变成一种得分游戏。一个得分游戏不管多么引人入胜，总不能包容全部生活，包容艺术，何况它根本就没什么意思。假如我要写什么，我就根本不管它格调不格调，正如谈恋爱时我决不从爱祖国谈起。</p></li><li><p>所谓幽闭类型的小说，有这么个特征：那就是把囚笼和噩梦当做一切来写。或者当媳妇，被人烦；或者当婆婆，去烦人；或者自怨自艾；或者顾影自怜；总之，是在不幸之中品来品去。<br>这种想法我很难同意。我原是学理科的，学理科的不承认有牢不可破的囚笼，更不信有摆不脱的噩梦；人生唯一的不幸就是自己的无能……由此得出结论，要努力去做事情，拼命地想问题，这才是自己的救星。</p></li><li><p>总而言之，当一种现象（不管是社会现象还是文学现象）开始贫了的时候，就该兜头给它一瓢凉水。要不然它还会贫下去，就如美国人说的，散发出屁眼气味——我是福尔斯先生热烈的拥护者。我总觉得文学的使命就是制止整个社会变得无趣……当然，你要说福尔斯是反色情的义士，我也没什么可说的。你有权利把任何有趣的事往无趣处理解。     </p></li><li><p>如果说贫穷是种生活方式，捡垃圾和挑大粪只是这种方式的契机。生活方式像一个曲折漫长的故事，或者像一座使人迷失的迷宫。很不幸的是，任何一种负面的生活都能产生很多乱七八糟的细节，使它变得蛮有趣的；人就在这种趣味中沉沦下去，从根本上忘记了这种生活需要改进。用文化人类学的观点来看，这些细节加在一起，就叫做“文化”。有人说，任何一种文化都是好的，都必须尊重。就我们谈的这个例子来说，我觉得这解释不对。在萧伯纳的《英国佬的另一个岛》里，有一位年轻人这么说他的穷父亲：“一辈子都在弄他的那片土、那只猪；结果自己也变成了一片土、一只猪。”要是一辈子都这么兴冲冲地弄一堆垃圾、一桶屎，最后自己也会变成一堆垃圾、一桶屎。所以，我觉得总要想出些办法，别和垃圾、大粪直接打交道才对。</p></li><li><p>他老人家还说，须知参差多态，乃是幸福的本源。反过来说，呆板无趣就是不幸福——正是这句话使我对他有了把握。一般来说，主张扼杀有趣的人总是这么说的：为了营造至善，我们必须做出这种牺牲。但却忘记了让人们活着得到乐趣，这本身就是善；因为这点小小的疏忽，至善就变成了至恶……</p></li><li><p>我常听人说：这世界上哪有那么多有趣的事情。人对现实世界有这种评价、这种感慨，恐怕不能说是错误的。问题就在于应该做点什么。这句感慨是个四通八达的路口，所有的人都到达过这个地方，然后在此分手。有些人去开创有趣的事业，有些人去开创无趣的事业。前者以为，既然有趣的事不多，我们才要做有趣的事。后者经过这一番感慨，就自以为知道了天命，此后板起脸来对别人进行说教。我以为自己是前一种人，我写作的起因就是：既然这世界上有趣的书是有限的，我何不去试着写几本——至于我写成了还是没写成，这是另一个问题，我很愿意就这后一个问题进行讨论，但很不愿有人就头一个问题来和我商榷。</p></li><li><p>对我自己来说，心胸是我在生活中想要达到的最低目标。某件事有悖于我的心胸，我就认为它不值得一做；某个人有悖于我的心胸，我就觉得他不值得一交；某种生活有悖于我的心胸，我就会以为它不值得一过。罗素先生曾言，对人来说，不加检点的生活，确实不值得一过。我同意他的意见：不加检点的生活，属于不能接受的生活之一种。人必须过他可以接受的生活，这恰恰是他改变一切的动力。</p></li><li><p>知识另有一种作用，它可以使你生活在过去、未来和现在，使你的生活变得更充实、更有趣。这其中另有一种境界，非无知的人可解。不管有没有直接的好处，都应该学习——持这种态度来求知更可取。大概是因为我曾独自一人度过了求知非法的长夜，所以才有这种想法……当然，我这些说明也未必能服人。反对我的人会说，就算你说的属实，但我就愿意只生活在现时现世！我就愿意得些能见得到的好处！有用的我学，没用的我不学，你能奈我何？……假如执意这样放纵自己，也就难以说服。罗素曾经说：对于人来说，不加检点的生活，确实不值得一过。他的本意恰恰是劝人不要放弃求知这一善行。抱着封闭的态度来生活，活着真的没什么意思。</p></li><li><p>有一种说法是这样的：人在年轻时，心气总是很高的，最后总要向现实投降。我刚刚过了44岁生日，在这个年龄上给自己做结论似乎还为时过早。但我总觉得，我这一生决不会向虚无投降。我会一直战斗到死。</p></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;这里摘录自己看过的书里受启发的一些句子以及自己的所想&lt;br&gt;
    
    </summary>
    
    
      <category term="读书" scheme="http://Bithub00.com/tags/%E8%AF%BB%E4%B9%A6/"/>
    
  </entry>
  
  <entry>
    <title>Selenium TypeError  __init__() takes 2 positional arguments but 3 were given_解决方案</title>
    <link href="http://Bithub00.com/2019/08/21/TypeError/"/>
    <id>http://Bithub00.com/2019/08/21/TypeError/</id>
    <published>2019-08-21T07:33:10.543Z</published>
    <updated>2019-08-21T07:51:43.022Z</updated>
    
    <content type="html"><![CDATA[<h3 id="错误描述"><a href="#错误描述" class="headerlink" title="错误描述"></a>错误描述</h3><p>执行以下代码时会报错：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">wait = WebDriverWait(browser, <span class="number">10</span>)</span><br><span class="line">input = wait.until</span><br><span class="line">(</span><br><span class="line">    EC.presence_of_element_located</span><br><span class="line">    (</span><br><span class="line">        By.ID, <span class="string">'search'</span> </span><br><span class="line">    )</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p><a id="more"></a><p>PyCharm会提示：TypeError: <strong>init</strong>() takes 2 positional arguments but 3 were given。</p><h3 id="问题来源"><a href="#问题来源" class="headerlink" title="问题来源"></a>问题来源</h3><p>在<a href="https://github.com/SeleniumHQ/selenium/blob/80adb709873815b88bb57494a6908f8b86285766/py/selenium/webdriver/support/expected_conditions.py#L53" target="_blank" rel="noopener">expected conditions.py</a>中找到<a href="https://github.com/SeleniumHQ/selenium/blob/80adb709873815b88bb57494a6908f8b86285766/py/selenium/webdriver/support/expected_conditions.py#L53" target="_blank" rel="noopener">presence_of_element_located</a>类</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">presence_of_element_located</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="string">""" An expectation for checking that an element is present on the DOM</span></span><br><span class="line"><span class="string">    of a page. This does not necessarily mean that the element is visible.</span></span><br><span class="line"><span class="string">    locator - used to find the element</span></span><br><span class="line"><span class="string">    returns the WebElement once it is located</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, locator)</span>:</span></span><br><span class="line">        self.locator = locator</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span><span class="params">(self, driver)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> _find_element(driver, self.locator)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">EC.presence_of_element_located</span><br><span class="line">    (</span><br><span class="line">        By.ID, <span class="string">'search'</span> </span><br><span class="line">    )</span><br></pre></td></tr></table></figure><p>这里如果不加小括号，相当于输入了三个参数:self、By.ID、’search’，而presence_of_element_located类的_init_方法取的是两个参数self、locator，其中locator调用的是一个tuple(元组)，所以添加小括号后将(By.ID, ‘search’)作为一个整体对应于一个参数</p><h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><p>添加小括号<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">EC.presence_of_element_located</span><br><span class="line">    (</span><br><span class="line">        (By.ID, <span class="string">'search'</span> )</span><br><span class="line">    )</span><br></pre></td></tr></table></figure></p><h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><ol><li><a href="https://stackoverflow.com/questions/23661734/selenium-visibility-of-element-located-init-takes-exactly-2-arguments" target="_blank" rel="noopener">stackoverflow</a></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;错误描述&quot;&gt;&lt;a href=&quot;#错误描述&quot; class=&quot;headerlink&quot; title=&quot;错误描述&quot;&gt;&lt;/a&gt;错误描述&lt;/h3&gt;&lt;p&gt;执行以下代码时会报错：&lt;br&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;wait = WebDriverWait(browser, &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;input = wait.until&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    EC.presence_of_element_located&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        By.ID, &lt;span class=&quot;string&quot;&gt;&#39;search&#39;&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="python" scheme="http://Bithub00.com/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>word转pdf图片避免压缩</title>
    <link href="http://Bithub00.com/2019/08/20/pdf/"/>
    <id>http://Bithub00.com/2019/08/20/pdf/</id>
    <published>2019-08-20T03:24:15.386Z</published>
    <updated>2019-08-20T03:48:48.633Z</updated>
    
    <content type="html"><![CDATA[<p>平时生活中经常会需要将word转换成pdf，比如个人简历，然而直接使用word的另存为pdf的话，文字部分虽然清晰，但会造成图像的失真。<br><a id="more"></a><br>如果是简历的话自己的照片就糊成一团了，这第一印象就不好了，即使是用网上所说的调整什么压缩选项也没用，该失真还是失真，今天记录一种可行的方法，需要用到Adobe pdf软件，相信很多人都有安装。</p><ul><li>首先，在编辑好的word中点击文件-打印，打印机选择Adobe pdf：</li></ul><p><img src="https://s2.ax1x.com/2019/08/20/mGKRf0.png" alt="adobe pdf"></p><ul><li>接着，点击打印机属性，默认设置这里选择下拉菜单的第一项印刷质量，然后点击编辑：</li></ul><p><img src="https://s2.ax1x.com/2019/08/20/mGMVc8.png" alt="印刷质量"></p><ul><li>左边列表中选择“图像”，然后将“彩色图像”这一区域的采样和压缩选项关闭：</li></ul><p><img src="https://s2.ax1x.com/2019/08/20/mGMsgK.png" alt="关闭采样和压缩">这里的300可以自己设置，数值越大图像质量越好，当然转换的pdf文件也就越大</p><ul><li>可以选择左下角的另存为保存设置，方便下次使用，或者直接点击确定，也会提示你进行保存：</li></ul><p><img src="https://s2.ax1x.com/2019/08/20/mG1E1x.png" alt="另存为"></p><ul><li><p>保存完后，回到刚刚的窗口，在默认设置中选择刚刚保存的设置，点击确定，然后在打印页面选择打印就可以了，这时候输出的pdf图像就不会失真</p></li><li><p>虽然图像不会失真，但是pdf文件往往也会变大了很多，不便于邮件发送和查看，这时候推荐一个pdf压缩的网站：<a href="https://www.ilovepdf.com/zh-cn" target="_blank" rel="noopener">ilovepdf</a>，对自己的pdf进行压缩就可以了</p></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;平时生活中经常会需要将word转换成pdf，比如个人简历，然而直接使用word的另存为pdf的话，文字部分虽然清晰，但会造成图像的失真。&lt;br&gt;
    
    </summary>
    
    
      <category term="pdf" scheme="http://Bithub00.com/tags/pdf/"/>
    
  </entry>
  
  <entry>
    <title>RUC与AOC</title>
    <link href="http://Bithub00.com/2019/08/07/ROC%E4%B8%8EAUC/"/>
    <id>http://Bithub00.com/2019/08/07/ROC与AUC/</id>
    <published>2019-08-07T07:38:52.547Z</published>
    <updated>2019-08-07T12:00:22.361Z</updated>
    
    <content type="html"><![CDATA[<p>用本文记录自己对ROC曲线与AUC值的学习和理解<br><a id="more"></a></p><h3 id="ROC曲线定义"><a href="#ROC曲线定义" class="headerlink" title="ROC曲线定义"></a>ROC曲线定义</h3><p>ROC曲线与AUC值常被用来评价一个二分类器的好坏，以下内容出自项亮《推荐系统实践》的“分类问题”一节：</p><blockquote><p>对于二类分类问题常用的评价指标是精确率(precision)和召回率(recall)，通常以关注的类为正类，其他类为负类，分类器可将实例分成正类(positive)和负类(negative)，预测时会出现4种情况：  </p><ul><li>TP (True Positice)——将正类预测为正类数</li><li>FN (False Negative)——将正类预测为负类数</li><li>FP (False Positive)——将负类预测为正类数</li><li>TN (True Negative)——将负类预测为负类数  </li></ul><p>精确率定义为</p><script type="math/tex; mode=display">P =\frac{TP}{TP + FP}</script><p>召回率定义为</p><script type="math/tex; mode=display">R =\frac{TP}{TP + FN}</script></blockquote><p>而ROC曲线与上面的定义有关，FPR(False Positive Rate)为x轴，它以TPR(True Positive Rate)为y轴，它们的定义分别为：</p><script type="math/tex; mode=display">\begin{aligned}TPR & = \frac{TP}{TP+FN} \\FPR & =1-\frac{TN}{TN+FP} \\& = \frac{FP}{TN+FP}\end{aligned}</script><p>可以看到，TPR与召回率的定义是一样的，直观理解是：</p><ul><li>横坐标：伪正类率(False positive rate， FPR)，<strong>预测为正但实际为负</strong>的样本占所有<strong>负例样本</strong>的比例；</li><li>纵坐标：真正类率(True positive rate， TPR)，<strong>预测为正且实际为正</strong>的样本占所有<strong>正例样本</strong>的比例。</li></ul><p>其实ROC的曲线的横坐标和纵坐标是没有相关性的，不能把ROC曲线当成函数曲线来分析，应该把它看成无数个点，每个点都代表一个分类器，其横纵坐标代表了这个分类器的性能。为了更好的理解ROC曲线，引入ROC空间的概念：<br><img src="https://s2.ax1x.com/2019/08/07/eIKD5d.png" alt="ROC空间"></p><p>A,B,C,C’为四个分类器，指标如下：<br><img src="https://s2.ax1x.com/2019/08/07/eI82Mn.png" alt="分类器"></p><p>其中C’的性能最好，B的准确率为0.5，几乎是随即分类，图中左上角的点为完美分类，它代表所有的分类完全正确，分类为1的点完全正确，分类为0的点没有错误。<br>在一个二分类模型中，分类器给出每个实例为正类的概率，那么通过设定一个阈值如0.6，概率大于等于0.6的为正类，小于0.6的为负类。对应的就可以算出一组(FPR,TPR)，在平面中得到对应坐标点。随着阈值的逐渐减小，越来越多的实例被划分为正类，但是这些正类中同样也掺杂着真正的负实例，即TPR和FPR会同时增大。阈值最大时，对应坐标点为(0,0)，阈值最小时，对应坐标点(1,1)</p><p>典型的ROC曲线：<br><img src="https://s2.ax1x.com/2019/08/07/eI8jZ6.png" alt="eI8jZ6.png"></p><p>理想情况下，TPR应该接近1，FPR应该接近0。ROC曲线上的每一个点对应于一个阈值，对于一个分类器，每个阈值下会有一个TPR和FPR。比如阈值最大时，TP=FP=0，对应于原点；阈值最小时，TN=FN=1，对应于右上角的点(1,1)。</p><h3 id="绘制ROC曲线"><a href="#绘制ROC曲线" class="headerlink" title="绘制ROC曲线"></a>绘制ROC曲线</h3><p>对于一个特定的分类器和测试数据集，显然只能得到一个分类结果，即一组FPR和TPR结果，而要得到一个曲线，我们实际上需要一系列FPR和TPR的值，如何得到呢？办法就是从阈值下手。分类器的一个重要功能是“概率输出”，即表示分类器认为某个样本具有多大的概率属于正样本（或负样本）。<br>假如我们已经得到了所有样本的概率输出（属于正样本的概率），现在的问题是如何改变阈值从而得到不同的PPR和TPR结果。根据每个测试样本属于正样本的概率值从大到小排序，下图是一个示例，图中共有20个测试样本，“Class”一栏表示每个测试样本真正的标签（p表示正样本，n表示负样本），“Score”表示每个测试样本属于正样本的概率。</p><p><img src="https://s2.ax1x.com/2019/08/07/eII1PK.png" alt="eII1PK.png"></p><p>接下来从高到低，依次将“Score”值作为阈值，当测试样本属于正样本的概率大于或等于这个阈值时，我们认为它为正样本，否则为负样本。举例来说，对于图中的第4个样本，其“Score”值为0.6，那么样本1，2，3，4都被认为是正样本，因为它们的“Score”值都大于等于0.6，而其他样本则都认为是负样本。每次选取一个不同的阈值，我们就可以得到一组FPR和TPR，即ROC曲线上的一点。这样一来，我们一共得到了20组FPR和TPR的值，将它们画在ROC曲线的结果如下图：</p><p><img src="https://s2.ax1x.com/2019/08/07/eIIdat.png" alt="eIIdat.png"></p><p>当我们将阈值设置为1和0时，分别可以得到ROC曲线上的(0,0)和(1,1)两个点。将这些(FPR,TPR)对连接起来，就得到了ROC曲线。当阈值取值越多，ROC曲线越平滑。<br>其实并不一定要得到每个测试样本是正样本的概率值，只要得到这个分类器对该测试样本的“评分值”即可（评分值并不一定在(0,1)区间）。评分越高，表示分类器越肯定地认为这个测试样本是正样本，而且同时使用各个评分值作为阈值。</p><h3 id="AUC值定义"><a href="#AUC值定义" class="headerlink" title="AUC值定义"></a>AUC值定义</h3><p>AUC (Area Under Curve) 被定义为ROC曲线下的面积，这个面积的数值不会大于1。又由于ROC曲线一般都处于y=x这条直线的上方，所以AUC的取值范围一般在0.5和1之间。使用AUC值作为评价标准是因为很多时候ROC曲线并不能清晰的说明哪个分类器的效果更好，而作为一个数值，对应AUC更大的分类器效果更好。<br>将AUC值看成一个概率值，当你随机挑选一个正样本以及一个负样本，当前的分类算法根据计算得到的Score值将这个正样本排在负样本前面的概率就是AUC值。当然，AUC值越大，当前的分类算法越有可能将正样本排在负样本前面，即能够更好的分类。<br>从AUC判断分类器（预测模型）优劣的标准：  </p><ul><li>AUC = 1，完美分类器，采用这个预测模型时，存在至少一个阈值能得出完美预测。绝大多数预测的场合，不存在完美分类器。</li><li>0.5 &lt; AUC &lt; 1，优于随机猜测。这个分类器（模型）妥善设定阈值的话，能有预测价值。</li><li>AUC = 0.5，跟随机猜测一样（例：丢铜板），模型没有预测价值。</li><li>AUC &lt; 0.5，比随机猜测还差；对预测结果取反之后就优于随机猜测。</li></ul><p>三种AUC值示例：<br><img src="https://s2.ax1x.com/2019/08/07/eIILZR.png" alt="eIILZR.png"></p><h3 id="为什么用ROC曲线"><a href="#为什么用ROC曲线" class="headerlink" title="为什么用ROC曲线"></a>为什么用ROC曲线</h3><p>既然已经这么多评价标准，为什么还要使用ROC和AUC呢？因为ROC曲线有个很好的特性：当测试集中的正负样本的分布变化的时候，ROC曲线能够保持不变。在实际的数据集中经常会出现类不平衡（class imbalance）现象，即负样本比正样本多很多（或者相反），而且测试数据中的正负样本的分布也可能随着时间变化。下图是ROC曲线和Precision-Recall曲线的对比：</p><p><img src="https://s2.ax1x.com/2019/08/07/eIokdI.png" alt="eIokdI.png"></p><p>在上图中，(a)和(c)为ROC曲线，(b)和(d)为Precision-Recall曲线。(a)和(b)展示的是分类其在原始测试集（正负样本分布平衡）的结果，(c)和(d)是将测试集中负样本的数量增加到原来的10倍后，分类器的结果。可以明显的看出，ROC曲线基本保持原貌，而Precision-Recall曲线则变化较大。</p><h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul><li><a href="https://en.wikipedia.org/wiki/Receiver_operating_characteristic" target="_blank" rel="noopener">维基百科</a></li><li><a href="http://alexkong.net/2013/06/introduction-to-auc-and-roc/" target="_blank" rel="noopener">孔明的博客</a></li><li><a href="https://blog.csdn.net/abcjennifer/article/details/7359370" target="_blank" rel="noopener">ROC曲线-阈值评价标准</a></li><li><a href="https://www.jianshu.com/p/c61ae11cc5f6" target="_blank" rel="noopener">简书</a></li><li><a href="http://www.cnblogs.com/dlml/p/4403482.html" target="_blank" rel="noopener">博客园</a></li><li><a href="https://www.zhihu.com/question/30643044" target="_blank" rel="noopener">知乎问答</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;用本文记录自己对ROC曲线与AUC值的学习和理解&lt;br&gt;
    
    </summary>
    
    
      <category term="评价指标" scheme="http://Bithub00.com/tags/%E8%AF%84%E4%BB%B7%E6%8C%87%E6%A0%87/"/>
    
  </entry>
  
  <entry>
    <title>推荐系统学习记录</title>
    <link href="http://Bithub00.com/2019/08/05/%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F/"/>
    <id>http://Bithub00.com/2019/08/05/推荐系统/</id>
    <published>2019-08-05T11:40:06.163Z</published>
    <updated>2019-11-18T11:39:31.396Z</updated>
    
    <content type="html"><![CDATA[<p>用本文记录学习推荐系统的过程，以及一些实用的资料与资源。<br><a id="more"></a></p><h2 id="推荐系统数据集"><a href="#推荐系统数据集" class="headerlink" title="推荐系统数据集"></a>推荐系统数据集</h2><ol><li><a href="http://cseweb.ucsd.edu/~jmcauley/datasets.html" target="_blank" rel="noopener">UCSD</a></li><li><a href="https://gist.github.com/entaroadun/1653794" target="_blank" rel="noopener">github</a></li><li><a href="https://www.datalearner.com/data" target="_blank" rel="noopener">科研数据共享列表</a></li></ol><h2 id="基于隐式反馈数据的推荐系统【理论及python实践】"><a href="#基于隐式反馈数据的推荐系统【理论及python实践】" class="headerlink" title="基于隐式反馈数据的推荐系统【理论及python实践】"></a>基于隐式反馈数据的推荐系统【理论及python实践】</h2><blockquote><p>Yifan Hu,Yehuda Koren,Chris Volinsky.<a href="http://yifanhu.net/PUB/cf.pdf" target="_blank" rel="noopener">Collaborative Filtering for Implicit Feedback Datasets</a>[J].IEEE International Conference on Data Mining，2008</p></blockquote><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>隐式反馈(Implict)数据就是用户的行为数据，包括点击，浏览和停留等，它不像评分和点赞一样直观地表示了用户的喜好。实际情况中像评分这种显式数据往往很难获得，因为它输入用户额外的进行操作，而像点击这种隐式反馈的数据，是随着用户的行为自然产生的，不需要额外的获取成本，因此实际情况中隐式反馈的数据规模要远大于显式反馈，因此很有必要研究基于隐式反馈数据的推荐系统</p><p>隐式反馈数据的特征：</p><ol><li>没有负样本。不同于评分，用户可以通过打低分来表达对某个物品的厌恶，我们只能通过点击猜测用户可能对某个物品有偏好，而不能通过没有点击来说明用户不喜欢，可能只是他还没接触过这个物品。处理显式数据时，缺失的评分项可以当作缺失值处理，而处理隐式数据时，为了避免只得到正向反馈，必须要对数据整体进行分析。</li><li>隐含很多的噪声数据。例如用户购买某个物品，不代表他一定喜欢这个物品，可能只是作为礼物或者其它原因，而给一个物品打高分可以很大程度上表示他偏好这个用品。</li><li>数值含义不同。在显式数据里，数值的含义代表偏好程度，如评分；而隐式数据里，数值代表置信度，往往表现为行为的频率，例如观看次数等等。频率越高，我们越能确定它与用户的偏好相关联，而不是一个偶然性情况。</li><li>评价指标不同。传统的推荐系统可以使用如均方根误差(Mean Square Error)来判断预测的好坏，而隐式数据上会有不同。</li></ol><h3 id="符号定义"><a href="#符号定义" class="headerlink" title="符号定义"></a>符号定义</h3><p>$r_{ui}$定义为用户$u$对物品$i$的一次观测值，例如购买物品的次数或浏览网页的次数，在电视节目推荐中，它代表完整观看某个节目的次数，0.7表示观看了节目的70%。区别于显式数据将空缺数据当作缺失值处理，我们将缺失值置为0，表示没有此观测记录。</p><h3 id="隐语义模型"><a href="#隐语义模型" class="headerlink" title="隐语义模型"></a>隐语义模型</h3><p>隐语义模型通过用户特征向量$x_u\in R^f$和物品特征向量$y_i\in R^f$来进行预测，预测评分用上面两个向量的内积形式表示：$\hat{r}_{ui}=x_u^Ty_i$，具体细节可见另一篇博客的<a href="http://www.bithub00.com/2019/04/12/imputing%20structured%20missing%20values%20in%20spatial%20data%20with%20clsutered%20adversarial%20matrix%20factorization/" target="_blank" rel="noopener">矩阵分解引入</a>部分。目标函数表示为：</p><script type="math/tex; mode=display">min_{x_*,y_*}\sum_{r_{ui}\ is\ known}(r_{ui}-x_u^Ty_i)^2+\lambda(\mid\mid x_u \mid\mid^2+\mid\mid y_i \mid\mid^2)</script><p>公式中的$\lambda$作为正则化参数，用于<a href="http://www.bithub00.com/2019/04/03/%E8%8C%83%E6%95%B0/" target="_blank" rel="noopener">约束</a>模型，参数的求解常使用随机梯度下降。然而这种方法在应用于隐式反馈数据时需要做调整</p><h3 id="论文提出的模型"><a href="#论文提出的模型" class="headerlink" title="论文提出的模型"></a>论文提出的模型</h3><p>首先引入一个二值变量$p_{ui}$来标识用户对物品是否产生过行为如购买、观看等等：</p><script type="math/tex; mode=display">p_{ui} =\begin{cases}1, &r_{ui} > 0\\0, &r_{ui} = 0\end{cases}</script><p>注意，$p_{ui}=1$只是暗示了用户喜欢某个物品的可能，而且$r_{ui}$的数值越大应该表示喜欢的可能性越大，因此再引入变量表示这种可能性：</p><script type="math/tex; mode=display">c_{ui}=1+\alpha r_{ui}</script><p>引入$c_{ui}$后，对于每一个观测值，我们有一个最小的可能性1，随着观测值的增大，可能性也在逐渐增大，这里的可能性与概率的含义不同，论文中将常数$\alpha$设为40<br>我们的目标是为每一个用户和物品分别得到一个用户特征向量$x_u\in R^f$和物品特征向量$y_i\in R^f$，则预测值可以通过两个向量的内积表示：$p_{ui}=x^T_uy_i$，即预测用户是否会对某个物品产生行为，则目标函数可表示为：</p><script type="math/tex; mode=display">min_{x_*,y_*}L(X,Y)=min_{x_*,y_*}\sum_{u,i}c_{ui}(p_{ui}-x_u^Ty_i)^2+\lambda(\sum_u\mid\mid x_u \mid\mid^2+\sum_i\mid\mid y_i \mid\mid^2)</script><p>同理，第二项为约束项，防止过拟合于训练数据。下一步就是根据目标函数进行求解，因为原始表达式计算复杂度太高，输入的数据集为$m\ast n$的矩阵，m为用户数，n为物品数，规模很容易达到百万级，需要进行相应的优化。<br>我们引入交替最小二乘法(Alternate Least Sqaures)， 目标函数需要优化用户和物品两个维度，可以先固定物品这个维度，对用户唯独进行优化，我的推导过程（论文只给了结果表达式）：<br>对$x_u$求导，可得：</p><script type="math/tex; mode=display">\begin{aligned}\frac{\partial L}{\partial x_u} & = -2\sum_i(p_{ui}-x^T_uy_i)y_ic_{ui}+2\lambda x_u \\& = -2\sum_i(p_{ui}-y_i^Tx_u)y_ic_{ui} + 2\lambda x_u \\& = -2Y^TC_up(u)+2Y^TC_uYx_u+2\lambda x_u\end{aligned}</script><p>其中$Y_{n\ast f}$为含有所有物品特征向量的矩阵，f类似隐语义模型中的隐含特征，可见<a href="http://www.bithub00.com/2019/04/12/imputing%20structured%20missing%20values%20in%20spatial%20data%20with%20clsutered%20adversarial%20matrix%20factorization/" target="_blank" rel="noopener">矩阵分解引入</a>中的解释。令求导结果为0，则有：</p><script type="math/tex; mode=display">\begin{aligned}Y^TC_uYx_u+\lambda Ix_u & = Y^TC_uP_u \\x_u & = (Y^TC_uY+\lambda I)^{-1}Y^TC_up(u)\end{aligned}</script><p>观察表达式，计算复杂度的瓶颈在于计算$Y^TC^uY$这一部分，计算每一个用户的时间复杂度为$O(f^2n)$，我们使用线性代数的知识进行简单的变形：$Y^TC^uY=Y^TY+Y^T(C^u-I)Y$，其中$Y^TY$与用户u无关，可以在迭代开始时预先计算，而$Y^T(C^u-I)Y$中的$C^u-I$只有$n_u$个非零值，其中$n_u$是用户u$r_{ui}&gt;0$的个数，很明显$n_u\ll n$。同样地，$C^up(u)$也只含有$n_u$个非零值，则此时对于单个用户$x_u$的计算复杂度为$O(f^2n_u+f^3)$，其中$O(f^3)$求逆的时间复杂度，总共有m个用户，所以总的时间复杂度为$O(f^2N+f^3m)$，N为总的非零值的个数，隐含特征f的个数通常设置为$20-200$。则$y_i$的表达式同理：</p><script type="math/tex; mode=display">y_i=(X^TC^iX+\lambda I)^{-1}X^TC^ip(i)</script><h3 id="实践"><a href="#实践" class="headerlink" title="实践"></a>实践</h3><p>理解完论文框架后，使用一个<a href="http://archive.ics.uci.edu/ml/machine-learning-databases/00352" target="_blank" rel="noopener">数据集</a>进行实践，自己构建一个基于隐式反馈数据的推荐系统。数据集来源于UCI大学的机器学习资源库，它包含了一个位于英国的网上零售商时间跨度为八个月的所以购买记录，数据集中包含了InvoiceNo StockCode Description Quantity InvoiceDate UnitPrice CustomID Country这些字段。</p><h4 id="数据预处理"><a href="#数据预处理" class="headerlink" title="数据预处理"></a>数据预处理</h4><ul><li>下载数据并读取<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">retail_data = pd.read_excel(<span class="string">'Online Retail.xlsx'</span>)</span><br><span class="line">print(retail_data.info())</span><br><span class="line"></span><br><span class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">pandas</span>.<span class="title">core</span>.<span class="title">frame</span>.<span class="title">DataFrame</span>'&gt;</span></span><br><span class="line"><span class="class"><span class="title">RangeIndex</span>:</span> <span class="number">541909</span> entries, <span class="number">0</span> to <span class="number">541908</span></span><br><span class="line">Data columns (total <span class="number">8</span> columns):</span><br><span class="line">InvoiceNo      <span class="number">541909</span> non-null object</span><br><span class="line">StockCode      <span class="number">541909</span> non-null object</span><br><span class="line">Description    <span class="number">540455</span> non-null object</span><br><span class="line">Quantity       <span class="number">541909</span> non-null int64</span><br><span class="line">InvoiceDate    <span class="number">541909</span> non-null datetime64[ns]</span><br><span class="line">UnitPrice      <span class="number">541909</span> non-null float64</span><br><span class="line">CustomerID     <span class="number">406829</span> non-null float64</span><br><span class="line">Country        <span class="number">541909</span> non-null object</span><br><span class="line">dtypes: datetime64[ns](<span class="number">1</span>), float64(<span class="number">2</span>), int64(<span class="number">1</span>), object(<span class="number">4</span>)</span><br><span class="line">memory usage: <span class="number">33.1</span>+ MB</span><br></pre></td></tr></table></figure></li></ul><p>可以看到，除了CustomerID这一字段外，其它字段几乎没有缺失值，但如果CustomerID未知，我们就无法知道购买记录中是谁购买了某个商品，因此需要将CustomerID未知的记录去除：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">cleaned_retail = retail_data.loc[pd.isnull(retail_data.CustomerID) == <span class="keyword">False</span>]</span><br><span class="line">print(cleaned_retail.info())</span><br><span class="line"></span><br><span class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">pandas</span>.<span class="title">core</span>.<span class="title">frame</span>.<span class="title">DataFrame</span>'&gt;</span></span><br><span class="line"><span class="class"><span class="title">Int64Index</span>:</span> <span class="number">406829</span> entries, <span class="number">0</span> to <span class="number">541908</span></span><br><span class="line">Data columns (total <span class="number">8</span> columns):</span><br><span class="line">InvoiceNo      <span class="number">406829</span> non-null object</span><br><span class="line">StockCode      <span class="number">406829</span> non-null object</span><br><span class="line">Description    <span class="number">406829</span> non-null object</span><br><span class="line">Quantity       <span class="number">406829</span> non-null int64</span><br><span class="line">InvoiceDate    <span class="number">406829</span> non-null datetime64[ns]</span><br><span class="line">UnitPrice      <span class="number">406829</span> non-null float64</span><br><span class="line">CustomerID     <span class="number">406829</span> non-null float64</span><br><span class="line">Country        <span class="number">406829</span> non-null object</span><br><span class="line">dtypes: datetime64[ns](<span class="number">1</span>), float64(<span class="number">2</span>), int64(<span class="number">1</span>), object(<span class="number">4</span>)</span><br><span class="line">memory usage: <span class="number">27.9</span>+ MB</span><br></pre></td></tr></table></figure></p><p>这样所有的购买记录都可以对应到唯一的顾客了。接下来我们生成一个商品的描述表，方便查看某个商品编号对应的商品是什么：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">item_lookup = cleaned_retail[[<span class="string">'StockCode'</span>, <span class="string">'Description'</span>]].drop_duplicates()</span><br><span class="line">item_lookup[<span class="string">'StockCode'</span>] = item_lookup.StockCode.astype(str)</span><br><span class="line">print(item_lookup.info()) </span><br><span class="line"></span><br><span class="line">        StockCodeDescription</span><br><span class="line"><span class="number">0</span><span class="number">85123</span>AWHITE HANGING HEART T-LIGHT HOLDER</span><br><span class="line"><span class="number">1</span><span class="number">71053</span>WHITE METAL LANTERN</span><br><span class="line"><span class="number">2</span><span class="number">84406</span>BCREAM CUPID HEARTS COAT HANGER</span><br><span class="line"><span class="number">3</span><span class="number">84029</span>GKNITTED UNION FLAG HOT WATER BOTTLE</span><br><span class="line"><span class="number">4</span><span class="number">84029</span>ERED WOOLLY HOTTIE WHITE HEART.</span><br></pre></td></tr></table></figure></p><p>接下来需要做的是</p><ul><li><p>对于某个用户，将他购买的相同物品的数目进行求和</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cleaned_retail[<span class="string">'CustomerID'</span>] = cleaned_retail.CustomerID.astype(int)</span><br><span class="line">cleaned_retail = cleaned_retail[[<span class="string">'StockCode'</span>, <span class="string">'Quantity'</span>, <span class="string">'CustomerID'</span>]]</span><br><span class="line">grouped_cleaned = cleaned_retail.groupby([<span class="string">'CustomerID'</span>, <span class="string">'StockCode'</span>]).sum().reset_index()</span><br></pre></td></tr></table></figure></li><li><p>将求和结果中的0置为1，数目为0的情况往往是顾客进行了退货，这种情况我们也当作顾客购买了商品，而不是当作没购买的情况处理</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grouped_cleaned.Quantity.loc[grouped_cleaned.Quantity == <span class="number">0</span>] = <span class="number">1</span></span><br></pre></td></tr></table></figure></li><li><p>去除求和结果中小于0的记录</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grouped_purchased = grouped_cleaned.query(<span class="string">'Quantity &gt; 0'</span>)</span><br></pre></td></tr></table></figure></li><li><p>建立ALS算法中输入的数据矩阵</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">customers = list(np.sort(grouped_purchased.CustomerID.unique()))  </span><br><span class="line">products = list(grouped_purchased.StockCode.unique())</span><br><span class="line">quantity = list(grouped_purchased.Quantity)</span><br><span class="line">rows = grouped_purchased.CustomerID.astype(<span class="string">'category'</span>, categories=customers).cat.codes</span><br><span class="line">cols = grouped_purchased.StockCode.astype(<span class="string">'category'</span>, categories=products).cat.codes</span><br><span class="line">purchases_sparse = sparse.csr_matrix((quantity, (rows, cols)), shape=(len(customers), len(products)))</span><br><span class="line"></span><br><span class="line">&lt;<span class="number">4338</span>x3664 sparse matrix of type <span class="string">'&lt;class '</span>numpy.int64<span class="string">'&gt;'</span></span><br><span class="line"><span class="keyword">with</span> <span class="number">266723</span> stored elements <span class="keyword">in</span> Compressed Sparse Row format&gt;</span><br></pre></td></tr></table></figure></li></ul><p>构建的输入矩阵维度是$4338\ast 3664$，其中有266723个非空值。</p><h4 id="划分数据集"><a href="#划分数据集" class="headerlink" title="划分数据集"></a>划分数据集</h4><p>接下来需要把输入数据划分为训练集和测试集，传统的划分方式如图所示：</p><p><img src="https://s2.ax1x.com/2019/08/07/e5hMTK.png" alt="划分数据"></p><p>然而这种方式对于推荐系统是不适用的，因为矩阵分解时需要用上所有的用户-物品数据，更好的方法是随机隐藏输入矩阵中的某些观测值，将隐藏好的矩阵作为训练数据，将完整的矩阵作为测试矩阵，来判断推荐的物品用户是否会购买。</p><p><img src="https://s2.ax1x.com/2019/08/07/e54m9g.png" alt="划分数据"></p><p>为了对比推荐的效果，我们可以和另一种推荐方法作对比，即只推荐最流行的物品。</p><ul><li>划分数据集<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">make_train</span><span class="params">(ratings, pct_test)</span>:</span></span><br><span class="line">        test_set = ratings.copy()</span><br><span class="line">        test_set[test_set != <span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">        training_set = ratings.copy()</span><br><span class="line">        nonzero_inds = training_set.nonzero()</span><br><span class="line">        nonzero_pairs = list(zip(nonzero_inds[<span class="number">0</span>], nonzero_inds[<span class="number">1</span>]))</span><br><span class="line">        random.seed(<span class="number">0</span>)</span><br><span class="line">        num_samples = int(np.ceil(pct_test * len(nonzero_pairs)))</span><br><span class="line">        samples = random.sample(nonzero_pairs, num_samples)</span><br><span class="line">        user_inds = [index[<span class="number">0</span>] <span class="keyword">for</span> index <span class="keyword">in</span> samples]</span><br><span class="line">        item_inds = [index[<span class="number">1</span>] <span class="keyword">for</span> index <span class="keyword">in</span> samples]</span><br><span class="line">        training_set[user_inds, item_inds] = <span class="number">0</span></span><br><span class="line">        training_set.eliminate_zeros()</span><br><span class="line">        <span class="keyword">return</span> training_set, test_set, list(set(user_inds))</span><br></pre></td></tr></table></figure></li></ul><h4 id="ALS算法"><a href="#ALS算法" class="headerlink" title="ALS算法"></a>ALS算法</h4><p>下一步就是实现论文所用的ALS算法，具体数学公式见上面的推导：</p><ul><li>ALS算法<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">implicit_weighted_ALS</span><span class="params">(training_set, lambda_val=<span class="number">0.1</span>, alpha=<span class="number">40</span>, iterations=<span class="number">10</span>, rank_size=<span class="number">20</span>, seed=<span class="number">0</span>)</span>:</span></span><br><span class="line">    conf = (alpha * training_set)</span><br><span class="line">    num_user = conf.shape[<span class="number">0</span>]</span><br><span class="line">    num_item = conf.shape[<span class="number">1</span>]</span><br><span class="line">    rstate = np.random.RandomState(seed)</span><br><span class="line">    X = sparse.csr_matrix(rstate.normal(size=(num_user, rank_size)))</span><br><span class="line">    Y = sparse.csr_matrix(rstate.normal(size=(num_item, rank_size)))</span><br><span class="line">    X_eye = sparse.eye(num_user)</span><br><span class="line">    Y_eye = sparse.eye(num_item)</span><br><span class="line">    lambda_eye = lambda_val * sparse.eye(rank_size)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> iter_step <span class="keyword">in</span> range(iterations):  </span><br><span class="line">        yTy = Y.T.dot(Y)</span><br><span class="line">        xTx = X.T.dot(X)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> u <span class="keyword">in</span> range(num_user):</span><br><span class="line">            conf_samp = conf[u, :].toarray()</span><br><span class="line">            pref = conf_samp.copy()</span><br><span class="line">            pref[pref != <span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">            CuI = sparse.diags(conf_samp, [<span class="number">0</span>])</span><br><span class="line">            yTCuIY = Y.T.dot(CuI).dot(Y)  </span><br><span class="line">            yTCupu = Y.T.dot(CuI + Y_eye).dot(pref.T)</span><br><span class="line">            X[u] = spsolve(yTy + yTCuIY + lambda_eye, yTCupu)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(num_item):</span><br><span class="line">            conf_samp = conf[:, i].T.toarray()</span><br><span class="line">            pref = conf_samp.copy()</span><br><span class="line">            pref[pref != <span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">            CiI = sparse.diags(conf_samp, [<span class="number">0</span>])</span><br><span class="line">            xTCiIX = X.T.dot(CiI).dot(X)  </span><br><span class="line">            xTCiPi = X.T.dot(CiI + X_eye).dot(pref.T)</span><br><span class="line">            Y[i] = spsolve(xTx + xTCiIX + lambda_eye, xTCiPi)</span><br><span class="line">            </span><br><span class="line">    <span class="keyword">return</span> X, Y.T</span><br></pre></td></tr></table></figure></li></ul><p>我们可以举一个例子来看看效果：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">user_vecs, item_vecs = implicit_weighted_ALS(product_train, lambda_val = <span class="number">0.1</span>, alpha = <span class="number">15</span>, iterations = <span class="number">1</span>, rank_size = <span class="number">20</span>)</span><br><span class="line">print(user_vecs[<span class="number">0</span>,:].dot(item_vecs).toarray()[<span class="number">0</span>,:<span class="number">5</span>])</span><br><span class="line">[ <span class="number">0.00644811</span>, <span class="number">-0.0014369</span> ,  <span class="number">0.00494281</span>,  <span class="number">0.00027502</span>,  <span class="number">0.01275582</span> ]</span><br></pre></td></tr></table></figure></p><p>对第一个用户来说，前五个物品中第五个物品的得分最高，因此会被用于推荐，这只是一次迭代的结果，迭代多次效果会更好，但原始ALS的算法计算过程太慢，我们需要对它加速，可以使用github上star数上千的python ALS加速版本，所用时间要少得多：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> implict</span><br><span class="line">alpha = <span class="number">15</span></span><br><span class="line">product_train, product_test, product_users_altered = make_train(purchases_sparse, pct_test=<span class="number">0.2</span>)</span><br><span class="line">user_vecs, item_vecs = implicit.alternating_least_squares((product_train * alpha).astype(<span class="string">'double'</span>), factors=<span class="number">20</span>, regularization=<span class="number">0.1</span>, iterations=<span class="number">50</span>)</span><br></pre></td></tr></table></figure></p><p>可以直观地感觉到计算速度大大加快了，用兴趣的可以去github上看看<a href="https://github.com/benfred/implicit" target="_blank" rel="noopener">源代码</a></p><h4 id="效果评估"><a href="#效果评估" class="headerlink" title="效果评估"></a>效果评估</h4><p>数据集有了，推荐系统也搭好了，那下一步就是对我们的推荐系统进行评估，看看它的表现。在划分训练集和测试集时，有这么一步：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">test_set[test_set != <span class="number">0</span>] = <span class="number">1</span></span><br></pre></td></tr></table></figure></p><p>于是推荐就变成了一个二分类问题，购买1或不购买0，这时就可以引入分类系统的评测指标：ROC(Receiver Operating Characteristic)曲线与AUC(Area Under the Curve)值。它的介绍可以看另一篇博客<a href="http://www.bithub00.com/2019/08/07/ROC%E4%B8%8EAUC/" target="_blank" rel="noopener">ROC与AUC</a>。接下来是编写一个函数计算AUC值以进行比较：</p><ul><li>AUC<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> metrics</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">auc_score</span><span class="params">(predictions, test)</span>:</span></span><br><span class="line">    fpr, tpr, thresholds = metrics.roc_curve(test, predictions)</span><br><span class="line">    <span class="keyword">return</span> metrics.auc(fpr, tpr)</span><br></pre></td></tr></table></figure></li></ul><p>基于上面这个函数，我们为训练集中每一个被隐藏了至少一条记录的用户计算AUC值，随后求平均值并与“推荐最流行物品”的策略进行比较：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">calc_mean_auc</span><span class="params">(training_set, altered_users, predictions, test_set)</span>:</span></span><br><span class="line">    store_auc = []</span><br><span class="line">    popularity_auc = []</span><br><span class="line">    pop_items = np.array(test_set.sum(axis=<span class="number">0</span>)).reshape(<span class="number">-1</span>)</span><br><span class="line">    item_vecs = predictions[<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">for</span> user <span class="keyword">in</span> altered_users:</span><br><span class="line">        training_row = training_set[user, :].toarray().reshape(<span class="number">-1</span>) </span><br><span class="line">        zero_inds = np.where(training_row == <span class="number">0</span>)</span><br><span class="line">        user_vec = predictions[<span class="number">0</span>][user, :]</span><br><span class="line">        pred = user_vec.dot(item_vecs).toarray()[<span class="number">0</span>, zero_inds].reshape(<span class="number">-1</span>)</span><br><span class="line">        actual = test_set[user, :].toarray()[<span class="number">0</span>, zero_inds].reshape(<span class="number">-1</span>)</span><br><span class="line">        pop = pop_items[zero_inds]</span><br><span class="line">        store_auc.append(auc_score(pred, actual))</span><br><span class="line">        popularity_auc.append(auc_score(pop, actual))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> float(<span class="string">'%.3f'</span> % np.mean(store_auc)), float(<span class="string">'%.3f'</span> % np.mean(popularity_auc))</span><br><span class="line"></span><br><span class="line">print(calc_mean_auc(product_train, product_users_altered,[sparse.csr_matrix(user_vecs), sparse.csr_matrix(item_vecs.T)], product_test))</span><br><span class="line">(<span class="number">0.87</span>, <span class="number">0.814</span>)</span><br></pre></td></tr></table></figure></p><p>从结果可以看出，使用论文提出的推荐模型的效果是比单纯推荐最流行物品的效果要好的。</p><h4 id="实例观察"><a href="#实例观察" class="headerlink" title="实例观察"></a>实例观察</h4><p>AUC值的大小比较还是比较抽象不够直观，下一步选取一个用户查看他购买过的物品，以及模型所推荐的物品来直观地感受推荐的效果。首先编写一个函数，根据customer_id来获得他所购买的商品的一个列表：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_items_purchased</span><span class="params">(customer_id, mf_train, customers_list, products_list, item_lookup)</span>:</span></span><br><span class="line">    cust_ind = np.where(customers_list == customer_id)[<span class="number">0</span>][<span class="number">0</span></span><br><span class="line">    purchased_ind = mf_train[cust_ind,:].nonzero()[<span class="number">1</span>]</span><br><span class="line">    prod_codes = products_list[purchased_ind]</span><br><span class="line">    <span class="keyword">return</span> item_lookup.loc[item_lookup.StockCode.isin(prod_codes)]</span><br><span class="line"></span><br><span class="line">customers_arr = np.array(customers)</span><br><span class="line">products_arr = np.array(products)</span><br><span class="line">print(get_items_purchased(<span class="number">12346</span>, product_train, customers_arr, products_arr, item_lookup))</span><br><span class="line"></span><br><span class="line">StockCodeDescription</span><br><span class="line"><span class="number">61619</span><span class="number">23166</span>MEDIUM CERAMIC TOP STORAGE JAR</span><br></pre></td></tr></table></figure></p><p>根据结果显示，这位顾客曾经购买了一个中等大小的陶瓷罐用于装东西，我们的推荐系统会推荐什么样的物品给他呢？<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> MinMaxScaler</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">rec_items</span><span class="params">(customer_id, mf_train, user_vecs, item_vecs, customer_list, item_list, item_lookup, num_items=<span class="number">10</span>)</span>:</span></span><br><span class="line">    cust_ind = np.where(customer_list == customer_id)[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line">    pref_vec = mf_train[cust_ind, :].toarray()</span><br><span class="line">    pref_vec = pref_vec.reshape(<span class="number">-1</span>) + <span class="number">1</span> </span><br><span class="line">    pref_vec[pref_vec &gt; <span class="number">1</span>] = <span class="number">0</span></span><br><span class="line">    rec_vector = user_vecs[cust_ind, :].dot(item_vecs.T)</span><br><span class="line">    min_max = MinMaxScaler()</span><br><span class="line">    rec_vector_scaled = min_max.fit_transform(rec_vector.reshape(<span class="number">-1</span>, <span class="number">1</span>))[:, <span class="number">0</span>]</span><br><span class="line">    recommend_vector = pref_vec * rec_vector_scaled</span><br><span class="line">    product_idx = np.argsort(recommend_vector)[::<span class="number">-1</span>][:num_items]</span><br><span class="line">    rec_list = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> index <span class="keyword">in</span> product_idx:</span><br><span class="line">        code = item_list[index]</span><br><span class="line">        rec_list.append([code, item_lookup.Description.loc[item_lookup.StockCode == code].iloc[<span class="number">0</span>]])</span><br><span class="line"></span><br><span class="line">    codes = [item[<span class="number">0</span>] <span class="keyword">for</span> item <span class="keyword">in</span> rec_list]</span><br><span class="line">    descriptions = [item[<span class="number">1</span>] <span class="keyword">for</span> item <span class="keyword">in</span> rec_list]</span><br><span class="line">    final_frame = pd.DataFrame(&#123;<span class="string">'StockCode'</span>: codes, <span class="string">'Description'</span>: descriptions&#125;)</span><br><span class="line">    <span class="keyword">return</span> final_frame[[<span class="string">'StockCode'</span>, <span class="string">'Description'</span>]]</span><br><span class="line"></span><br><span class="line">print(rec_items(<span class="number">12353</span>, product_train, user_vecs, item_vecs, customers_arr,products_arr, item_lookup, num_items=<span class="number">10</span>))</span><br><span class="line"></span><br><span class="line">      StockCode       Description</span><br><span class="line"><span class="number">0</span><span class="number">23167</span>SMALL CERAMIC TOP STORAGE JAR</span><br><span class="line"><span class="number">1</span><span class="number">23165</span>LARGE CERAMIC TOP STORAGE JAR</span><br><span class="line"><span class="number">2</span><span class="number">22963</span>JAM JAR WITH GREEN LID</span><br><span class="line"><span class="number">3</span><span class="number">23294</span>SET OF <span class="number">6</span> SNACK LOAF BAKING CASES</span><br><span class="line"><span class="number">4</span><span class="number">22980</span>PANTRY SCRUBBING BRUSH</span><br><span class="line"><span class="number">5</span><span class="number">23296</span>SET OF <span class="number">6</span> TEA TIME BAKING CASES</span><br><span class="line"><span class="number">6</span><span class="number">23293</span>SET OF <span class="number">12</span> FAIRY CAKE BAKING CASES</span><br><span class="line"><span class="number">7</span><span class="number">22978</span>PANTRY ROLLING PIN</span><br><span class="line"><span class="number">8</span><span class="number">23295</span>SET OF <span class="number">12</span> MINI LOAF BAKING CASES</span><br><span class="line"><span class="number">9</span><span class="number">22962</span>JAM JAR WITH PINK LID</span><br></pre></td></tr></table></figure></p><p>从推荐结果中选取了前10个得分最高的物品，它们看起来和这个顾客购买的商品都比较相关，可解释性好，要知道推荐系统是完全不知道陶瓷罐代表什么含义的，而可解释性有时会让顾客更加信服得到的推荐结果。可以选另外的customer_id来继续验证。</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>引申阅读：</p><ul><li>显式反馈推荐系统：</li></ul><ol><li><a href="http://bugra.github.io/work/notes/2014-04-19/alternating-least-squares-method-for-collaborative-filtering/" target="_blank" rel="noopener">Alternating Least Squares Method for Collaborative Filtering</a></li><li><a href="http://blog.ethanrosenthal.com/2016/01/09/explicit-matrix-factorization-sgd-als/" target="_blank" rel="noopener">Explicit Matrix Factorization: ALS, SGD, and All That Jazz</a></li></ol><ul><li>混合推荐系统(显式/隐式)</li></ul><ol><li><a href="https://github.com/lyst/lightfm" target="_blank" rel="noopener">LightFM</a></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;用本文记录学习推荐系统的过程，以及一些实用的资料与资源。&lt;br&gt;
    
    </summary>
    
    
      <category term="python" scheme="http://Bithub00.com/tags/python/"/>
    
      <category term="推荐系统" scheme="http://Bithub00.com/tags/%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title>宝贝陈列室</title>
    <link href="http://Bithub00.com/2019/07/25/%E5%AE%BF%E8%88%8D%E4%B8%80%E8%A7%92/"/>
    <id>http://Bithub00.com/2019/07/25/宿舍一角/</id>
    <published>2019-07-25T03:30:57.778Z</published>
    <updated>2019-09-04T14:36:25.228Z</updated>
    
    <content type="html"><![CDATA[<p><font size="3">展示一下自己收来的各种雕像和CD~</font><br><a id="more"></a></p><p><img src="https://s2.ax1x.com/2019/07/25/eZDA6x.jpg" alt="全览"></p><p><img src="https://s2.ax1x.com/2019/07/25/eZDk11.jpg" alt="致远星贵族小队"></p><p><img src="https://s2.ax1x.com/2019/07/25/eZDFpR.jpg" alt="不义联盟"></p><p><img src="https://s2.ax1x.com/2019/07/25/eZDEX6.jpg" alt="阿卡姆起源限定"></p><p><img src="https://s2.ax1x.com/2019/07/25/eZDPh9.jpg" alt="电视墙背景点亮"></p><p><img src="https://s2.ax1x.com/2019/07/25/eZDcHU.jpg" alt="全览"></p><p><img src="https://s2.ax1x.com/2019/07/25/eZDyuV.jpg" alt="自制老爷场景"></p><p><img src="https://s2.ax1x.com/2019/07/25/eZD2EF.jpg" alt="杰洛特"></p><p><img src="https://s2.ax1x.com/2019/07/25/eZD6BT.jpg" alt="老爷与丑爷"></p><p><img src="https://s2.ax1x.com/2019/07/25/eZDW4J.jpg" alt="雕像与CD"></p><p><img src="https://s2.ax1x.com/2019/07/25/eZDRN4.jpg" alt="正联星战与魔戒"></p><p><img src="https://s2.ax1x.com/2019/09/04/nZzHf0.jpg" alt="蝙蝠车"></p><p><img src="https://s2.ax1x.com/2019/09/04/nZzqpV.jpg" alt="全览"></p><p><img src="https://s2.ax1x.com/2019/09/04/nZzTkn.jpg" alt="猫女与蝙蝠车"></p><p><img src="https://s2.ax1x.com/2019/09/04/nZzfOg.jpg" alt="阿卡姆骑士"></p><p><img src="https://s2.ax1x.com/2019/09/04/nZzITs.jpg" alt="阿卡姆骑士"></p><p><img src="https://s2.ax1x.com/2019/09/04/nZz4mQ.jpg" alt="False God"></p><p><img src="https://s2.ax1x.com/2019/09/04/nZz5wj.jpg" alt="蝙蝠战衣"></p><p><img src="https://s2.ax1x.com/2019/09/04/nZz7Yq.jpg" alt="蝙蝠战衣"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;font size=&quot;3&quot;&gt;展示一下自己收来的各种雕像和CD~&lt;/font&gt;&lt;br&gt;
    
    </summary>
    
    
      <category term="宿舍" scheme="http://Bithub00.com/tags/%E5%AE%BF%E8%88%8D/"/>
    
  </entry>
  
  <entry>
    <title>Youtube爬虫</title>
    <link href="http://Bithub00.com/2019/07/25/Youtube%E7%88%AC%E8%99%AB/"/>
    <id>http://Bithub00.com/2019/07/25/Youtube爬虫/</id>
    <published>2019-07-25T02:31:32.337Z</published>
    <updated>2019-08-21T08:41:11.440Z</updated>
    
    <content type="html"><![CDATA[<h3 id="爬取相关频道Related-Channels"><a href="#爬取相关频道Related-Channels" class="headerlink" title="爬取相关频道Related Channels"></a>爬取相关频道Related Channels</h3><a id="more"></a><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> collections</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="comment"># scrapy crawl related_channel_spider 命令行启动爬虫</span></span><br><span class="line"></span><br><span class="line">youtube_url = <span class="string">'https://www.youtube.com'</span></span><br><span class="line">kol = collections.OrderedDict()</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RelatedChannelsSpider</span><span class="params">(scrapy.Spider)</span>:</span></span><br><span class="line">    name = <span class="string">'related_channel_spider'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">close</span><span class="params">(spider, reason)</span>:</span></span><br><span class="line">        <span class="comment"># 爬虫结束后将爬取结果写入json文件</span></span><br><span class="line">        file_kol = open(<span class="string">'RelatedChannels_new.json'</span>, <span class="string">'a'</span>)</span><br><span class="line">        json.dump(kol, file_kol, sort_keys=<span class="keyword">True</span>, indent=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">start_requests</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># 爬虫数据来源:Youtube 频道链接</span></span><br><span class="line">        file_name = <span class="string">'kol_utm_campaign_ad.xlsx'</span></span><br><span class="line">        Channels = pd.read_excel(file_name, sheet_name=<span class="string">'ad_channel_new'</span>, header=<span class="number">0</span>, </span><br><span class="line">        usecols=[<span class="string">'Channel'</span>])</span><br><span class="line">        Titles = pd.read_excel(file_name, sheet_name=<span class="string">'ad_channel_new'</span>, header=<span class="number">0</span>, </span><br><span class="line">        usecols=[<span class="string">'KolName'</span>])</span><br><span class="line">        length = len(Channels)</span><br><span class="line">        start_urls = []</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, length):</span><br><span class="line">            url = &#123;&#125;</span><br><span class="line">            url[<span class="string">'url'</span>] = Channels[i:i + <span class="number">1</span>].values.item()</span><br><span class="line">            url[<span class="string">'title'</span>] = Titles[i:i + <span class="number">1</span>].values.item()</span><br><span class="line">            start_urls.append(url)</span><br><span class="line">        <span class="keyword">for</span> url <span class="keyword">in</span> start_urls:</span><br><span class="line">            request = scrapy.Request(url[<span class="string">'url'</span>], callback=self.parse)</span><br><span class="line">            request.meta[<span class="string">'title'</span>] = url[<span class="string">'title'</span>]</span><br><span class="line">            <span class="keyword">yield</span> request</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></span><br><span class="line">        related = collections.OrderedDict()</span><br><span class="line">        meta = response.meta</span><br><span class="line">        channel_title = meta[<span class="string">'title'</span>]</span><br><span class="line">        channel_url = response.url</span><br><span class="line">        <span class="keyword">yield</span> &#123;</span><br><span class="line">            <span class="string">'channel_title'</span>: channel_title,</span><br><span class="line">            <span class="string">'channel_url'</span>: channel_url</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment"># xpath解析网页</span></span><br><span class="line">        channel_item_lis = response.xpath(</span><br><span class="line">            <span class="string">'//li[contains(@class,</span></span><br><span class="line"><span class="string">            "branded-page-related-channels-item")]'</span></span><br><span class="line">            )</span><br><span class="line">        <span class="keyword">for</span> channel_item_li <span class="keyword">in</span> channel_item_lis:</span><br><span class="line">            related_channel_title = channel_item_li.xpath(</span><br><span class="line">                <span class="string">'span/div[contains(@class, </span></span><br><span class="line"><span class="string">                "yt-lockup-content")]/h3/a/text()'</span></span><br><span class="line">                ).extract()[<span class="number">0</span>]</span><br><span class="line">            relative_url = channel_item_li.xpath(</span><br><span class="line">                <span class="string">'span/div[contains(@class, </span></span><br><span class="line"><span class="string">                "yt-lockup-content")]/h3/a/@href'</span></span><br><span class="line">                ).extract()[<span class="number">0</span>]</span><br><span class="line">            related[related_channel_title] = youtube_url</span><br><span class="line">             + relative_url</span><br><span class="line">            print(related_channel_title, youtube_url</span><br><span class="line">             + relative_url)</span><br><span class="line">        <span class="keyword">if</span> related:</span><br><span class="line">            kol[channel_title] = related</span><br></pre></td></tr></table></figure><h3 id="爬取视频评论-包含评论内容、评论日期等"><a href="#爬取视频评论-包含评论内容、评论日期等" class="headerlink" title="爬取视频评论(包含评论内容、评论日期等)"></a>爬取视频评论(包含评论内容、评论日期等)</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> lxml.html</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> lxml.cssselect <span class="keyword">import</span> CSSSelector</span><br><span class="line"></span><br><span class="line">YOUTUBE_COMMENTS_URL = </span><br><span class="line"><span class="string">'https://www.youtube.com/all_comments?v=&#123;youtube_id&#125;'</span></span><br><span class="line">YOUTUBE_COMMENTS_AJAX_URL = </span><br><span class="line"><span class="string">'https://www.youtube.com/comment_ajax'</span></span><br><span class="line">youtube_video_url = </span><br><span class="line"><span class="string">'https://www.youtube.com/watch?v='</span></span><br><span class="line"></span><br><span class="line">USER_AGENT = <span class="string">'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/48.0.2564.116 Safari/537.36'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">find_value</span><span class="params">(html, key, num_chars=<span class="number">2</span>)</span>:</span></span><br><span class="line">    pos_begin = html.find(key) + len(key) + num_chars</span><br><span class="line">    pos_end = html.find(<span class="string">'"'</span>, pos_begin)</span><br><span class="line">    <span class="keyword">return</span> html[pos_begin: pos_end]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">extract_comments</span><span class="params">(html)</span>:</span></span><br><span class="line">    tree = lxml.html.fromstring(html)</span><br><span class="line">    item_sel = CSSSelector(<span class="string">'.comment-item'</span>)</span><br><span class="line">    text_sel = CSSSelector(<span class="string">'.comment-text-content'</span>)</span><br><span class="line">    time_sel = CSSSelector(<span class="string">'.time'</span>)</span><br><span class="line">    author_sel = CSSSelector(<span class="string">'.user-name'</span>)</span><br><span class="line">    <span class="comment"># vote_sel = CSSSelector('.like-count') 是否爬取评论点赞数</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> item_sel(tree):</span><br><span class="line">        <span class="keyword">yield</span> &#123;</span><br><span class="line">            <span class="string">'cid'</span>: item.get(<span class="string">'data-cid'</span>),</span><br><span class="line">            <span class="string">'text'</span>: text_sel(item)[<span class="number">0</span>].text_content(),</span><br><span class="line">            <span class="string">'time'</span>: time_sel(item)[<span class="number">0</span>].text_content().strip(),</span><br><span class="line">            <span class="string">'author'</span>: author_sel(item)[<span class="number">0</span>].text_content()</span><br><span class="line">          <span class="comment"># 'like-count': vote_sel(item)[0].text_content()</span></span><br><span class="line">               &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">extract_reply_cids</span><span class="params">(html)</span>:</span></span><br><span class="line">    tree = lxml.html.fromstring(html)</span><br><span class="line">    sel = CSSSelector(<span class="string">'.comment-replies-header &gt; .load-comments'</span>)</span><br><span class="line">    <span class="keyword">return</span> [i.get(<span class="string">'data-cid'</span>) <span class="keyword">for</span> i <span class="keyword">in</span> sel(tree)]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ajax_request</span><span class="params">(session, url, params, data, retries=<span class="number">10</span>, sleep=<span class="number">20</span>)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> range(retries):</span><br><span class="line">        response = session.post(url, params=params, data=data)</span><br><span class="line">        <span class="keyword">if</span> response.status_code == <span class="number">200</span>:</span><br><span class="line">            response_dict = json.loads(response.text)</span><br><span class="line">            <span class="keyword">return</span> response_dict.get(<span class="string">'page_token'</span>, <span class="keyword">None</span>),</span><br><span class="line">            response_dict[<span class="string">'html_content'</span>]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            time.sleep(sleep)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">download_comments</span><span class="params">(youtube_id, sleep=<span class="number">1</span>)</span>:</span></span><br><span class="line">    session = requests.Session()</span><br><span class="line">    session.headers[<span class="string">'User-Agent'</span>] = USER_AGENT</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取初始页面的评论</span></span><br><span class="line">    response = session.get(YOUTUBE_COMMENTS_URL.format(youtube_id=youtube_id))</span><br><span class="line">    html = response.text</span><br><span class="line">    reply_cids = extract_reply_cids(html)</span><br><span class="line"></span><br><span class="line">    ret_cids = []</span><br><span class="line">    <span class="keyword">for</span> comment <span class="keyword">in</span> extract_comments(html):</span><br><span class="line">        ret_cids.append(comment[<span class="string">'cid'</span>])</span><br><span class="line">        <span class="keyword">yield</span> comment</span><br><span class="line"></span><br><span class="line">    page_token = find_value(html, <span class="string">'data-token'</span>)</span><br><span class="line">    session_token = find_value(html, <span class="string">'XSRF_TOKEN'</span>, <span class="number">4</span>)</span><br><span class="line"></span><br><span class="line">    first_iteration = <span class="keyword">True</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取剩下的评论(等同于点击'show more')</span></span><br><span class="line">    <span class="keyword">while</span> page_token:</span><br><span class="line">        data = &#123;</span><br><span class="line">            <span class="string">'video_id'</span>: youtube_id,</span><br><span class="line">            <span class="string">'session_token'</span>: session_token</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        params = &#123;</span><br><span class="line">            <span class="string">'action_load_comments'</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="string">'order_by_time'</span>: <span class="keyword">True</span>,</span><br><span class="line">            <span class="string">'filter'</span>: youtube_id</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> first_iteration:</span><br><span class="line">            params[<span class="string">'order_menu'</span>] = <span class="keyword">True</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            data[<span class="string">'page_token'</span>] = page_token</span><br><span class="line"></span><br><span class="line">        response = ajax_request(session, YOUTUBE_COMMENTS_AJAX_URL, params, data)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> response:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">        page_token, html = response</span><br><span class="line"></span><br><span class="line">        reply_cids += extract_reply_cids(html)</span><br><span class="line">        <span class="keyword">for</span> comment <span class="keyword">in</span> extract_comments(html):</span><br><span class="line">            <span class="keyword">if</span> comment[<span class="string">'cid'</span>] <span class="keyword">not</span> <span class="keyword">in</span> ret_cids:</span><br><span class="line">                ret_cids.append(comment[<span class="string">'cid'</span>])</span><br><span class="line">                <span class="keyword">yield</span> comment</span><br><span class="line"></span><br><span class="line">        first_iteration = <span class="keyword">False</span></span><br><span class="line">        time.sleep(sleep)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取评论回复</span></span><br><span class="line">    <span class="keyword">for</span> cid <span class="keyword">in</span> reply_cids:</span><br><span class="line">        data = &#123;<span class="string">'comment_id'</span>: cid,</span><br><span class="line">                <span class="string">'video_id'</span>: youtube_id,</span><br><span class="line">                <span class="string">'can_reply'</span>: <span class="number">1</span>,</span><br><span class="line">                <span class="string">'session_token'</span>: session_token&#125;</span><br><span class="line"></span><br><span class="line">        params = &#123;<span class="string">'action_load_replies'</span>: <span class="number">1</span>,</span><br><span class="line">                  <span class="string">'order_by_time'</span>: <span class="keyword">False</span>,</span><br><span class="line">                  <span class="string">'filter'</span>: youtube_id,</span><br><span class="line">                  <span class="string">'tab'</span>: <span class="string">'inbox'</span>&#125;</span><br><span class="line"></span><br><span class="line">        response = ajax_request(session, YOUTUBE_COMMENTS_AJAX_URL, params, data)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> response:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">        _, html = response</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> comment <span class="keyword">in</span> extract_comments(html):</span><br><span class="line">            <span class="keyword">if</span> comment[<span class="string">'cid'</span>] <span class="keyword">not</span> <span class="keyword">in</span> ret_cids:</span><br><span class="line">                ret_cids.append(comment[<span class="string">'cid'</span>])</span><br><span class="line">                <span class="keyword">yield</span> comment</span><br><span class="line">        time.sleep(sleep)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span> <span class="comment"># 使用</span></span><br><span class="line">    <span class="keyword">for</span> comment <span class="keyword">in</span> download_comments(videoId):</span><br><span class="line">    ···</span><br></pre></td></tr></table></figure><h3 id="爬取某个视频主所有的视频"><a href="#爬取某个视频主所有的视频" class="headerlink" title="爬取某个视频主所有的视频"></a>爬取某个视频主所有的视频</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用Selenium</span></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">Channel_videos = <span class="string">'https://www.youtube.com/channel/UCGK0RMoHboOVUbdxDhLD1xw/videos'</span></span><br><span class="line">Video_Lists = []</span><br><span class="line">option = webdriver.ChromeOptions()</span><br><span class="line">option.add_argument(<span class="string">'headless'</span>)</span><br><span class="line">youtube_url = <span class="string">'https://www.youtube.com'</span></span><br><span class="line">browser = webdriver.Chrome(chrome_options=option, executable_path=<span class="string">'D:\Tool\Software\chromedriver_win32\\chromedriver.exe'</span>)</span><br><span class="line"><span class="comment"># 去掉option选项可以让chrome在前台显示，看看模拟的效果</span></span><br><span class="line">browser = webdriver.Chrome(executable_path=<span class="string">'D:\Tool\Software\chromedriver_win32\\chromedriver.exe'</span>)</span><br><span class="line">browser.get(Channel_videos)</span><br><span class="line">time.sleep(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">old_height = browser.execute_script(<span class="string">"return document.documentElement.scrollHeight;"</span>)</span><br><span class="line">browser.execute_script(<span class="string">"window.scrollTo(0, document.documentElement.scrollHeight);"</span>)</span><br><span class="line">time.sleep(<span class="number">5</span>)</span><br><span class="line">new_height = browser.execute_script(<span class="string">"return document.documentElement.scrollHeight;"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 模拟浏览器向下滚动页面，直到所有视频都被加载出来</span></span><br><span class="line"><span class="keyword">while</span> new_height != old_height:</span><br><span class="line">    old_height = new_height</span><br><span class="line">    browser.execute_script(<span class="string">"window.scrollTo(0, document.documentElement.scrollHeight);"</span>)</span><br><span class="line">    time.sleep(<span class="number">5</span>)</span><br><span class="line">    new_height = browser.execute_script(<span class="string">"return document.documentElement.scrollHeight;"</span>)</span><br><span class="line"></span><br><span class="line">    html = browser.page_source</span><br><span class="line">    soup = BeautifulSoup(html, <span class="string">'lxml'</span>)</span><br><span class="line">    videoList = soup.findAll(<span class="string">"a"</span>, &#123;<span class="string">"class"</span>: <span class="string">"yt-simple-endpoint style-scope ytd-grid-video-renderer"</span>&#125;)</span><br><span class="line">    <span class="keyword">for</span> video <span class="keyword">in</span> videoList:</span><br><span class="line">        ···</span><br></pre></td></tr></table></figure><h3 id="获取视频的播放量和发布日期"><a href="#获取视频的播放量和发布日期" class="headerlink" title="获取视频的播放量和发布日期"></a>获取视频的播放量和发布日期</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 因为Youtube API每日有访问限制，超过它的配额后就无法再使用接口获取某个视频的播放量和发布日期了，使用爬虫就没有这种限制</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">youtube_video_url = <span class="string">'https://www.youtube.com/watch?v='</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">viewCount</span><span class="params">()</span>:</span></span><br><span class="line">        videoId = <span class="string">'P4ItC6jWN0s'</span></span><br><span class="line">        url = <span class="string">"https://www.youtube.com/watch"</span></span><br><span class="line">        querystring = &#123;<span class="string">"v"</span>: videoId&#125;</span><br><span class="line">        payload = <span class="string">""</span></span><br><span class="line">        headers = &#123;</span><br><span class="line">            <span class="string">'Content-Type'</span>: <span class="string">"application/json"</span>,</span><br><span class="line">            <span class="string">'User-Agent'</span>: <span class="string">"PostmanRuntime/7.15.0"</span>,</span><br><span class="line">            <span class="string">'Accept'</span>: <span class="string">"*/*"</span>,</span><br><span class="line">            <span class="string">'Cache-Control'</span>: <span class="string">"no-cache"</span>,</span><br><span class="line">            <span class="string">'Postman-Token'</span>: <span class="string">"296c1155-2adc-4028-95c2-26cffec91784,f5c8088f-432f-4a67-a815-13464bfca373"</span>,</span><br><span class="line">            <span class="string">'Host'</span>: <span class="string">"www.youtube.com"</span>,</span><br><span class="line">            <span class="string">'cookie'</span>: <span class="string">"YSC=nwR5fai12Kg; VISITOR_INFO1_LIVE=gAl5VFO7Gjo; PREF=f1=50000000; GPS=1"</span>,</span><br><span class="line">            <span class="string">'accept-encoding'</span>: <span class="string">"gzip, deflate"</span>,</span><br><span class="line">            <span class="string">'Connection'</span>: <span class="string">"keep-alive"</span>,</span><br><span class="line">            <span class="string">'cache-control'</span>: <span class="string">"no-cache"</span></span><br><span class="line">        &#125;</span><br><span class="line">        response = requests.request(<span class="string">"GET"</span>, url, data=payload, headers=headers, params=querystring)</span><br><span class="line">        html = etree.HTML(response.text)</span><br><span class="line">        datePublished = html.xpath(<span class="string">'//meta[@itemprop="datePublished"]/@content'</span>)</span><br><span class="line">        <span class="keyword">if</span> datePublished:</span><br><span class="line">            datePublished = datePublished[<span class="number">0</span>]</span><br><span class="line">            view_count = html.xpath(<span class="string">'//meta[@itemprop="interactionCount"]/@content'</span>)</span><br><span class="line">            <span class="keyword">if</span> view_count:</span><br><span class="line">                view_count = int(view_count[<span class="number">0</span>])</span><br><span class="line">                print(datePublished, view_count)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            print(<span class="string">'Not Exist:'</span>,videoId)</span><br><span class="line"></span><br><span class="line">    file = open(<span class="string">'video_statstics.json'</span>, <span class="string">'a'</span>)</span><br><span class="line">    json.dump(video_statstics, file, indent=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    viewCount()</span><br></pre></td></tr></table></figure><h3 id="使用Selenium模拟搜索"><a href="#使用Selenium模拟搜索" class="headerlink" title="使用Selenium模拟搜索"></a>使用Selenium模拟搜索</h3><blockquote><p>避免Youtube API对/search接口的使用限制，根据官方文档，一个项目每日的配额是10000，而/search接口调用一次就至少是100</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.ui <span class="keyword">import</span> WebDriverWait</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support <span class="keyword">import</span> expected_conditions <span class="keyword">as</span> EC</span><br><span class="line">Campaign = campaign_phase(GA.loc[i, <span class="string">'Campaign'</span>])</span><br><span class="line">option = webdriver.ChromeOptions()</span><br><span class="line">option.add_argument(<span class="string">'headless'</span>)</span><br><span class="line">youtube_url = <span class="string">'https://www.youtube.com'</span></span><br><span class="line"><span class="comment"># 添加option后程序启动时就不会弹出chrome窗口，减少资源调用，提供效率，如果需要直观地观看程序的流程就用下面一行注释的不带option调用的命令</span></span><br><span class="line">browser = webdriver.Chrome(chrome_options=option,</span><br><span class="line">executable_path=<span class="string">'XXX\\chromedriver.exe'</span>)</span><br><span class="line"><span class="comment"># browser = webdriver.Chrome(executable_path='XXX\\chromedriver.exe') </span></span><br><span class="line">browser.get(<span class="string">'https://www.youtube.com/'</span>)</span><br><span class="line">wait = WebDriverWait(browser, <span class="number">10</span>)</span><br><span class="line">input = wait.until</span><br><span class="line">(</span><br><span class="line">    EC.presence_of_element_located</span><br><span class="line">    (</span><br><span class="line">        (By.ID, <span class="string">'search'</span>) <span class="comment">#这里一定要加一个括号，详情见另外一篇博客</span></span><br><span class="line">    )</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p><a href="http://www.bithub00.com/2019/08/21/TypeError/" target="_blank" rel="noopener">Selenium TypeError  <strong>init</strong>() takes 2 positional arguments but 3 were given_解决方案</a><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">submit = wait.until</span><br><span class="line">(</span><br><span class="line">    EC.element_to_be_clickable</span><br><span class="line">    (</span><br><span class="line">        (By.ID, <span class="string">'search-icon-legacy'</span>)</span><br><span class="line">    )</span><br><span class="line">)</span><br><span class="line">input.send_keys(Campaign)</span><br><span class="line">submit.click()</span><br><span class="line"><span class="comment"># 到这里就完成了模拟youtube输入关键词搜索的过程，下面是获取搜索结果中与关键词最匹配的频道</span></span><br><span class="line"></span><br><span class="line">time.sleep(<span class="number">5</span>)</span><br><span class="line">html = browser.page_source</span><br><span class="line">soup = BeautifulSoup(html, <span class="string">'html.parser'</span>)</span><br><span class="line"></span><br><span class="line">searchResults = soup.findAll(<span class="string">"a"</span>, &#123;</span><br><span class="line">    <span class="string">"class"</span>: <span class="string">"yt-simple-endpoint style-scope ytd-channel-renderer"</span></span><br><span class="line">&#125;)</span><br><span class="line">            </span><br><span class="line">            </span><br><span class="line"><span class="keyword">if</span> searchResults:</span><br><span class="line">    <span class="keyword">for</span> result <span class="keyword">in</span> searchResults:</span><br><span class="line">        channel_url = youtube_url + result[<span class="string">'href'</span>]</span><br><span class="line">        title = result.find(<span class="string">"span"</span>, &#123;</span><br><span class="line">            <span class="string">"class"</span>: <span class="string">"style-scope ytd-channel-renderer"</span></span><br><span class="line">        &#125;)</span><br><span class="line">        channel_title = title.text</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;爬取相关频道Related-Channels&quot;&gt;&lt;a href=&quot;#爬取相关频道Related-Channels&quot; class=&quot;headerlink&quot; title=&quot;爬取相关频道Related Channels&quot;&gt;&lt;/a&gt;爬取相关频道Related Channels&lt;/h3&gt;
    
    </summary>
    
    
      <category term="python" scheme="http://Bithub00.com/tags/python/"/>
    
      <category term="爬虫" scheme="http://Bithub00.com/tags/%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
</feed>
